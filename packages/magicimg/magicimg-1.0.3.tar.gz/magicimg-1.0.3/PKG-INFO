Metadata-Version: 2.1
Name: magicimg
Version: 1.0.3
Summary: ThÆ° viá»‡n xá»­ lÃ½ áº£nh thÃ´ng minh vá»›i há»— trá»£ GPU tá»± Ä‘á»™ng
Home-page: https://github.com/magicimg/magicimg
Author: MagicImg Team
Author-email: contact@magicimg.com
Classifier: Development Status :: 5 - Production/Stable
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Topic :: Scientific/Engineering :: Image Processing
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Provides-Extra: dev
Provides-Extra: gpu
License-File: LICENSE

# MagicImg - ThÆ° viá»‡n xá»­ lÃ½ áº£nh Python thÃ´ng minh

[![PyPI version](https://badge.fury.io/py/magicimg.svg)](https://badge.fury.io/py/magicimg)
[![Python](https://img.shields.io/pypi/pyversions/magicimg.svg)](https://pypi.org/project/magicimg/)
[![License](https://img.shields.io/github/license/yourusername/magicimg.svg)](LICENSE)

MagicImg lÃ  thÆ° viá»‡n Python máº¡nh máº½ Ä‘á»ƒ xá»­ lÃ½ vÃ  tá»‘i Æ°u hÃ³a áº£nh cho OCR (Optical Character Recognition). ThÆ° viá»‡n tá»± Ä‘á»™ng phÃ¡t hiá»‡n vÃ  cáº£i thiá»‡n cháº¥t lÆ°á»£ng áº£nh, xoay áº£nh nghiÃªng, vÃ  tá»‘i Æ°u hÃ³a cho cÃ¡c engine OCR khÃ¡c nhau.

## âœ¨ TÃ­nh nÄƒng chÃ­nh

- ğŸ” **PhÃ¢n tÃ­ch cháº¥t lÆ°á»£ng áº£nh tá»± Ä‘á»™ng** - ÄÃ¡nh giÃ¡ Ä‘á»™ má», Ä‘á»™ sÃ¡ng, tÆ°Æ¡ng pháº£n
- ğŸ¯ **TÄƒng cÆ°á»ng cháº¥t lÆ°á»£ng thÃ´ng minh** - Cáº£i thiá»‡n áº£nh má»™t cÃ¡ch nháº¹ nhÃ ng, trÃ¡nh over-processing
- ğŸ”„ **PhÃ¡t hiá»‡n vÃ  sá»­a gÃ³c nghiÃªng** - Tá»± Ä‘á»™ng xoay áº£nh vá» Ä‘Ãºng hÆ°á»›ng
- ğŸš€ **Há»— trá»£ GPU** - TÄƒng tá»‘c xá»­ lÃ½ vá»›i CUDA (tÃ¹y chá»n)
- ğŸ“Š **So sÃ¡nh trÆ°á»›c/sau** - Theo dÃµi cÃ¡c thay Ä‘á»•i cháº¥t lÆ°á»£ng áº£nh
- ğŸ› ï¸ **API Ä‘Æ¡n giáº£n** - Dá»… sá»­ dá»¥ng vÃ  tÃ­ch há»£p
- ğŸ”§ **TÃ¹y chá»‰nh linh hoáº¡t** - Cáº¥u hÃ¬nh chi tiáº¿t cho tá»«ng use case

## ğŸ“¦ CÃ i Ä‘áº·t

### CÃ i Ä‘áº·t cÆ¡ báº£n
```bash
pip install magicimg
```

### CÃ i Ä‘áº·t vá»›i há»— trá»£ GPU (tÃ¹y chá»n)
```bash
pip install magicimg[gpu]
# hoáº·c
pip install -r requirements-gpu.txt
```

### CÃ i Ä‘áº·t Tesseract OCR (khuyáº¿n nghá»‹)
Tesseract cáº§n thiáº¿t cho má»™t sá»‘ tÃ­nh nÄƒng nÃ¢ng cao:

**Windows:**
```bash
# Sá»­ dá»¥ng winget
winget install UB-Mannheim.TesseractOCR

# Hoáº·c download tá»«: https://github.com/UB-Mannheim/tesseract/wiki
```

**Ubuntu/Debian:**
```bash
sudo apt update
sudo apt install tesseract-ocr tesseract-ocr-vie
```

**macOS:**
```bash
brew install tesseract
```

> ğŸ“– Xem [INSTALL_TESSERACT.md](INSTALL_TESSERACT.md) Ä‘á»ƒ biáº¿t hÆ°á»›ng dáº«n chi tiáº¿t.

## ğŸš€ Sá»­ dá»¥ng nhanh

### VÃ­ dá»¥ cÆ¡ báº£n

```python
import magicimg

# 1. Kiá»ƒm tra thÃ´ng tin áº£nh
info = magicimg.get_image_info("input.jpg")
print(f"KÃ­ch thÆ°á»›c: {info['width']}x{info['height']}")
print(f"Dung lÆ°á»£ng: {info['file_size_mb']:.2f} MB")

# 2. Kiá»ƒm tra cháº¥t lÆ°á»£ng áº£nh
is_good, quality_info, enhanced = magicimg.check_image_quality("input.jpg")
print(f"Cháº¥t lÆ°á»£ng tá»‘t: {is_good}")
print(f"Äiá»ƒm sá»‘: {quality_info.quality_score:.2f}")

# 3. TÄƒng cÆ°á»ng cháº¥t lÆ°á»£ng
enhanced_image = magicimg.enhance_image("input.jpg", output_path="enhanced.jpg")

# 4. PhÃ¡t hiá»‡n vÃ  sá»­a gÃ³c nghiÃªng
angle = magicimg.detect_skew("input.jpg")
if abs(angle) > 0.5:
    corrected = magicimg.correct_skew("input.jpg", output_path="rotated.jpg")

# 5. Xá»­ lÃ½ hoÃ n chá»‰nh cho OCR
result = magicimg.preprocess_for_ocr("input.jpg", output_path="processed.jpg")
if result.success:
    print(f"CÃ¡c bÆ°á»›c Ä‘Ã£ thá»±c hiá»‡n: {', '.join(result.processing_steps)}")
    print(f"GÃ³c xoay: {result.rotation_angle:.1f}Â°")
    print(f"Cháº¥t lÆ°á»£ng cuá»‘i: {result.quality_metrics.quality_score:.2f}")
```

### Sá»­ dá»¥ng nÃ¢ng cao vá»›i cáº¥u hÃ¬nh tÃ¹y chá»‰nh

```python
from magicimg import ImageProcessor

# Cáº¥u hÃ¬nh tÃ¹y chá»‰nh
config = {
    "min_blur_index": 60.0,      # NgÆ°á»¡ng Ä‘á»™ nÃ©t tá»‘i thiá»ƒu
    "min_brightness": 150.0,     # NgÆ°á»¡ng Ä‘á»™ sÃ¡ng tá»‘i thiá»ƒu  
    "min_contrast": 30.0,        # NgÆ°á»¡ng tÆ°Æ¡ng pháº£n tá»‘i thiá»ƒu
    "min_quality_score": 0.5,    # Äiá»ƒm cháº¥t lÆ°á»£ng tá»‘i thiá»ƒu
    "skip_rotation": False,      # CÃ³ bá» qua xoay áº£nh khÃ´ng
    "use_gpu": True              # Sá»­ dá»¥ng GPU náº¿u cÃ³
}

# Táº¡o processor vá»›i cáº¥u hÃ¬nh tÃ¹y chá»‰nh
processor = ImageProcessor(config=config, debug_dir="debug_output")

# Xá»­ lÃ½ áº£nh
result = processor.process_image("input.jpg", "output.jpg")
print(f"GPU available: {processor.has_gpu}")
```

## ğŸ“š API Reference

### HÃ m tiá»‡n Ã­ch chÃ­nh

#### `get_image_info(image_path)`
Láº¥y thÃ´ng tin cÆ¡ báº£n vá» áº£nh.

**Tham sá»‘:**
- `image_path` (str): ÄÆ°á»ng dáº«n Ä‘áº¿n áº£nh

**Tráº£ vá»:**
```python
{
    'width': int,           # Chiá»u rá»™ng (pixels)
    'height': int,          # Chiá»u cao (pixels) 
    'channels': int,        # Sá»‘ kÃªnh mÃ u
    'file_size_mb': float,  # Dung lÆ°á»£ng file (MB)
    'aspect_ratio': float   # Tá»· lá»‡ khung hÃ¬nh
}
```

#### `check_image_quality(image_path, **kwargs)`
Kiá»ƒm tra vÃ  Ä‘Ã¡nh giÃ¡ cháº¥t lÆ°á»£ng áº£nh.

**Tham sá»‘:**
- `image_path` (str): ÄÆ°á»ng dáº«n Ä‘áº¿n áº£nh
- `**kwargs`: Tham sá»‘ tÃ¹y chá»‰nh cho ImageProcessor

**Tráº£ vá»:**
- `is_good` (bool): áº¢nh cÃ³ cháº¥t lÆ°á»£ng tá»‘t khÃ´ng
- `quality_info` (ImageQualityMetrics): ThÃ´ng tin chi tiáº¿t vá» cháº¥t lÆ°á»£ng
- `enhanced_image` (np.ndarray): áº¢nh Ä‘Ã£ Ä‘Æ°á»£c tÄƒng cÆ°á»ng (náº¿u cáº§n)

#### `enhance_image(image_path, output_path=None, **kwargs)`
TÄƒng cÆ°á»ng cháº¥t lÆ°á»£ng áº£nh má»™t cÃ¡ch nháº¹ nhÃ ng.

**Tham sá»‘:**
- `image_path` (str): ÄÆ°á»ng dáº«n áº£nh Ä‘áº§u vÃ o
- `output_path` (str, optional): ÄÆ°á»ng dáº«n lÆ°u áº£nh káº¿t quáº£
- `**kwargs`: Tham sá»‘ tÃ¹y chá»‰nh

**Tráº£ vá»:**
- `np.ndarray`: áº¢nh Ä‘Ã£ tÄƒng cÆ°á»ng (hoáº·c None náº¿u khÃ´ng cáº§n)

#### `detect_skew(image_path)`
PhÃ¡t hiá»‡n gÃ³c nghiÃªng cá»§a áº£nh.

**Tham sá»‘:**
- `image_path` (str): ÄÆ°á»ng dáº«n Ä‘áº¿n áº£nh

**Tráº£ vá»:**
- `float`: GÃ³c nghiÃªng (Ä‘á»™), Ã¢m = nghiÃªng trÃ¡i, dÆ°Æ¡ng = nghiÃªng pháº£i

#### `correct_skew(image_path, output_path=None, angle=None)`
Sá»­a gÃ³c nghiÃªng cá»§a áº£nh.

**Tham sá»‘:**
- `image_path` (str): ÄÆ°á»ng dáº«n áº£nh Ä‘áº§u vÃ o
- `output_path` (str, optional): ÄÆ°á»ng dáº«n lÆ°u áº£nh káº¿t quáº£
- `angle` (float, optional): GÃ³c xoay cá»¥ thá»ƒ (náº¿u khÃ´ng cung cáº¥p sáº½ tá»± phÃ¡t hiá»‡n)

**Tráº£ vá»:**
- `np.ndarray`: áº¢nh Ä‘Ã£ Ä‘Æ°á»£c xoay

#### `preprocess_for_ocr(image_path, output_path=None, **kwargs)`
Xá»­ lÃ½ áº£nh hoÃ n chá»‰nh cho OCR.

**Tham sá»‘:**
- `image_path` (str): ÄÆ°á»ng dáº«n áº£nh Ä‘áº§u vÃ o
- `output_path` (str, optional): ÄÆ°á»ng dáº«n lÆ°u áº£nh káº¿t quáº£
- `**kwargs`: Tham sá»‘ tÃ¹y chá»‰nh cho ImageProcessor

**Tráº£ vá»:**
- `ProcessingResult`: Káº¿t quáº£ xá»­ lÃ½ chi tiáº¿t

### Class ImageProcessor

Lá»›p chÃ­nh Ä‘á»ƒ xá»­ lÃ½ áº£nh vá»›i cáº¥u hÃ¬nh tÃ¹y chá»‰nh.

```python
processor = ImageProcessor(
    debug_dir="debug",      # ThÆ° má»¥c lÆ°u áº£nh debug
    config={               # Cáº¥u hÃ¬nh tÃ¹y chá»‰nh
        "min_blur_index": 60.0,
        "min_brightness": 150.0,
        "min_contrast": 30.0,
        "min_quality_score": 0.5,
        "skip_rotation": False,
        "use_gpu": True
    }
)
```

**PhÆ°Æ¡ng thá»©c chÃ­nh:**
- `process_image(input_path, output_path)`: Xá»­ lÃ½ áº£nh hoÃ n chá»‰nh
- `check_quality(image)`: Kiá»ƒm tra cháº¥t lÆ°á»£ng áº£nh
- `enhance_image(image, quality_info)`: TÄƒng cÆ°á»ng cháº¥t lÆ°á»£ng
- `detect_skew(image)`: PhÃ¡t hiá»‡n gÃ³c nghiÃªng
- `correct_skew(image, angle)`: Sá»­a gÃ³c nghiÃªng

## âš™ï¸ Cáº¥u hÃ¬nh chi tiáº¿t

### Tham sá»‘ cáº¥u hÃ¬nh máº·c Ä‘á»‹nh

```python
DEFAULT_CONFIG = {
    # NgÆ°á»¡ng cháº¥t lÆ°á»£ng
    "min_blur_index": 100.0,        # Äá»™ nÃ©t tá»‘i thiá»ƒu (cÃ ng cao cÃ ng nÃ©t)
    "min_brightness": 180.0,        # Äá»™ sÃ¡ng tá»‘i thiá»ƒu (0-255)
    "min_contrast": 50.0,           # TÆ°Æ¡ng pháº£n tá»‘i thiá»ƒu
    "min_quality_score": 0.6,       # Äiá»ƒm cháº¥t lÆ°á»£ng tá»‘i thiá»ƒu (0-1)
    
    # Xá»­ lÃ½ gÃ³c nghiÃªng
    "min_skew_angle": 0.5,          # GÃ³c nghiÃªng tá»‘i thiá»ƒu Ä‘á»ƒ xoay (Ä‘á»™)
    "skip_rotation": False,         # Bá» qua xoay áº£nh
    
    # GPU vÃ  hiá»‡u nÄƒng
    "use_gpu": True,                # Sá»­ dá»¥ng GPU náº¿u cÃ³
    "optimize_for_gpu": True,       # Tá»‘i Æ°u cho GPU
    "batch_size": 4,                # KÃ­ch thÆ°á»›c batch
    
    # PhÃ¡t hiá»‡n Ä‘Æ°á»ng káº»
    "line_detection": {
        "min_line_length_ratio": 0.6,
        "histogram_threshold_ratio": 0.5
    }
}
```

### TÃ¹y chá»‰nh cho cÃ¡c use case khÃ¡c nhau

**áº¢nh cháº¥t lÆ°á»£ng cao:**
```python
high_quality_config = {
    "min_blur_index": 120.0,
    "min_brightness": 200.0,
    "min_contrast": 60.0,
    "min_quality_score": 0.8
}
```

**áº¢nh cháº¥t lÆ°á»£ng tháº¥p:**
```python
low_quality_config = {
    "min_blur_index": 40.0,
    "min_brightness": 120.0,
    "min_contrast": 20.0,
    "min_quality_score": 0.3
}
```

**Xá»­ lÃ½ nhanh (bá» qua má»™t sá»‘ bÆ°á»›c):**
```python
fast_config = {
    "skip_rotation": True,
    "use_gpu": False,
    "min_quality_score": 0.4
}
```

## ğŸ”§ Debug vÃ  Troubleshooting

### Báº­t cháº¿ Ä‘á»™ debug

```python
from magicimg import ImageProcessor

# Táº¡o processor vá»›i debug
processor = ImageProcessor(debug_dir="debug_output")
result = processor.process_image("input.jpg", "output.jpg")

# Kiá»ƒm tra thÆ° má»¥c debug_output Ä‘á»ƒ xem cÃ¡c bÆ°á»›c xá»­ lÃ½
```

### Kiá»ƒm tra thÃ´ng tin há»‡ thá»‘ng

```python
import magicimg
magicimg.print_system_info()
```

### CÃ¡c lá»—i thÆ°á»ng gáº·p

**1. Lá»—i import torch (GPU):**
```
ImportError: No module named 'torch'
```
**Giáº£i phÃ¡p:** CÃ i Ä‘áº·t PyTorch:
```bash
pip install torch torchvision
```

**2. Lá»—i Tesseract:**
```
TesseractNotFoundError
```
**Giáº£i phÃ¡p:** CÃ i Ä‘áº·t Tesseract OCR (xem pháº§n cÃ i Ä‘áº·t á»Ÿ trÃªn)

**3. Lá»—i GPU:**
```
CUDA out of memory
```
**Giáº£i phÃ¡p:** Giáº£m batch_size hoáº·c táº¯t GPU:
```python
config = {"use_gpu": False, "batch_size": 1}
```

### Logging

```python
import logging
logging.basicConfig(level=logging.DEBUG)

# BÃ¢y giá» sáº½ tháº¥y log chi tiáº¿t
result = magicimg.preprocess_for_ocr("input.jpg")
```

## ğŸ“Š So sÃ¡nh hiá»‡u suáº¥t

### Test vá»›i áº£nh tháº­t

```python
# Cháº¡y test táº­p trung
python tests/test_focused_apis.py

# Cháº¡y test toÃ n diá»‡n
python tests/test_pip_apis.py
```

### Benchmark

```python
import time
import magicimg

# Test thá»i gian xá»­ lÃ½
start_time = time.time()
result = magicimg.preprocess_for_ocr("large_image.jpg")
processing_time = time.time() - start_time

print(f"Thá»i gian xá»­ lÃ½: {processing_time:.2f}s")
print(f"GPU Ä‘Æ°á»£c sá»­ dá»¥ng: {result.success}")
```

## ğŸ¤ ÄÃ³ng gÃ³p

ChÃºng tÃ´i hoan nghÃªnh má»i Ä‘Ã³ng gÃ³p! Vui lÃ²ng:

1. Fork repository
2. Táº¡o feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to branch (`git push origin feature/AmazingFeature`)
5. Táº¡o Pull Request

## ğŸ“„ License

Dá»± Ã¡n nÃ y Ä‘Æ°á»£c phÃ¢n phá»‘i dÆ°á»›i giáº¥y phÃ©p MIT. Xem [LICENSE](LICENSE) Ä‘á»ƒ biáº¿t thÃªm chi tiáº¿t.

## ğŸ†• Changelog

### v1.0.2 (Latest)
- âœ… Tá»‘i Æ°u hÃ³a enhancement Ä‘á»ƒ trÃ¡nh over-processing
- âœ… Cáº£i thiá»‡n phÃ¡t hiá»‡n gÃ³c nghiÃªng
- âœ… ThÃªm so sÃ¡nh trÆ°á»›c/sau xá»­ lÃ½
- âœ… Sá»­a lá»—i GPU memory management
- âœ… Cáº­p nháº­t documentation chi tiáº¿t

### v1.0.1
- âœ… Sá»­a lá»—i API parameters
- âœ… Äá»“ng bá»™ version numbers
- âœ… Cáº£i thiá»‡n error handling

### v1.0.0
- ğŸ‰ PhiÃªn báº£n Ä‘áº§u tiÃªn
- âœ… Há»— trá»£ GPU vá»›i CUDA
- âœ… API Ä‘Æ¡n giáº£n vÃ  máº¡nh máº½
- âœ… Tá»± Ä‘á»™ng phÃ¡t hiá»‡n vÃ  xá»­ lÃ½ áº£nh

## ğŸ“ Há»— trá»£

- ğŸ“§ Email: your.email@example.com
- ğŸ› Issues: [GitHub Issues](https://github.com/yourusername/magicimg/issues)
- ğŸ“– Documentation: [Wiki](https://github.com/yourusername/magicimg/wiki)

---

**â­ Náº¿u tháº¥y há»¯u Ã­ch, hÃ£y cho chÃºng tÃ´i má»™t star trÃªn GitHub!** 
