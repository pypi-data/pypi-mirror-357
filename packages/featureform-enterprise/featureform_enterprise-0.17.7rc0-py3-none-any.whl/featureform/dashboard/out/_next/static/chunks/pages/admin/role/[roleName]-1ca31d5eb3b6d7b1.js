(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8621],{77902:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/role/[roleName]",function(){return c(39623)}])},39623:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return q}});var d=c(85893),e=c(11163);c(67294);var f=c(47568),g=c(34051),h=c.n(g),i=c(99226),j=c(86886),k=c(46291),l=c(19803),m=c(42207),n=c(41912),o=c(57225);function p(a){var b,c,e,g=a.roleName,p=void 0===g?"":g,q=(0,k.rt)(),r=(b=(0,f.Z)(h().mark(function a(){var b,c=arguments;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=c.length>0&& void 0!==c[0]?c[0]:null,!(p&&b)){a.next=4;break}return a.next=4,q.addChildRole(p,b);case 4:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),s=(c=(0,f.Z)(h().mark(function a(){var b,c=arguments;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=c.length>0&& void 0!==c[0]?c[0]:null,!(p&&b)){a.next=4;break}return a.next=4,q.addRoleToGroup(p,b);case 4:case"end":return a.stop()}},a)})),function(){return c.apply(this,arguments)}),t=(e=(0,f.Z)(h().mark(function a(b){return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(p&&b)){a.next=3;break}return a.next=3,q.addRoleResource(p,b.Name,b.Variant,b.ResType);case 3:case"end":return a.stop()}},a)})),function(a){return e.apply(this,arguments)});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("h2",{children:["Role: ",p.toUpperCase()]}),(0,d.jsx)(i.Z,{sx:{flexGrow:1},children:(0,d.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,d.jsx)(j.ZP,{item:!0,xs:6,children:(0,d.jsx)(n.Z,{embeddedMode:!0,roleNameProp:p,selectCallback:r})}),(0,d.jsx)(j.ZP,{item:!0,xs:6,children:(0,d.jsx)(m.Z,{roleNameProp:p,selectCallback:t})}),(0,d.jsx)(j.ZP,{item:!0,xs:6,children:(0,d.jsx)(o.Z,{roleNameProp:p})}),(0,d.jsx)(j.ZP,{item:!0,xs:6,children:(0,d.jsx)(l.Z,{embeddedMode:!0,roleNameProp:p,selectCallback:s})})]})})]})}var q=function(){var a=(0,e.useRouter)().query.roleName;return a?(0,d.jsx)(p,{roleName:a}):null}},19803:function(a,b,c){"use strict";c.d(b,{Z:function(){return A}});var d=c(47568),e=c(34051),f=c.n(e),g=c(85893),h=c(83321),i=c(72882),j=c(90629),k=c(7906),l=c(53184),m=c(53816),n=c(53252),o=c(295),p=c(37645),q=c(50657),r=c(31425),s=c(6514),t=c(11163),u=c(67294),v=c(46291),w=c(99226),x=c(98456);function y(a){var b,c=a.currentGroup,e=void 0===c?"":c,h=a.excludeList,p=void 0===h?[]:h,q=a.selectCallback,r=void 0===q?function(){return null}:q,s=(0,u.useState)([]),t=s[0],y=s[1],z=(0,u.useState)(!1),A=z[0],B=z[1],C=(0,v.rt)(),D=(b=(0,d.Z)(f().mark(function a(){var b,c=arguments;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b=c.length>0&& void 0!==c[0]?c[0]:null,r&&b&&(B(!0),r(b));case 2:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)});return(0,u.useEffect)(function(){var a;(a=(0,d.Z)(f().mark(function a(){var b,c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return B(!0),a.next=3,C.getGroups();case 3:(b=a.sent)&&(p.push(e),y(c=b.filter(function(a){return!p.includes(a)}))),B(!1);case 6:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[]),(0,g.jsx)(g.Fragment,{children:A?(0,g.jsx)(w.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,g.jsx)(x.Z,{})}):(0,g.jsx)(i.Z,{component:j.Z,children:(0,g.jsxs)(k.Z,{sx:{minWidth:300},"aria-label":"Embedded Group Table",children:[(0,g.jsx)(l.Z,{children:(0,g.jsx)(m.Z,{children:(0,g.jsx)(n.Z,{children:"Name"})})}),(0,g.jsx)(o.Z,{children:null==t?void 0:t.map(function(a,b){return(0,g.jsx)(m.Z,{onClick:function(){return D(a)},style:{cursor:"pointer"},hover:!0,children:(0,g.jsx)(n.Z,{children:a})},b)})})]})})})}var z=c(62232);function A(a){var b,c,e,w=a.embeddedMode,x=void 0!==w&&w,A=a.selectCallback,B=void 0===A?function(){return null}:A,C=a.roleNameProp,D=void 0===C?"":C,E=a.groupNameProp,F=void 0===E?"":E,G=(0,t.useRouter)(),H=(0,u.useState)(!1),I=H[0],J=H[1],K=(0,u.useState)(""),L=K[0],M=K[1],N=(0,u.useState)(""),O=N[0],P=N[1],Q=(0,u.useState)([]),R=Q[0],S=Q[1],T=(0,v.rt)(),U=function(){M(""),P(""),J(!0)},V=function(){J(!1),M("")},W=(b=(0,d.Z)(f().mark(function a(){var b,c=arguments;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=c.length>0&& void 0!==c[0]?c[0]:null,!(B&&b)){a.next=4;break}return a.next=4,B(b);case 4:V();case 5:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)}),X=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"";a&&G.push("/admin/group/"+a)},Y=(c=(0,d.Z)(f().mark(function a(b){var c,d;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b.preventDefault(),!((null==L?void 0:L.trim())&&L.replaceAll("_","").length>2)){a.next=13;break}return a.next=4,T.addGroup(L);case 4:if(!(c=a.sent)){a.next=10;break}return a.next=8,T.getGroups();case 8:S(d=a.sent);case 10:V(),a.next=14;break;case 13:P("Please enter a name. Must be 3 characters or longer.");case 14:case"end":return a.stop()}},a)})),function(a){return c.apply(this,arguments)}),Z=(e=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=[],!D){a.next=7;break}return a.next=4,T.getGroupsForRole(D);case 4:case 10:b=a.sent,a.next=16;break;case 7:if(!F){a.next=13;break}return a.next=10,T.getChildGroups(F);case 13:return a.next=15,T.getGroups();case 15:b=a.sent;case 16:b&&S(b);case 17:case"end":return a.stop()}},a)})),function(){return e.apply(this,arguments)});return(0,u.useEffect)(function(){var a;(a=(0,d.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(x){a.next=3;break}return a.next=3,Z();case 3:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[]),(0,u.useEffect)(function(){var a;(a=(0,d.Z)(f().mark(function a(){return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:x&&!I&&Z();case 1:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[I]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("strong",{style:{float:"left"},children:"Groups"}),(0,g.jsx)(h.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:U,children:"Add Group"}),(0,g.jsx)(i.Z,{component:j.Z,children:(0,g.jsxs)(k.Z,{sx:{minWidth:300},"aria-label":"Admin Group Table",children:[(0,g.jsx)(l.Z,{children:(0,g.jsx)(m.Z,{children:(0,g.jsx)(n.Z,{children:"Name"})})}),(0,g.jsx)(o.Z,{children:null==R?void 0:R.map(function(a,b){return(0,g.jsx)(m.Z,{hover:!0,children:(0,g.jsx)(n.Z,{children:(0,g.jsx)(h.Z,{onClick:function(){return X(a)},children:a})})},b)})})]})}),(0,g.jsxs)(q.Z,{fullWidth:!0,maxWidth:"sm",open:I,onClose:V,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,g.jsx)(p.Z,{id:"dialog-title",children:x?"Select New Group":"New Group"}),(0,g.jsx)(s.Z,{children:x?(0,g.jsx)(y,{currentGroup:F,excludeList:R,selectCallback:W}):(0,g.jsx)(z.Z,{placeholder:"New Group...",valueProp:L,setState:M,errorMessage:O})}),(0,g.jsxs)(r.Z,{children:[x?null:(0,g.jsx)(h.Z,{onClick:Y,children:"Submit"}),(0,g.jsx)(h.Z,{onClick:V,children:"Close"})]})]})]})}},42207:function(a,b,c){"use strict";c.d(b,{Z:function(){return y}});var d=c(47568),e=c(34051),f=c.n(e),g=c(85893),h=c(83321),i=c(72882),j=c(90629),k=c(7906),l=c(53184),m=c(53816),n=c(53252),o=c(295),p=c(50657),q=c(31425),r=c(6514),s=c(37645),t=c(67294),u=c(46291),v=c(99226),w=c(98456);function x(a){var b,c=a.selectCallback,e=void 0===c?function(){return null}:c,h=a.excludeList,p=void 0===h?[]:h,q=(0,t.useState)([]),r=q[0],s=q[1],x=(0,t.useState)(!1),y=x[0],z=x[1],A=(0,u.rt)(),B=(b=(0,d.Z)(f().mark(function a(){var b,c=arguments;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=c.length>0&& void 0!==c[0]?c[0]:null,!(e&&b)){a.next=5;break}return z(!0),a.next=5,e(b);case 5:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)});return(0,t.useEffect)(function(){var a;(a=(0,d.Z)(f().mark(function a(){var b,c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return z(!0),a.next=3,A.getResources();case 3:(b=a.sent)&&s(c=b.filter(function(a){return!p.find(function(b){return b.Name===a.Name&&b.ResType===a.ResType&&b.Variant===a.Variant})})),z(!1);case 6:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[]),(0,g.jsx)(g.Fragment,{children:y?(0,g.jsx)(v.Z,{sx:{display:"flex",justifyContent:"center"},children:(0,g.jsx)(w.Z,{})}):(null==r?void 0:r.length)?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)(i.Z,{component:j.Z,children:(0,g.jsxs)(k.Z,{sx:{minWidth:300},"aria-label":"Embedded Resource Table",children:[(0,g.jsx)(l.Z,{children:(0,g.jsxs)(m.Z,{children:[(0,g.jsx)(n.Z,{children:"Name"}),(0,g.jsx)(n.Z,{children:"Variant"}),(0,g.jsx)(n.Z,{children:"Type"})]})}),(0,g.jsx)(o.Z,{children:null==r?void 0:r.map(function(a,b){var c;return(0,g.jsxs)(m.Z,{onClick:function(){return B(a)},style:{cursor:"pointer"},hover:!0,children:[(0,g.jsx)(n.Z,{children:a.Name}),(0,g.jsx)(n.Z,{children:a.Variant}),(0,g.jsx)(n.Z,{children:(c=a.ResType).split("_").map(function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()}).join(" ")})]},b)})})]})})}):(0,g.jsx)("span",{children:"No Existing Resources!"})})}function y(a){var b,c=a.selectCallback,e=void 0===c?function(){return null}:c,v=a.userNameProp,w=void 0===v?"":v,y=a.roleNameProp,z=void 0===y?"":y,A=a.groupNameProp,B=void 0===A?"":A,C=(0,t.useState)([]),D=C[0],E=C[1],F=(0,t.useState)(!1),G=F[0],H=F[1],I=(0,u.rt)(),J=function(){H(!0)},K=function(){H(!1)},L=(b=(0,d.Z)(f().mark(function a(){var b,c=arguments;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=c.length>0&& void 0!==c[0]?c[0]:null,!(e&&b)){a.next=5;break}return a.next=4,e(b);case 4:K();case 5:case"end":return a.stop()}},a)})),function(){return b.apply(this,arguments)});return(0,t.useEffect)(function(){var a;(a=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(G){a.next=19;break}if(b=[],!w){a.next=8;break}return a.next=5,I.getUserResources(w);case 5:case 11:b=a.sent,a.next=18;break;case 8:if(!z){a.next=14;break}return a.next=11,I.getRoleResources(z);case 14:if(!B){a.next=18;break}return a.next=17,I.getGroupResources(B);case 17:b=a.sent;case 18:b&&E(b);case 19:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[G]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("strong",{style:{float:"left"},children:"Resources"}),(0,g.jsx)(h.Z,{style:{float:"right",marginBottom:"0.5em"},onClick:J,"data-testid":"addResourceTestId",children:"Add Resource"}),(0,g.jsx)(i.Z,{component:j.Z,children:(0,g.jsxs)(k.Z,{sx:{minWidth:300},"aria-label":"Admin Resource Table",children:[(0,g.jsx)(l.Z,{children:(0,g.jsxs)(m.Z,{children:[(0,g.jsx)(n.Z,{children:"Name"}),(0,g.jsx)(n.Z,{children:"Variant"}),(0,g.jsx)(n.Z,{children:"Type"})]})}),(0,g.jsx)(o.Z,{children:null==D?void 0:D.map(function(a,b){return(0,g.jsxs)(m.Z,{hover:!0,children:[(0,g.jsx)(n.Z,{children:a.Name}),(0,g.jsx)(n.Z,{children:a.Variant}),(0,g.jsx)(n.Z,{children:a.ResType})]},b)})})]})}),(0,g.jsxs)(p.Z,{fullWidth:!0,maxWidth:"sm",open:G,onClose:K,"aria-labelledby":"dialog-title","aria-describedby":"dialog-description",children:[(0,g.jsx)(s.Z,{id:"dialog-title",children:"Select new resource"}),(0,g.jsx)(r.Z,{children:(0,g.jsx)(x,{excludeList:D,selectCallback:L})}),(0,g.jsx)(q.Z,{children:(0,g.jsx)(h.Z,{onClick:K,children:"Close"})})]})]})}},57225:function(a,b,c){"use strict";c.d(b,{Z:function(){return s}});var d=c(47568),e=c(34051),f=c.n(e),g=c(85893),h=c(72882),i=c(90629),j=c(7906),k=c(53184),l=c(53816),m=c(53252),n=c(295),o=c(83321),p=c(11163),q=c(67294),r=c(46291);function s(a){var b=a.roleNameProp,c=void 0===b?"":b,e=(0,p.useRouter)(),s=(0,q.useState)([]),t=s[0],u=s[1],v=(0,r.rt)(),w=function(){var a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:"";a&&e.push("/admin/user/"+a)};return(0,q.useEffect)(function(){var a;(a=(0,d.Z)(f().mark(function a(){var b;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b=[],!c){a.next=7;break}return a.next=4,v.getRoleUsers(c);case 4:b=a.sent,a.next=10;break;case 7:return a.next=9,v.getUsers();case 9:b=a.sent;case 10:b&&u(b);case 11:case"end":return a.stop()}},a)})),function(){return a.apply(this,arguments)})()},[]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("strong",{style:{float:"left",paddingBottom:"1em"},children:"Users"}),(0,g.jsx)(h.Z,{component:i.Z,children:(0,g.jsxs)(j.Z,{sx:{minWidth:300},"aria-label":"Admin User Table",children:[(0,g.jsx)(k.Z,{children:(0,g.jsx)(l.Z,{children:(0,g.jsx)(m.Z,{children:"Name"})})}),(0,g.jsx)(n.Z,{children:null==t?void 0:t.map(function(a,b){return(0,g.jsx)(l.Z,{hover:!0,children:(0,g.jsx)(m.Z,{children:(0,g.jsx)(o.Z,{onClick:function(){return w(a)},children:a})})},b)})})]})})]})}}},function(a){a.O(0,[9562,9774,2888,179],function(){var b;return a(a.s=77902)}),_N_E=a.O()}])
//# sourceMappingURL=[roleName]-1ca31d5eb3b6d7b1.js.map