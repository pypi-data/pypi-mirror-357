"""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
Extended MCP server controllers for IPFS Kit SDK features.
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
This module provides additional controllers to expose all IPFS Kit SDK features
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
through the MCP server API, ensuring complete functionality is available.
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
"""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
import os
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
import sys
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
import logging
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
import tempfile
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
from fastapi import (
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
from fastapi.responses import StreamingResponse
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
from typing import Dict, List, Optional
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
APIRouter,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    File,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    UploadFile,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    Form,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    Query,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    Body,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
# Configure logging
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
logger = logging.getLogger(__name__)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
# Add parent directory to path for imports
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
sys.path.append(os.path.dirname(os.path.dirname(os.path.abspath(__file__))))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
# Import IPFS Kit modules
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    from ipfs_kit_py.ipfs_kit import ipfs_kit
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # from ipfs_kit_py.lassie_kit import lassie_kit # Removed F401
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    from ipfs_kit_py.migration_tools import (
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        ipfs_to_storacha,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        ipfs_to_s3,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        s3_to_ipfs,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        storacha_to_ipfs,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        s3_to_storacha,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        storacha_to_s3,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    IPFS_KIT_AVAILABLE = True
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    logger.info("Successfully imported IPFS Kit modules")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
except ImportError as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    logger.error(f"Failed to import IPFS Kit modules: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    IPFS_KIT_AVAILABLE = False
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
# Create a shared IPFS Kit instance
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def get_ipfs_kit_instance():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Get or create a shared IPFS Kit instance."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    if not hasattr(get_ipfs_kit_instance, "instance"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        # Initialize with real credentials if available
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        kit_metadata = {
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            "debug": True,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            "auto_pin": True,
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        }
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        # Try to get real credentials from environment
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        if os.environ.get("HUGGINGFACE_TOKEN"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit_metadata["huggingface_token"] = os.environ.get("HUGGINGFACE_TOKEN")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        if os.environ.get("AWS_ACCESS_KEY_ID") and os.environ.get("AWS_SECRET_ACCESS_KEY"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit_metadata["s3cfg"] = {
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                "accessKey": os.environ.get("AWS_ACCESS_KEY_ID"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                "secretKey": os.environ.get("AWS_SECRET_ACCESS_KEY"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                "endpoint": os.environ.get("AWS_ENDPOINT_URL", "https://s3.amazonaws.com"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                "region": os.environ.get("AWS_REGION", "us-east-1"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                "bucket": os.environ.get("AWS_S3_BUCKET_NAME", "ipfs-storage-demo"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            }
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        if os.environ.get("STORACHA_API_KEY"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit_metadata["storacha_token"] = os.environ.get("STORACHA_API_KEY")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit_metadata["storacha_api_url"] = os.environ.get(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                "STORACHA_API_URL", "https://up.storacha.network/bridge"
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        # Create the IPFS Kit instance
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        get_ipfs_kit_instance.instance = ipfs_kit(metadata=kit_metadata)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        logger.info("Created IPFS Kit instance with available credentials")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return get_ipfs_kit_instance.instance
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_extended_routers(api_prefix: str) -> List[APIRouter]:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    Create FastAPI routers for all IPFS Kit SDK features.
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    Args:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        api_prefix: API prefix for the endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    Returns:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        List of API routers
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers = []
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    if not IPFS_KIT_AVAILABLE:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        logger.warning("IPFS Kit modules not available, skipping extended routers")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        return routers
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # Create routers for different feature groups
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_enhanced_ipfs_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_mfs_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_dag_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_migration_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_cache_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_high_level_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    routers.append(create_advanced_storage_router(api_prefix))
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return routers
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_enhanced_ipfs_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for enhanced IPFS operations."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/ipfs/extended", tags=["Enhanced IPFS"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/ls/{cid}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_ls(cid: str, resolve_type: bool = Query(False)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List directory contents by CID."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.ipfs_ls(cid, resolve_type=resolve_type)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "entries": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing directory: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/add-directory")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_add_directory(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        recursive: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        wrap_with_directory: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Add a directory to IPFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.ipfs_add_directory(path, recursive, wrap_with_directory)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error adding directory: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/add-json")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_add_json(data: Dict = Body(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Add JSON data to IPFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cid = kit.ipfs_add_json(data)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "cid": cid}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error adding JSON: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/get-json/{cid}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_get_json(cid: str):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Get JSON data from IPFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            data = kit.ipfs_get_json(cid)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "data": data}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error getting JSON: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/name/publish")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_name_publish(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        cid: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        key: str = Form("self"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        lifetime: str = Form("24h"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        ttl: str = Form(""),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        resolve: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Publish an IPNS name."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.ipns_publish(cid, key=key, lifetime=lifetime, ttl=ttl, resolve=resolve)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error publishing name: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/name/resolve/{name}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_name_resolve(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        name: str, recursive: bool = Query(True), nocache: bool = Query(False)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Resolve an IPNS name."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.ipns_resolve(name, recursive=recursive, nocache=nocache)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "path": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error resolving name: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/key/gen")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_key_gen(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        key_name: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        key_type: str = Form("rsa"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        key_size: int = Form(2048),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Generate a new key."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.ipfs_key_gen(key_name, key_type, key_size)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error generating key: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/key/list")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def ipfs_key_list():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List all keys."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.ipfs_key_list()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "keys": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing keys: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_mfs_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for MFS (Mutable File System) operations."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/mfs", tags=["MFS"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/write")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_write(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        file: UploadFile = File(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        create: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        truncate: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        parents: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Write to a file in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Create a temporary file to store the uploaded content
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            with tempfile.NamedTemporaryFile(delete=False) as temp_file:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                content = await file.read()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_file.write(content)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_file_path = temp_file.name
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            with open(temp_file_path, "rb") as f:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                result = kit.mfs_write(path, f, create=create, truncate=truncate, parents=parents)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Clean up the temporary file
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            os.unlink(temp_file_path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error writing to MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/read/{path:path}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_read(path: str, offset: int = Query(0), count: int = Query(-1)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Read a file from MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            content = kit.mfs_read(path, offset=offset, count=count)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Define the async content generator function
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            async def content_generator():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                yield content
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

            return StreamingResponse(async_content_generator(), media_type="application/octet-stream")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error reading from MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/mkdir")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_mkdir(path: str = Form(...), parents: bool = Form(True)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Create a directory in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_mkdir(path, parents=parents)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error creating directory in MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/rm")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_rm(path: str = Form(...), recursive: bool = Form(False)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Remove a file or directory in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_rm(path, recursive=recursive)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error removing from MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/cp")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_cp(source: str = Form(...), dest: str = Form(...), parents: bool = Form(True)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Copy files in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_cp(source, dest, parents=parents)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error copying in MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/mv")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_mv(source: str = Form(...), dest: str = Form(...), parents: bool = Form(True)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Move files in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_mv(source, dest, parents=parents)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error moving in MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/ls/{path:path}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_ls(path: str, long: bool = Query(False)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List directory contents in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_ls(path, long=long)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "entries": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing MFS directory: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/stat/{path:path}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_stat(path: str):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Get file or directory status in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_stat(path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "stat": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error getting MFS stat: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/flush/{path:path}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_flush(path: str):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Flush file changes in MFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_flush(path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "cid": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error flushing MFS path: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # Enhanced MFS endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/enhanced/copy-from-fs")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_enhanced_copy_from_fs(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        local_path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        mfs_path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        recursive: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        parents: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Copy from local filesystem to MFS with enhanced features."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_enhanced.copy_from_filesystem(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                local_path, mfs_path, recursive=recursive, create_parents=parents
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error copying from filesystem to MFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/enhanced/copy-to-fs")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def mfs_enhanced_copy_to_fs(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        mfs_path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        local_path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        recursive: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        parents: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Copy from MFS to local filesystem with enhanced features."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.mfs_enhanced.copy_to_filesystem(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                mfs_path, local_path, recursive=recursive, create_parents=parents
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error copying from MFS to filesystem: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_dag_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for DAG operations."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/dag", tags=["DAG"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/put")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def dag_put(data: Dict = Body(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Store data as a DAG object."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cid = kit.dag_put(data)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "cid": cid}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error putting DAG: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/get/{cid}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def dag_get(cid: str, path: str = Query("")):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Get a DAG object."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            data = kit.dag_get(cid, path=path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "data": data}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error getting DAG: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/resolve/{cid}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def dag_resolve(cid: str, path: str = Query("")):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Resolve a path in a DAG object."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.dag_resolve(f"{cid}/{path}" if path else cid)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "cid": result["Cid"]["/"]}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error resolving DAG path: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/import")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def dag_import(file: UploadFile = File(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Import a DAG object from a file."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Create a temporary file to store the uploaded content
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            with tempfile.NamedTemporaryFile(delete=False) as temp_file:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                content = await file.read()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_file.write(content)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_file_path = temp_file.name
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.dag_import(temp_file_path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Clean up the temporary file
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            os.unlink(temp_file_path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error importing DAG: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/export")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def dag_export(cid: str = Form(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Export a DAG object."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Create a temporary file for the export
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            with tempfile.NamedTemporaryFile(delete=False) as temp_file:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_path = temp_file.name
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Export the DAG object
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit.dag_export(cid, temp_path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Read the exported data
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            with open(temp_path, "rb") as f:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                data = f.read()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Clean up the temporary file
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            os.unlink(temp_path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Define the async content generator function
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # DISABLED REDEFINITION
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                yield data
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

            return StreamingResponse(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                async_content_generator(),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                media_type="application/octet-stream",
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                headers={"Content-Disposition": f"attachment; filename={cid}.car"},
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error exporting DAG: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_migration_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for data migration between storage backends."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/migration", tags=["Migration"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/ipfs-to-storacha")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def migrate_ipfs_to_storacha(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        cid: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        space_did: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        pin_locally: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Migrate content from IPFS to Storacha."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = ipfs_to_storacha.migrate_content(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit, cid, space_did=space_did, pin_locally=pin_locally
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error migrating from IPFS to Storacha: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/ipfs-to-s3")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def migrate_ipfs_to_s3(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        cid: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        bucket: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        prefix: str = Form("ipfs/"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        pin_locally: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Migrate content from IPFS to S3."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = ipfs_to_s3.migrate_content(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit, cid, bucket=bucket, prefix=prefix, pin_locally=pin_locally
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error migrating from IPFS to S3: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/s3-to-ipfs")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def migrate_s3_to_ipfs(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        s3_key: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        bucket: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        pin_locally: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Migrate content from S3 to IPFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = s3_to_ipfs.migrate_content(kit, s3_key, bucket=bucket, pin_locally=pin_locally)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error migrating from S3 to IPFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/storacha-to-ipfs")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def migrate_storacha_to_ipfs(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        storage_id: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        space_did: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        pin_locally: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Migrate content from Storacha to IPFS."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = storacha_to_ipfs.migrate_content(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit, storage_id, space_did=space_did, pin_locally=pin_locally
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error migrating from Storacha to IPFS: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/s3-to-storacha")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def migrate_s3_to_storacha(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        s3_key: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        bucket: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        space_did: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Migrate content from S3 to Storacha."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = s3_to_storacha.migrate_content(kit, s3_key, bucket=bucket, space_did=space_did)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error migrating from S3 to Storacha: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/storacha-to-s3")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def migrate_storacha_to_s3(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        storage_id: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        space_did: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        bucket: Optional[str] = Form(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        prefix: str = Form("ipfs/"),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Migrate content from Storacha to S3."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = storacha_to_s3.migrate_content(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit, storage_id, space_did=space_did, bucket=bucket, prefix=prefix
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error migrating from Storacha to S3: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_cache_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for cache operations."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/cache", tags=["Cache"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/status")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def cache_status():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Get cache status."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cache_manager = kit.get_cache_manager()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            stats = cache_manager.get_stats()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "stats": stats}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error getting cache status: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/prefetch")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def cache_prefetch(cid: str = Form(...), recursive: bool = Form(False)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Prefetch content into cache."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cache_manager = kit.get_cache_manager()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = cache_manager.prefetch(cid, recursive=recursive)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error prefetching content: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/invalidate")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def cache_invalidate(cid: str = Form(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Invalidate content from cache."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cache_manager = kit.get_cache_manager()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = cache_manager.invalidate(cid)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error invalidating cache: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/promote")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def cache_promote(cid: str = Form(...), tier: str = Form(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Promote content to a specific cache tier."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cache_manager = kit.get_cache_manager()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = cache_manager.promote_to_tier(cid, tier)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error promoting cache content: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/demote")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def cache_demote(cid: str = Form(...), tier: str = Form(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Demote content to a specific cache tier."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cache_manager = kit.get_cache_manager()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = cache_manager.demote_to_tier(cid, tier)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error demoting cache content: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/locate/{cid}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def cache_locate(cid: str):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Locate content in cache tiers."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            cache_manager = kit.get_cache_manager()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = cache_manager.locate(cid)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "locations": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error locating content in cache: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_high_level_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for high-level operations."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/high-level", tags=["High Level API"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/store-directory")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def high_level_store_directory(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        path: str = Form(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        recursive: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        include_hidden: bool = Form(False),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        cache: bool = Form(True),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Store a directory with high-level API."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            api = kit.high_level_api
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = api.store_directory(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                path, recursive=recursive, include_hidden=include_hidden, cache=cache
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            )
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error storing directory: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/store-file")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def high_level_store_file(file: UploadFile = File(...), cache: bool = Form(True)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Store a file with high-level API."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Create a temporary file to store the uploaded content
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            with tempfile.NamedTemporaryFile(delete=False) as temp_file:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                content = await file.read()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_file.write(content)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                temp_file_path = temp_file.name
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            api = kit.high_level_api
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = api.store_file(temp_file_path, cache=cache)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            # Clean up the temporary file
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            os.unlink(temp_file_path)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error storing file: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/retrieve-to-filesystem")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def high_level_retrieve_to_filesystem(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        cid: str = Form(...), output_dir: str = Form(...), create_dir: bool = Form(True)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Retrieve content to filesystem with high-level API."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            api = kit.high_level_api
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = api.retrieve_to_filesystem(cid, output_dir, create_dir=create_dir)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error retrieving to filesystem: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/store-object")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def high_level_store_object(data: Dict = Body(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Store an object with high-level API."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            api = kit.high_level_api
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = api.store_object(data)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error storing object: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/retrieve-object/{cid}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def high_level_retrieve_object(cid: str):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Retrieve an object with high-level API."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            api = kit.high_level_api
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = api.retrieve_object(cid)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "data": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error retrieving object: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
def create_advanced_storage_router(api_prefix: str) -> APIRouter:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    """Create router for advanced storage operations."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    router = APIRouter(prefix=f"{api_prefix}/storage/advanced", tags=["Advanced Storage"])
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # Storacha advanced endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/storacha/list")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def storacha_list_blobs(cursor: Optional[str] = Query(None), size: int = Query(100)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List blobs stored in Storacha."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            if not hasattr(kit, "storacha_storage"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                from storacha_storage import StorachaStorage
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit.storacha_storage = StorachaStorage()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.storacha_storage.list_blobs(cursor=cursor, size=size)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return result
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing Storacha blobs: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/storacha/get/{digest}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def storacha_get_blob(digest: str):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Get blob info from Storacha."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            if not hasattr(kit, "storacha_storage"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                from storacha_storage import StorachaStorage
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit.storacha_storage = StorachaStorage()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.storacha_storage.get_blob(digest)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return result
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error getting Storacha blob: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/storacha/remove")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def storacha_remove_blob(digest: str = Form(...)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Remove a blob from Storacha."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            if not hasattr(kit, "storacha_storage"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                from storacha_storage import StorachaStorage
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                kit.storacha_storage = StorachaStorage()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.storacha_storage.remove_blob(digest)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return result
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error removing Storacha blob: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # S3 advanced endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/s3/create-bucket")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def s3_create_bucket(bucket_name: str = Form(...), region: str = Form("us-east-1")):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Create a new S3 bucket."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.s3_kit("mk_bucket", bucket_name=bucket_name, region=region)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error creating S3 bucket: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/s3/list-buckets")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def s3_list_buckets():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List all S3 buckets."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.s3_kit("ls_buckets")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "buckets": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing S3 buckets: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/s3/list-objects")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def s3_list_objects(
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        bucket: str = Query(...),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        prefix: Optional[str] = Query(None),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        max_keys: int = Query(1000),
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    ):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List objects in an S3 bucket."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.s3_kit("ls_dir", dir=prefix or "", bucket_name=bucket, max_keys=max_keys)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "objects": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing S3 objects: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # HuggingFace advanced endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/huggingface/list-repos")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def huggingface_list_repos():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """List HuggingFace repositories."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.huggingface_kit.list_repos()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "repositories": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error listing HuggingFace repositories: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/huggingface/create-repo")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def huggingface_create_repo(repo_name: str = Form(...), private: bool = Form(True)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Create a new HuggingFace repository."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            result = kit.huggingface_kit.create_repo(repo_name, private=private)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": True, "result": result}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error creating HuggingFace repository: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # Filecoin advanced endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.get("/filecoin/status")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def filecoin_status():
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Get Filecoin status."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            if hasattr(kit, "lotus_kit"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                result = kit.lotus_kit.get_status()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            else:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                # Import directly
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                from filecoin_storage import FilecoinStorage
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                storage = FilecoinStorage()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                result = storage.status()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return result
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error getting Filecoin status: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    # Lassie advanced endpoints
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    @router.post("/lassie/fetch")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    async def lassie_fetch(cid: str = Form(...), timeout: int = Form(60)):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        """Fetch content with Lassie from the network."""
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        try:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            kit = get_ipfs_kit_instance()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            if hasattr(kit, "lassie_kit"):
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                result = kit.lassie_kit.fetch(cid, timeout=timeout)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            else:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                # Import directly
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                from lassie_storage import LassieStorage
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                storage = LassieStorage()
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
                result = storage.to_ipfs(cid, timeout=timeout)
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return result
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
        except Exception as e:
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            logger.error(f"Error fetching with Lassie: {e}")
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
            return {"success": False, "error": str(e)}
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"

sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
    return router
sync def async_content_generator():
        """Generate content chunks asynchronously."""
        try:
            async for chunk in async_generator:
                yield chunk
        except Exception as e:
            logger.error(f"Error generating content: {e}")
            yield b"Error generating content"
