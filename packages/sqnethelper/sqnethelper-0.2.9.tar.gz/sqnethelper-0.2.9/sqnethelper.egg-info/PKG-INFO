Metadata-Version: 2.4
Name: sqnethelper
Version: 0.2.9
Summary: A command line tool to manage Alibaba Cloud ECS instances
Author: weisq
Author-email: weishqdev@gmail.com
Classifier: Programming Language :: Python :: 3
Classifier: Operating System :: OS Independent
Requires-Python: >=3.6
Description-Content-Type: text/markdown
Requires-Dist: aliyun-python-sdk-core
Requires-Dist: aliyun-python-sdk-ecs
Requires-Dist: aliyun-python-sdk-vpc
Requires-Dist: bcrypt
Requires-Dist: cffi
Requires-Dist: click
Requires-Dist: cryptography
Requires-Dist: jmespath
Requires-Dist: paramiko
Requires-Dist: pycparser
Requires-Dist: PyNaCl
Requires-Dist: websockets
Dynamic: author
Dynamic: author-email
Dynamic: classifier
Dynamic: description
Dynamic: description-content-type
Dynamic: requires-dist
Dynamic: requires-python
Dynamic: summary

# sqnethelper - é˜¿é‡Œäº‘ECSåŠ©æ‰‹å·¥å…·

è¿™æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†é˜¿é‡Œäº‘ECSå®ä¾‹çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æ‚¨å¯ä»¥ä½¿ç”¨æ­¤å·¥å…·å¿«é€Ÿåˆ›å»ºã€ç®¡ç†ECSå®ä¾‹ï¼Œè‡ªåŠ¨å®‰è£…VPNåè®®ï¼Œå¹¶ç”ŸæˆSingBoxå®¢æˆ·ç«¯é…ç½®ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- ğŸš€ **ä¸€é”®åˆ›å»ºECSå®ä¾‹**ï¼šè‡ªåŠ¨åˆ›å»ºã€é…ç½®ç½‘ç»œå’Œå®‰å…¨ç»„
- ğŸ”’ **å¤šåè®®VPNæ”¯æŒ**ï¼šæ”¯æŒRealityã€VMessã€Shadowsocksç­‰åè®®
- ğŸ“± **SingBoxé…ç½®ç”Ÿæˆ**ï¼šè‡ªåŠ¨ç”Ÿæˆå®Œæ•´çš„SingBoxå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶
- â° **è‡ªåŠ¨é‡Šæ”¾ç®¡ç†**ï¼šè®¾ç½®å®ä¾‹è‡ªåŠ¨é”€æ¯æ—¶é—´ï¼Œé¿å…å¿˜è®°å…³æœº
- ğŸ”§ **SSHå¯†é’¥ç®¡ç†**ï¼šè‡ªåŠ¨åˆ›å»ºå’Œç®¡ç†SSHå¯†é’¥å¯¹

## ğŸ“¦ å®‰è£…æ–¹å¼

### æ–¹å¼ä¸€ï¼šä½¿ç”¨pipxå®‰è£…ï¼ˆæ¨è - macOSï¼‰

pipxæ˜¯å®‰è£…Pythonå‘½ä»¤è¡Œå·¥å…·çš„æœ€ä½³æ–¹å¼ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªå·¥å…·åˆ›å»ºç‹¬ç«‹çš„è™šæ‹Ÿç¯å¢ƒã€‚

#### 1. å®‰è£…pipx

```bash
# ä½¿ç”¨Homebrewå®‰è£…pipxï¼ˆæ¨èï¼‰
brew install pipx

# æˆ–è€…ä½¿ç”¨pipå®‰è£…
python3 -m pip install --user pipx
python3 -m pipx ensurepath
```

#### 2. ä½¿ç”¨pipxå®‰è£…sqnethelper

```bash
pipx install sqnethelper
```

#### 3. éªŒè¯å®‰è£…

```bash
sqnethelper --version
```

#### 4. pipxç®¡ç†å‘½ä»¤

```bash
# å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
pipx upgrade sqnethelper

# å¼ºåˆ¶é‡æ–°å®‰è£…
pipx install --force sqnethelper

# å¸è½½
pipx uninstall sqnethelper

# æŸ¥çœ‹å·²å®‰è£…çš„åŒ…
pipx list
```

### æ–¹å¼äºŒï¼šä½¿ç”¨pipå®‰è£…

#### åœ¨è™šæ‹Ÿç¯å¢ƒä¸­å®‰è£…ï¼ˆæ¨èï¼‰

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv sqnethelper-env
source sqnethelper-env/bin/activate

# å®‰è£…sqnethelper
pip install sqnethelper
```

#### ç”¨æˆ·çº§å®‰è£…

```bash
pip install --user sqnethelper
```

### æ–¹å¼ä¸‰ï¼šä»æºç å®‰è£…

```bash
git clone https://github.com/weishq/sqnethelper.git
cd sqnethelper
pip install -e .
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. è®¾ç½®é˜¿é‡Œäº‘å‡­è¯

é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½®é˜¿é‡Œäº‘Access Keyå’ŒSecretï¼š

```bash
sqnethelper setup
```

æŒ‰æç¤ºè¾“å…¥æ‚¨çš„é˜¿é‡Œäº‘Access Keyå’ŒSecretã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰ï¼Œè¯·è®¿é—® [é˜¿é‡Œäº‘æ§åˆ¶å°](https://ram.console.aliyun.com/manage/ak) åˆ›å»ºã€‚

### 2. ä¸€é”®åˆ›å»ºVPNæœåŠ¡å™¨

```bash
sqnethelper create
```

è¿™ä¸ªå‘½ä»¤ä¼šï¼š
- è‡ªåŠ¨åˆ›å»ºECSå®ä¾‹ï¼ˆé»˜è®¤1å°æ—¶åè‡ªåŠ¨é”€æ¯ï¼‰
- é…ç½®å®‰å…¨ç»„å’Œç½‘ç»œ
- å®‰è£…Xray VPNåè®®
- ç”ŸæˆSingBoxå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶

### 3. æŸ¥çœ‹ç°æœ‰å®ä¾‹

```bash
sqnethelper list
```

## ğŸ“‹ å‘½ä»¤å‚è€ƒ

### åŸºç¡€å‘½ä»¤

```bash
# æŸ¥çœ‹å¸®åŠ©
sqnethelper --help

# æŸ¥çœ‹ç‰ˆæœ¬
sqnethelper --version

# è®¾ç½®é˜¿é‡Œäº‘å‡­è¯
sqnethelper setup

# æŸ¥çœ‹/ä¿®æ”¹é…ç½®
sqnethelper config
sqnethelper config --region  # ä¿®æ”¹åŒºåŸŸè®¾ç½®
```

### å®ä¾‹ç®¡ç†

```bash
# åˆ›å»ºæ–°å®ä¾‹ï¼ˆè‡ªåŠ¨å®‰è£…VPNï¼‰
sqnethelper create

# åˆ—å‡ºæ‰€æœ‰å®ä¾‹
sqnethelper list

# ä¿®æ”¹è‡ªåŠ¨é‡Šæ”¾æ—¶é—´
sqnethelper autodel

# åˆ é™¤å®ä¾‹
sqnethelper delete
```

### VPNç®¡ç†

```bash
# ä¸ºç°æœ‰å®ä¾‹æ·»åŠ VPNåè®®
sqnethelper addvpn
```

æ”¯æŒçš„VPNåè®®ï¼š
- **Reality**: æœ€æ–°çš„æŠ—å®¡æŸ¥åè®®
- **Xray TCP**: è½»é‡çº§TCPåè®®  
- **Xray Reality**: Realityåè®®çš„Xrayå®ç°
- **SingBox SS**: Shadowsocksåè®®
- **SingBox Reality**: Realityåè®®çš„SingBoxå®ç°

## ğŸ“± SingBoxå®¢æˆ·ç«¯é…ç½®

æ¯æ¬¡å®‰è£…VPNåï¼Œsqnethelperä¼šè‡ªåŠ¨ï¼š

1. æ˜¾ç¤ºåè®®é…ç½®ä¿¡æ¯
2. ç”ŸæˆSingBoxå®¢æˆ·ç«¯é…ç½®
3. åœ¨å·¥ä½œç›®å½•ä¿å­˜å®Œæ•´é…ç½®æ–‡ä»¶ï¼ˆæ ¼å¼ï¼š`sing-box_config_{protocol}_{port}_{timestamp}.json`ï¼‰

### ä½¿ç”¨é…ç½®æ–‡ä»¶

1. å°†ç”Ÿæˆçš„JSONé…ç½®æ–‡ä»¶å¯¼å…¥SingBoxå®¢æˆ·ç«¯
2. æˆ–è€…å¤åˆ¶outboundséƒ¨åˆ†åˆ°æ‚¨ç°æœ‰çš„SingBoxé…ç½®ä¸­

### é…ç½®æ–‡ä»¶ç‰¹ç‚¹

- ğŸŒ æ™ºèƒ½åˆ†æµï¼šä¸­å›½ç½‘ç«™ç›´è¿ï¼Œå›½å¤–ç½‘ç«™ä»£ç†
- ğŸ”’ DNSå®‰å…¨ï¼šå›½å†…å¤–DNSåˆ†ç¦»
- âš¡ æ€§èƒ½ä¼˜åŒ–ï¼šå¯ç”¨ç¼“å­˜å’Œè¿æ¥å¤ç”¨
- ğŸ›¡ï¸ éšç§ä¿æŠ¤ï¼šé˜²DNSæ³„éœ²

## âš ï¸ æ³¨æ„äº‹é¡¹

### å®‰å…¨å»ºè®®

- å®šæœŸæ›´æ¢Access Key
- ä½¿ç”¨RAMå­è´¦å·ï¼Œä¸è¦ä½¿ç”¨ä¸»è´¦å·
- åŠæ—¶åˆ é™¤ä¸ç”¨çš„å®ä¾‹ï¼Œé¿å…äº§ç”Ÿè´¹ç”¨

### æˆæœ¬æ§åˆ¶

- åˆ›å»ºçš„å®ä¾‹é»˜è®¤1å°æ—¶åè‡ªåŠ¨é”€æ¯
- å¯ä½¿ç”¨`sqnethelper autodel`å‘½ä»¤ä¿®æ”¹è‡ªåŠ¨é”€æ¯æ—¶é—´
- å»ºè®®è®¾ç½®é˜¿é‡Œäº‘è´¦å•æé†’

### ç½‘ç»œè¯´æ˜

- é»˜è®¤åˆ›å»ºçš„å®‰å…¨ç»„åªå¼€æ”¾å¿…è¦ç«¯å£
- è‡ªåŠ¨é…ç½®é˜²ç«å¢™è§„åˆ™
- æ”¯æŒå¤šç§VPNåè®®å’Œç«¯å£

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰é…ç½®

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.sqnethelper/config.json`

ä¸»è¦é…ç½®é¡¹ï¼š
```json
{
  "access_key": "æ‚¨çš„AccessKey",
  "access_secret": "æ‚¨çš„AccessSecret", 
  "region": "åœ°åŸŸID",
  "instance_type": "å®ä¾‹è§„æ ¼",
  "instance_login_password": "ç™»å½•å¯†ç ",
  "xray_tcp_port": 3000,
  "xray_reality_port": 443,
  "singbox_ss_port": 8080,
  "singbox_reality_port": 443
}
```

### VPNç«¯å£é…ç½®

å¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­è‡ªå®šä¹‰å„åè®®çš„é»˜è®¤ç«¯å£ï¼Œæˆ–åœ¨å®‰è£…æ—¶æ‰‹åŠ¨æŒ‡å®šç«¯å£ã€‚

## ğŸ†˜ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: æç¤º"externally-managed-environment"é”™è¯¯ï¼Ÿ**
A: è¿™æ˜¯Pythonç¯å¢ƒä¿æŠ¤æœºåˆ¶ï¼Œå»ºè®®ä½¿ç”¨pipxå®‰è£…ï¼š`pipx install sqnethelper`

**Q: æ— æ³•è¿æ¥é˜¿é‡Œäº‘APIï¼Ÿ**
A: æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒAccess Keyæ˜¯å¦æ­£ç¡®ï¼Œç¡®è®¤å·²å¼€é€šECSæœåŠ¡æƒé™

**Q: VPNå®‰è£…å¤±è´¥ï¼Ÿ**
A: æ£€æŸ¥å®ä¾‹çŠ¶æ€æ˜¯å¦ä¸ºRunningï¼Œå®‰å…¨ç»„è§„åˆ™æ˜¯å¦æ­£ç¡®é…ç½®

**Q: SingBoxé…ç½®æ— æ³•è¿æ¥ï¼Ÿ**
A: ç¡®è®¤æœåŠ¡å™¨IPã€ç«¯å£ã€åè®®å‚æ•°æ˜¯å¦æ­£ç¡®ï¼Œæ£€æŸ¥æœ¬åœ°ç½‘ç»œå’Œé˜²ç«å¢™è®¾ç½®

### æ—¥å¿—è°ƒè¯•

ä½¿ç”¨`--verbose`å‚æ•°æŸ¥çœ‹è¯¦ç»†æ—¥å¿—ï¼š

```bash
sqnethelper create --verbose
sqnethelper list --verbose
