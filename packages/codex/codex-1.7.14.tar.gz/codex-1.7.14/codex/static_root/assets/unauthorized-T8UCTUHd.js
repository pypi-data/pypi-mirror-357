import{g as R,p as F,u as N,a as o,n as P,d as A,K as z,b as r,aO as ne,aP as ke,aR as we,c as X,f as pe,aT as se,j as E,_ as L,D as $,E as G,G as y,x as m,H as D,v as c,N as Ve,P as Se,s as g,e as Z,r as Ce,bq as Le,t as ee,br as xe,bs as Be,m as M,F as oe,B as ie,k as Pe,C as Ae,J as Te,w as V,Y as q,y as Ie,bt as Ee,q as $e,ab as De,bm as Me,L as Re,W as Fe,z as Ne,a6 as Ue,bu as ze,am as We}from"./main-Dl2Lrwga.js";import{d as le,C as J,V as Oe}from"./VDialog-BScRe1ug.js";import{a as He}from"./change-password-dialog-DQ_0TaFN.js";import{S as Ke,V as qe}from"./VForm-B__yH-Y4.js";import{d as re,u as je,h as te,k as ae,l as Ge,m as Je,f as Ye,c as j}from"./VSelectionControl-CjjwyQ-Y.js";import{d as Y,c as de,z as Qe,y as Xe,i as Ze,j as et,x as tt,A as at,l as B,D as nt,k as ue,L as st,E as ce,o as me,F as ot,q as fe,V as it}from"./forwardRefs-DkWUbz_i.js";import{u as lt}from"./ssrBoot-CYaxTeZo.js";const rt=F({text:String,...z(),...Y()},"VToolbarTitle"),dt=R()({name:"VToolbarTitle",props:rt(),setup(e,n){let{slots:t}=n;return N(()=>{const a=!!(t.default||t.text||e.text);return o(e.tag,{class:A(["v-toolbar-title",e.class]),style:P(e.style)},{default:()=>{var s;return[a&&r("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(s=t.default)==null?void 0:s.call(t)])]}})}),{}}}),ut=[null,"prominent","default","comfortable","compact"],ct=F({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>ut.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...at(),...z(),...tt(),...et(),...Y({tag:"header"}),...se()},"VToolbar"),mt=R()({name:"VToolbar",props:ct(),setup(e,n){var x;let{slots:t}=n;const{backgroundColorClasses:a,backgroundColorStyles:s}=de(()=>e.color),{borderClasses:l}=Qe(e),{elevationClasses:d}=Xe(e),{roundedClasses:u}=Ze(e),{themeClasses:i}=ne(e),{rtlClasses:_}=ke(),f=we(!!(e.extended||(x=t.extension)!=null&&x.call(t))),k=X(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),S=X(()=>f.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return pe({VBtn:{variant:"text"}}),N(()=>{var h;const T=!!(e.title||t.title),w=!!(t.image||e.image),C=(h=t.extension)==null?void 0:h.call(t);return f.value=!!(e.extended||C),o(e.tag,{class:A(["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},a.value,l.value,d.value,u.value,i.value,_.value,e.class]),style:P([s.value,e.style])},{default:()=>[w&&r("div",{key:"image",class:"v-toolbar__image"},[t.image?o(B,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):o(le,{key:"image-img",cover:!0,src:e.image},null)]),o(B,{defaults:{VTabs:{height:E(k.value)}}},{default:()=>{var v,b,U;return[r("div",{class:"v-toolbar__content",style:{height:E(k.value)}},[t.prepend&&r("div",{class:"v-toolbar__prepend"},[(v=t.prepend)==null?void 0:v.call(t)]),T&&o(dt,{key:"title",text:e.title},{text:t.title}),(b=t.default)==null?void 0:b.call(t),t.append&&r("div",{class:"v-toolbar__append"},[(U=t.append)==null?void 0:U.call(t)])])]}}),o(B,{defaults:{VTabs:{height:E(S.value)}}},{default:()=>[o(re,null,{default:()=>[f.value&&r("div",{class:"v-toolbar__extension",style:{height:E(S.value)}},[C])]})]})]})}),{contentHeight:k,extensionHeight:S}}}),ft={name:"AppBanner",computed:{...G(y,["isBanner"]),...$(y,{banner:e=>e.adminFlags.bannerText})}};function gt(e,n,t,a,s,l){return e.isBanner?(c(),m(mt,{key:0,id:"banner",height:"36",density:"compact",flat:"",title:e.banner},null,8,["title"])):D("",!0)}const ht=L(ft,[["render",gt],["__scopeId","data-v-76681126"]]),vt={name:"AdminBrowserLink",components:{CodexListItem:J},data(){return{mdiBookshelf:Se}},computed:{...G(Ve,["lastRoute"])}};function bt(e,n,t,a,s,l){const d=g("CodexListItem");return c(),m(d,{to:e.lastRoute,"prepend-icon":s.mdiBookshelf,title:"Browser"},null,8,["to","prepend-icon"])}const yt=L(vt,[["render",bt]]),_t=F({indeterminate:Boolean,inset:Boolean,flat:Boolean,loading:{type:[Boolean,String],default:!1},...Je(),...Ge()},"VSwitch"),kt=R()({name:"VSwitch",inheritAttrs:!1,props:_t(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:indeterminate":e=>!0},setup(e,n){let{attrs:t,slots:a}=n;const s=Z(e,"indeterminate"),l=Z(e,"modelValue"),{loaderClasses:d}=nt(e),{isFocused:u,focus:i,blur:_}=je(e),f=Ce(),k=Le&&window.matchMedia("(forced-colors: active)").matches,S=ee(()=>typeof e.loading=="string"&&e.loading!==""?e.loading:e.color),x=xe(),T=ee(()=>e.id||`switch-${x}`);function w(){s.value&&(s.value=!1)}function C(h){var v,b;h.stopPropagation(),h.preventDefault(),(b=(v=f.value)==null?void 0:v.input)==null||b.click()}return N(()=>{const[h,v]=Be(t),b=te.filterProps(e),U=ae.filterProps(e);return o(te,M({class:["v-switch",{"v-switch--flat":e.flat},{"v-switch--inset":e.inset},{"v-switch--indeterminate":s.value},d.value,e.class]},h,b,{modelValue:l.value,"onUpdate:modelValue":W=>l.value=W,id:T.value,focused:u.value,style:e.style}),{...a,default:W=>{let{id:ge,messagesId:he,isDisabled:ve,isReadonly:be,isValid:Q}=W;const O={model:l,isValid:Q};return o(ae,M({ref:f},U,{modelValue:l.value,"onUpdate:modelValue":[I=>l.value=I,w],id:ge.value,"aria-describedby":he.value,type:"checkbox","aria-checked":s.value?"mixed":void 0,disabled:ve.value,readonly:be.value,onFocus:i,onBlur:_},v),{...a,default:I=>{let{backgroundColorClasses:H,backgroundColorStyles:p}=I;return r("div",{class:A(["v-switch__track",k?void 0:H.value]),style:P(p.value),onClick:C},[a["track-true"]&&r("div",{key:"prepend",class:"v-switch__track-true"},[a["track-true"](O)]),a["track-false"]&&r("div",{key:"append",class:"v-switch__track-false"},[a["track-false"](O)])])},input:I=>{let{inputNode:H,icon:p,backgroundColorClasses:ye,backgroundColorStyles:_e}=I;return r(oe,null,[H,r("div",{class:A(["v-switch__thumb",{"v-switch__thumb--filled":p||e.loading},e.inset||k?void 0:ye.value]),style:P(e.inset?void 0:_e.value)},[a.thumb?o(B,{defaults:{VIcon:{icon:p,size:"x-small"}}},{default:()=>[a.thumb({...O,icon:p})]}):o(Ye,null,{default:()=>[e.loading?o(st,{name:"v-switch",active:!0,color:Q.value===!1?void 0:S.value},{default:K=>a.loader?a.loader(K):o(ce,{active:K.isActive,color:K.color,indeterminate:!0,size:"16",width:"2"},null)}):p&&o(ue,{key:String(p),icon:p,size:"x-small"},null)]})])])}})}})}),{}}}),wt={name:"AuthLoginDialog",components:{SubmitFooter:Ke,CodexListItem:J},data(){return{rules:{username:[e=>!!e||"Username is required"],password:[e=>e?this.registerMode&&e.length<this.MIN_PASSWORD_LEN?`Password must be ${this.MIN_PASSWORD_LEN} characters long`:!0:"Password is required"],passwordConfirm:[e=>e===this.credentials.password||"Passwords must match"]},formModel:{},credentials:{username:"",password:"",passwordConfirm:""},submitButtonEnabled:!1,registerMode:!1,mdiLogin:Te}},computed:{...$(Ae,{formErrors:e=>e.form.errors,formSuccess:e=>e.form.success}),...$(y,{adminFlags:e=>e.adminFlags,MIN_PASSWORD_LEN:e=>e.MIN_PASSWORD_LEN}),...Pe(y,["showLoginDialog"]),submitButtonLabel(){return this.registerMode?"Register":"Login"},loginLabel(){let e="Login";return this.adminFlags.registration&&(e+=" or Register"),e}},watch:{showLoginDialog(e){e&&(this.loadAdminFlags(),this.$refs.form&&this.$refs.form.reset())},credentials:{handler(){const e=this.$refs.form;e?e.validate().then(({valid:n})=>(this.submitButtonEnabled=n,this.submitButtonEnabled)).catch(console.error):this.submitButtonEnabled=!1},deep:!0}},mounted(){globalThis.addEventListener("keyup",this._keyUpListener)},beforeUnmount(){globalThis.removeEventListener("keyup",this._keyUpListener)},methods:{...ie(y,["loadAdminFlags","login","register"]),doAuth(e){return this[e](this.credentials).then(()=>(this.showLoginDialog=this.formErrors&&this.formErrors.length>0,this.showLoginDialog)).catch(console.error)},submit(){this.$refs.form.validate().then(({valid:n})=>{if(!n)return;const t=this.registerMode?"register":"login";return this.doAuth(t)}).catch(console.error)},_keyUpListener(e){e.stopImmediatePropagation()}}};function pt(e,n,t,a,s,l){const d=g("CodexListItem"),u=g("SubmitFooter");return c(),m(Oe,{modelValue:e.showLoginDialog,"onUpdate:modelValue":n[7]||(n[7]=i=>e.showLoginDialog=i),origin:"center-top",transition:"slide-y-transition","max-width":"20em"},{activator:V(({props:i})=>[o(d,M(i,{"prepend-icon":s.mdiLogin,title:l.loginLabel}),null,16,["prepend-icon","title"])]),default:V(()=>[o(qe,{id:"authDialog",ref:"form"},{default:V(()=>[o(j,{modelValue:s.credentials.username,"onUpdate:modelValue":n[0]||(n[0]=i=>s.credentials.username=i),autocomplete:"username",label:"Username",rules:s.rules.username,clearable:"",autofocus:"",onKeydown:n[1]||(n[1]=q(i=>e.$refs.password.focus(),["enter"]))},null,8,["modelValue","rules"]),o(j,{ref:"password",modelValue:s.credentials.password,"onUpdate:modelValue":n[2]||(n[2]=i=>s.credentials.password=i),autocomplete:s.registerMode?"new-password":"current-password",label:"Password",rules:s.rules.password,clearable:"",type:"password",onKeydown:n[3]||(n[3]=q(i=>{s.registerMode?e.$refs.passwordConfirm.focus():l.submit()},["enter"]))},null,8,["modelValue","autocomplete","rules"]),o(re,null,{default:V(()=>[s.registerMode?(c(),m(j,{key:0,ref:"passwordConfirm",modelValue:s.credentials.passwordConfirm,"onUpdate:modelValue":n[4]||(n[4]=i=>s.credentials.passwordConfirm=i),autocomplete:"new-password",label:"Confirm Password",rules:s.rules.passwordConfirm,clearable:"",type:"password",onKeydown:q(l.submit,["enter"])},null,8,["modelValue","rules","onKeydown"])):D("",!0)]),_:1}),e.adminFlags.registration?(c(),m(kt,{key:0,modelValue:s.registerMode,"onUpdate:modelValue":n[5]||(n[5]=i=>s.registerMode=i),label:"Register"},{default:V(()=>n[8]||(n[8]=[Ie(" Register ")])),_:1,__:[8]},8,["modelValue"])):D("",!0),o(u,{verb:s.registerMode?"Register":"Login",table:"",disabled:!s.submitButtonEnabled,onSubmit:l.submit,onCancel:n[6]||(n[6]=i=>e.showLoginDialog=!1)},null,8,["verb","disabled","onSubmit"])]),_:1},512)]),_:1},8,["modelValue"])}const Vt=L(wt,[["render",pt],["__scopeId","data-v-f5e28bf6"]]),St={name:"AuthMenu",components:{AuthLoginDialog:Vt,ChangePasswordDialog:He,CodexListItem:J},props:{showChangePassword:{type:Boolean,default:!0}},data(){return{mdiLogout:Ee}},computed:{...$(y,{user:e=>e.user}),logoutTitle(){return`Logout ${this.user.username}`}},methods:{...ie(y,["logout"])}},Ct={key:0};function Lt(e,n,t,a,s,l){const d=g("CodexListItem"),u=g("ChangePasswordDialog"),i=g("AuthLoginDialog");return e.user?(c(),$e("div",Ct,[o(d,{"prepend-icon":s.mdiLogout,title:l.logoutTitle,onClick:De(e.logout,["stop"])},null,8,["prepend-icon","title","onClick"]),t.showChangePassword?(c(),m(u,{key:0,user:e.user},null,8,["user"])):D("",!0)])):(c(),m(i,{key:1}))}const xt=L(St,[["render",Lt]]),Bt={name:"PlaceholderLoading",props:{indeterminate:{type:Boolean,default:!0}}};function Pt(e,n,t,a,s,l){return c(),m(ce,M({"aria-label":"loading",class:"codexProgressCircular",indeterminate:t.indeterminate},e.$attrs),null,16,["indeterminate"])}const At=L(Bt,[["render",Pt],["__scopeId","data-v-7bb4cf22"]]),Tt=F({actionText:String,bgColor:String,color:String,icon:Re,image:String,justify:{type:String,default:"center"},headline:String,title:String,text:String,textWidth:{type:[Number,String],default:500},href:String,to:String,...z(),...fe(),...ot({size:void 0}),...se()},"VEmptyState"),It=R()({name:"VEmptyState",props:Tt(),emits:{"click:action":e=>!0},setup(e,n){let{emit:t,slots:a}=n;const{themeClasses:s}=ne(e),{backgroundColorClasses:l,backgroundColorStyles:d}=de(()=>e.bgColor),{dimensionStyles:u}=me(e),{displayClasses:i}=Me();function _(f){t("click:action",f)}return N(()=>{var C,h,v;const f=!!(a.actions||e.actionText),k=!!(a.headline||e.headline),S=!!(a.title||e.title),x=!!(a.text||e.text),T=!!(a.media||e.image||e.icon),w=e.size||(e.image?200:96);return r("div",{class:A(["v-empty-state",{[`v-empty-state--${e.justify}`]:!0},s.value,l.value,i.value,e.class]),style:P([d.value,u.value,e.style])},[T&&r("div",{key:"media",class:"v-empty-state__media"},[a.media?o(B,{key:"media-defaults",defaults:{VImg:{src:e.image,height:w},VIcon:{size:w,icon:e.icon}}},{default:()=>[a.media()]}):r(oe,null,[e.image?o(le,{key:"image",src:e.image,height:w},null):e.icon?o(ue,{key:"icon",color:e.color,size:w,icon:e.icon},null):void 0])]),k&&r("div",{key:"headline",class:"v-empty-state__headline"},[((C=a.headline)==null?void 0:C.call(a))??e.headline]),S&&r("div",{key:"title",class:"v-empty-state__title"},[((h=a.title)==null?void 0:h.call(a))??e.title]),x&&r("div",{key:"text",class:"v-empty-state__text",style:{maxWidth:E(e.textWidth)}},[((v=a.text)==null?void 0:v.call(a))??e.text]),a.default&&r("div",{key:"content",class:"v-empty-state__content"},[a.default()]),f&&r("div",{key:"actions",class:"v-empty-state__actions"},[o(B,{defaults:{VBtn:{class:"v-empty-state__action-btn",color:e.color??"surface-variant",href:e.href,text:e.actionText,to:e.to}}},{default:()=>{var b;return[((b=a.actions)==null?void 0:b.call(a,{props:{onClick:_}}))??o(it,{onClick:_},null)]}})])])}),{}}}),Et={name:"EmptyState"};function $t(e,n,t,a,s,l){return c(),m(It,{class:"empty"},Fe({_:2},[Ne(e.$slots,(d,u)=>({name:u,fn:V(i=>[Ue(e.$slots,u,M({props:d},i),void 0,!0)])}))]),1024)}const Dt=L(Et,[["render",$t],["__scopeId","data-v-c7e33c8c"]]),Mt=F({scrollable:Boolean,...z(),...fe(),...Y({tag:"main"})},"VMain"),Rt=R()({name:"VMain",props:Mt(),setup(e,n){let{slots:t}=n;const{dimensionStyles:a}=me(e),{mainStyles:s}=ze(),{ssrBootStyles:l}=lt();return N(()=>o(e.tag,{class:A(["v-main",{"v-main--scrollable":e.scrollable},e.class]),style:P([s.value,l.value,a.value,e.style])},{default:()=>{var d,u;return[e.scrollable?r("div",{class:"v-main__scroller"},[(d=t.default)==null?void 0:d.call(t)]):(u=t.default)==null?void 0:u.call(t)]}})),{}}}),Ft={name:"UnauthorizedEmptyState",components:{AppBanner:ht,AdminBrowserLink:yt,AuthMenu:xt,PlaceholderLoading:At,EmptyState:Dt},props:{admin:{type:Boolean,default:!1}},data(){return{mdiLockOutline:We}},computed:{...G(y,["isAuthChecked","isAuthorized","isUserAdmin"]),...$(y,{showAdminBrowserLink(e){var n,t,a;return((a=(t=(n=this.$router.currentRoute)==null?void 0:n.value)==null?void 0:t.name)==null?void 0:a.startsWith("admin"))&&e.adminFlags.nonUsers},text(e){return e.adminFlags.registration?"":"Registration is disabled"}})}},Nt={class:"login"};function Ut(e,n,t,a,s,l){const d=g("AppBanner"),u=g("AdminBrowserLink"),i=g("AuthMenu"),_=g("EmptyState"),f=g("PlaceholderLoading");return c(),m(Rt,{id:"unauthorized"},{default:V(()=>[o(d),e.isAuthChecked?(c(),m(_,{key:0,class:"empty",headline:"Unauthorized",text:e.text,icon:s.mdiLockOutline},{default:V(()=>[r("div",Nt,[e.showAdminBrowserLink?(c(),m(u,{key:0})):D("",!0),o(i,{"show-change-password":!1})])]),_:1},8,["text","icon"])):(c(),m(f,{key:1,id:"unauthorizedPlaceholder"}))]),_:1})}const Gt=L(Ft,[["render",Ut],["__scopeId","data-v-347bd693"]]);export{ht as A,Dt as E,At as P,Gt as U,mt as V,dt as a,yt as b,Rt as c,xt as d};
