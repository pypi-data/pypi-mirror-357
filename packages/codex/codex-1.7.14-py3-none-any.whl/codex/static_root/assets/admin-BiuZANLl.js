import{g as L,p as U,r as F,c as P,u as z,a as d,m as A,o as J,b as I,n as de,d as W,F as x,i as ce,e as K,f as ue,t as T,h as me,j as be,_ as B,k as fe,l as ve,q as C,s as b,w as p,v as m,x as _,y as q,z as Q,A as pe,B as Z,C as we,D as ge,E as H,G as ee,H as _e,I as Se,J as ye}from"./main-Dl2Lrwga.js";import{A as he,V as Ve,a as Te,b as Ae,U as Ce,c as xe}from"./unauthorized-T8UCTUHd.js";import{S as Be,a as $e}from"./settings-drawer-Bu83HJ70.js";import{useAdminStore as D,TABS as te}from"./admin-rFfBszpt.js";import{u as ke,V as X,f as De,m as Pe,a as Ie,s as We,b as Le,c as Ue,d as ze,e as Ee}from"./forwardRefs-DkWUbz_i.js";import{V as N,m as Me,a as G,b as He}from"./VWindowItem-CBh8U6qD.js";import{m as Ne,V as Y}from"./VDivider-tFagM0PC.js";import{u as Ge}from"./VDialog-BScRe1ug.js";import"./change-password-dialog-DQ_0TaFN.js";import"./VForm-B__yH-Y4.js";import"./VSelectionControl-CjjwyQ-Y.js";import"./ssrBoot-CYaxTeZo.js";import"./copy-to-clipboard-DoUvDJVx.js";const O=Symbol.for("vuetify:v-tabs"),Oe=U({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...J(Pe({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),ae=L()({name:"VTab",props:Oe(),setup(e,a){let{slots:r,attrs:t}=a;const{textColorClasses:i,textColorStyles:o}=ke(()=>e.sliderColor),n=F(),s=F(),c=P(()=>e.direction==="horizontal"),f=P(()=>{var w,l;return((l=(w=n.value)==null?void 0:w.group)==null?void 0:l.isSelected.value)??!1});function E(w){var u,g;let{value:l}=w;if(l){const v=(g=(u=n.value)==null?void 0:u.$el.parentElement)==null?void 0:g.querySelector(".v-tab--selected .v-tab__slider"),M=s.value;if(!v||!M)return;const ne=getComputedStyle(v).color,S=v.getBoundingClientRect(),y=M.getBoundingClientRect(),$=c.value?"x":"y",k=c.value?"X":"Y",R=c.value?"right":"bottom",h=c.value?"width":"height",se=S[$],oe=y[$],V=se>oe?S[R]-y[R]:S[$]-y[$],re=Math.sign(V)>0?c.value?"right":"bottom":Math.sign(V)<0?c.value?"left":"top":"center",ie=(Math.abs(V)+(Math.sign(V)<0?S[h]:y[h]))/Math.max(S[h],y[h])||0,le=S[h]/y[h]||0,j=1.5;Ie(M,{backgroundColor:[ne,"currentcolor"],transform:[`translate${k}(${V}px) scale${k}(${le})`,`translate${k}(${V/j}px) scale${k}(${(ie-1)/j+1})`,"none"],transformOrigin:Array(3).fill(re)},{duration:225,easing:We})}}return z(()=>{const w=X.filterProps(e);return d(X,A({symbol:O,ref:n,class:["v-tab",e.class],style:e.style,tabindex:f.value?0:-1,role:"tab","aria-selected":String(f.value),active:!1},w,t,{block:e.fixed,maxWidth:e.fixed?300:void 0,"onGroup:selected":E}),{...r,default:()=>{var l;return I(x,null,[((l=r.default)==null?void 0:l.call(r))??e.text,!e.hideSlider&&I("div",{ref:s,class:W(["v-tab__slider",i.value]),style:de(o.value)},null)])}})}),De({},n)}}),Re=U({...J(Me(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),je=L()({name:"VTabsWindow",props:Re(),emits:{"update:modelValue":e=>!0},setup(e,a){let{slots:r}=a;const t=ce(O,null),i=K(e,"modelValue"),o=P({get(){var n;return i.value!=null||!t?i.value:(n=t.items.value.find(s=>t.selected.value.includes(s.id)))==null?void 0:n.value},set(n){i.value=n}});return z(()=>{const n=N.filterProps(e);return d(N,A({_as:"VTabsWindow"},n,{modelValue:o.value,"onUpdate:modelValue":s=>o.value=s,class:["v-tabs-window",e.class],style:e.style,mandatory:!1,touch:!1}),r)}),{}}}),Fe=U({...He()},"VTabsWindowItem"),qe=L()({name:"VTabsWindowItem",props:Fe(),setup(e,a){let{slots:r}=a;return z(()=>{const t=G.filterProps(e);return d(G,A({_as:"VTabsWindowItem"},t,{class:["v-tabs-window-item",e.class],style:e.style}),r)}),{}}});function Xe(e){return e?e.map(a=>me(a)?a:{text:a,value:a}):[]}const Ye=U({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...Ne({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Ee(),...ze()},"VTabs"),Je=L()({name:"VTabs",props:Ye(),emits:{"update:modelValue":e=>!0},setup(e,a){let{attrs:r,slots:t}=a;const i=K(e,"modelValue"),o=P(()=>Xe(e.items)),{densityClasses:n}=Le(e),{backgroundColorClasses:s,backgroundColorStyles:c}=Ue(()=>e.bgColor),{scopeId:f}=Ge();return ue({VTab:{color:T(()=>e.color),direction:T(()=>e.direction),stacked:T(()=>e.stacked),fixed:T(()=>e.fixedTabs),sliderColor:T(()=>e.sliderColor),hideSlider:T(()=>e.hideSlider)}}),z(()=>{const E=Y.filterProps(e),w=!!(t.window||e.items.length>0);return I(x,null,[d(Y,A(E,{modelValue:i.value,"onUpdate:modelValue":l=>i.value=l,class:["v-tabs",`v-tabs--${e.direction}`,`v-tabs--align-tabs-${e.alignTabs}`,{"v-tabs--fixed-tabs":e.fixedTabs,"v-tabs--grow":e.grow,"v-tabs--stacked":e.stacked},n.value,s.value,e.class],style:[{"--v-tabs-height":be(e.height)},c.value,e.style],role:"tablist",symbol:O},f,r),{default:()=>{var l;return[((l=t.default)==null?void 0:l.call(t))??o.value.map(u=>{var g;return((g=t.tab)==null?void 0:g.call(t,{item:u}))??d(ae,A(u,{key:u.text,value:u.value}),{default:t[`tab.${u.value}`]?()=>{var v;return(v=t[`tab.${u.value}`])==null?void 0:v.call(t,{item:u})}:void 0})})]}}),w&&d(je,A({modelValue:i.value,"onUpdate:modelValue":l=>i.value=l,key:"tabs-window"},f),{default:()=>{var l;return[o.value.map(u=>{var g;return((g=t.item)==null?void 0:g.call(t,{item:u}))??d(qe,{value:u.value},{default:()=>{var v;return(v=t[`item.${u.value}`])==null?void 0:v.call(t,{item:u})}})}),(l=t.window)==null?void 0:l.call(t)]}})])}),{}}}),Ke={name:"AdminTitleToolbar",components:{AppBanner:he,SettingsDrawerButton:Be},data(){return{TABS:te}},computed:{...fe(D,["activeTab"]),mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{$route(e){const r=e.path.split("/").at(-1);this.activeTab=ve(r)}}};function Qe(e,a,r,t,i,o){const n=b("AppBanner"),s=b("SettingsDrawerButton");return m(),C("header",{id:"adminHeader",class:W({drawerMargin:!o.mdAndDown})},[d(n),d(Ve,{id:"titleBar",flat:"",density:"compact"},{default:p(()=>[a[2]||(a[2]=I("span",{id:"buttonSpacer"},null,-1)),d(Te,{class:"codexToolbarTitle"},{default:p(()=>a[1]||(a[1]=[q(" Codex Administration ")])),_:1,__:[1]}),(m(),_(s,{key:o.mdAndDown,class:W(["adminSettingsButton",{invisible:!o.mdAndDown}]),disabled:!o.mdAndDown},null,8,["class","disabled"]))]),_:1,__:[2]}),d(Je,{class:"adminTabs",grow:"","show-arrows":""},{default:p(()=>[(m(!0),C(x,null,Q(i.TABS,c=>(m(),_(ae,{key:c,modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=f=>e.activeTab=f),to:c.toLowerCase()},{default:p(()=>[q(pe(c),1)]),_:2},1032,["modelValue","to"]))),128))]),_:1})],2)}const Ze=B(Ke,[["render",Qe],["__scopeId","data-v-026356a3"]]),et={name:"AdminSettingsPanel",components:{AdminBrowserLink:Ae}};function tt(e,a,r,t,i,o){const n=b("AdminBrowserLink");return m(),_(n)}const at=B(et,[["render",tt]]),nt={name:"AdminSettingsDrawer",components:{SettingsDrawer:$e,AdminSettingsPanel:at},computed:{mdAndDown(){return this.$vuetify.display.mdAndDown}},watch:{mdAndDown(e){e||this.setSettingsDrawerOpen(!0)}},mounted(){this.mdAndDown||this.setSettingsDrawerOpen(!0)},methods:{...Z(we,["setSettingsDrawerOpen"])}};function st(e,a,r,t,i,o){const n=b("AdminSettingsPanel"),s=b("SettingsDrawer");return m(),_(s,{title:"Admin",temporary:o.mdAndDown},{panel:p(()=>[d(n)]),_:1},8,["temporary"])}const ot=B(nt,[["render",st]]),rt={name:"AdminTabs",data(){return{TABS:te}},computed:{...H(D,["doNormalComicLibrariesExist"]),...H(ee,["isBanner"]),...ge(D,{librariesLoaded:e=>!!e.libraries,activeTab:e=>e.activeTab}),classes(){let e="tabItems";return this.isBanner&&(e+="Banner"),{[e]:!0}}},mounted(){this.librariesLoaded||this.loadTables(["Library"])},methods:{...Z(D,["loadTables"])}},it={key:0,id:"noLibraries"};function lt(e,a,r,t,i,o){const n=b("router-view");return m(),C(x,null,[d(N,{modelValue:e.activeTab,"onUpdate:modelValue":a[0]||(a[0]=s=>e.activeTab=s),class:W(o.classes),touch:!1},{default:p(()=>[(m(!0),C(x,null,Q(i.TABS,s=>(m(),_(n,{key:s},{default:p(({Component:c})=>[d(G,{value:s,class:"tabItemContainer"},{default:p(()=>[(m(),_(Se(c)))]),_:2},1032,["value"])]),_:2},1024))),128))]),_:1},8,["modelValue","class"]),e.doNormalComicLibrariesExist?_e("",!0):(m(),C("div",it," Codex has no libraries. Select the Libraries tab and add a comic library. "))],64)}const dt=B(rt,[["render",lt],["__scopeId","data-v-2943e103"]]),ct={name:"MainAdmin",components:{AdminHeader:Ze,AdminSettingsDrawer:ot,AdminTabs:dt,Unauthorized:Ce},data(){return{mdiLogin:ye}},computed:{...H(ee,["isUserAdmin"])}};function ut(e,a,r,t,i,o){const n=b("AdminHeader"),s=b("AdminTabs"),c=b("AdminSettingsDrawer"),f=b("Unauthorized");return e.isUserAdmin?(m(),_(xe,{key:0},{default:p(()=>[d(n),d(s),d(c)]),_:1})):(m(),_(f,{key:1}))}const Ct=B(ct,[["render",ut]]);export{Ct as default};
