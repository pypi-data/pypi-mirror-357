---
- name: Gather Plivo Chatbot logs from all machines
  hosts: target_servers
  become: yes
  tasks:
  - name: Check if log file exists
    ansible.builtin.stat:
      path: /tmp/plivo-chatbot-logs.txt
    register: log_file

  - name: Fetch logs from remote machines
    ansible.builtin.fetch:
      src: /tmp/plivo-chatbot-logs.txt
      dest: ./logs/plivo-logs-{{ inventory_hostname }}.txt
      flat: yes
    when: log_file.stat.exists
