"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["29068"],{61540:function(e,t,s){s.d(t,{$y:()=>a,fs:()=>o,j:()=>n});s(1455);const r=(e,t,s)=>new Promise(((r,n)=>{const o=document.createElement(e);let a="src",l="body";switch(o.onload=()=>r(t),o.onerror=()=>n(t),e){case"script":o.async=!0,s&&(o.type=s);break;case"link":o.type="text/css",o.rel="stylesheet",a="href",l="head"}o[a]=t,document[l].appendChild(o)})),n=e=>r("link",e),o=e=>r("script",e),a=e=>r("script",e,"module")},97541:function(e,t,s){s.r(t),s.d(t,{HaPanelCustom:()=>p});s(39710),s(26847),s(20655),s(27530);var r=s(73742),n=s(59048),o=s(7616),a=s(67050),l=s(65829);s(1455);var i=s(61540);const c={},u=e=>e.html_url?{type:"html",url:e.html_url}:e.module_url&&e.js_url?{type:"js",url:e.js_url}:e.module_url?{type:"module",url:e.module_url}:{type:"js",url:e.js_url};s(81738),s(22960);const h=(e,t)=>{"setProperties"in e?e.setProperties(t):Object.keys(t).forEach((s=>{e[s]=t[s]}))};class p extends n.fl{createRenderRoot(){return this}registerIframe(e,t){e(this.panel,{hass:this.hass,narrow:this.narrow,route:this.route}),this._setProperties=t}disconnectedCallback(){super.disconnectedCallback(),this._cleanupPanel()}update(e){if(super.update(e),e.has("panel")){const t=e.get("panel");if(!(0,l.v)(t,this.panel))return t&&this._cleanupPanel(),void this._createPanel(this.panel)}if(!this._setProperties)return;const t={};for(const s of e.keys())t[s]=this[s];this._setProperties(t)}_cleanupPanel(){for(delete window.customPanel,this._setProperties=void 0;this.lastChild;)this.removeChild(this.lastChild)}_createPanel(e){const t=e.config._panel_custom,s=u(t),r=document.createElement("a");if(r.href=s.url,!t.trust_external&&!["localhost","127.0.0.1",location.hostname].includes(r.hostname)&&!confirm(`${this.hass.localize("ui.panel.custom.external_panel.question_trust",{name:t.name,link:r.href})}\n\n           ${this.hass.localize("ui.panel.custom.external_panel.complete_access")}\n\n           (${this.hass.localize("ui.panel.custom.external_panel.hide_message")})`))return;if(!t.embed_iframe)return void(e=>{const t=u(e);return"js"===t.type?(t.url in c||(c[t.url]=(0,i.fs)(t.url)),c[t.url]):"module"===t.type?(0,i.$y)(t.url):Promise.reject("No valid url found in panel config.")})(t).then((()=>{const s=(e=>{const t="html_url"in e?`ha-panel-${e.name}`:e.name;return document.createElement(t)})(t);this._setProperties=e=>h(s,e),h(s,{panel:e,hass:this.hass,narrow:this.narrow,route:this.route}),this.appendChild(s)}),(()=>{alert(`Unable to load custom panel from ${r.href}`)}));window.customPanel=this;const n=this.panel.title?`title="${this.panel.title}"`:"";this.innerHTML=`\n      <style>\n        iframe {\n          border: 0;\n          width: 100%;\n          height: 100%;\n          display: block;\n          background-color: var(--primary-background-color);\n        }\n      </style>\n      <iframe ${n}></iframe>`.trim();const o=this.querySelector("iframe").contentWindow.document;o.open(),o.write(`<!doctype html><script src='${window.customPanelJS}'><\/script>`),o.close()}constructor(...e){super(...e),this.narrow=!1,this.navigate=(e,t)=>(0,a.c)(e,t)}}(0,r.__decorate)([(0,o.Cb)({attribute:!1})],p.prototype,"hass",void 0),(0,r.__decorate)([(0,o.Cb)({type:Boolean})],p.prototype,"narrow",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],p.prototype,"route",void 0),(0,r.__decorate)([(0,o.Cb)({attribute:!1})],p.prototype,"panel",void 0),customElements.define("ha-panel-custom",p)}}]);
//# sourceMappingURL=29068.2c0c86535d7a7722.js.map