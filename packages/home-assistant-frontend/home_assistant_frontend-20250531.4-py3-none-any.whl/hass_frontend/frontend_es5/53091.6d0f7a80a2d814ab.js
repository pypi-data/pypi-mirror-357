"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["53091"],{7214:function(e,t,s){s.d(t,{Cj:()=>_,F7:()=>a,Hs:()=>k,Kd:()=>D,Kj:()=>p,Nw:()=>m,PA:()=>n,Py:()=>c,Qm:()=>S,Z0:()=>y,_Y:()=>l,_m:()=>r,dL:()=>h,dO:()=>w,hN:()=>u,h_:()=>d,j2:()=>v,q6:()=>f,uR:()=>o});s(39710),s(26847),s(81738),s(72489),s(56389),s(27530);var i=s(15459),a=function(e){return e[e.NONE=0]="NONE",e[e.ARITHMETIC=1]="ARITHMETIC",e[e.CIRCULAR=2]="CIRCULAR",e}({});const n=99387==s.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,r=e=>e.sendMessagePromise({type:"recorder/info"}),o=(e,t)=>e.callWS({type:"recorder/list_statistic_ids",statistic_type:t}),c=(e,t)=>e.callWS({type:"recorder/get_statistics_metadata",statistic_ids:t}),h=(e,t,s,i,a="hour",n,r)=>e.callWS({type:"recorder/statistics_during_period",start_time:t.toISOString(),end_time:null==s?void 0:s.toISOString(),statistic_ids:i,period:a,units:n,types:r}),l=(e,t,s,i)=>e.callWS({type:"recorder/statistic_during_period",statistic_id:t,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar,rolling_window:s.rolling_window}),d=e=>e.callWS({type:"recorder/validate_statistics"}),_=(e,t,s)=>e.callWS({type:"recorder/update_statistics_metadata",statistic_id:t,unit_of_measurement:s}),u=(e,t)=>e.callWS({type:"recorder/clear_statistics",statistic_ids:t}),p=e=>{let t=null;if(!e)return null;for(const s of e)null!==s.change&&void 0!==s.change&&(null===t?t=s.change:t+=s.change);return t},f=(e,t)=>{let s=null;for(const i of t){if(!(i in e))continue;const t=p(e[i]);null!==t&&(null===s?s=t:s+=t)}return s},m=(e,t)=>e.some((e=>void 0!==e[t]&&null!==e[t])),g=["mean","min","max"],b=["sum","state","change"],y=(e,t)=>!(!g.includes(t)||0===e.mean_type)||!(!b.includes(t)||!e.has_sum),v=(e,t,s,i,a)=>{const n=new Date(s).toISOString();return e.callWS({type:"recorder/adjust_sum_statistics",statistic_id:t,start_time:n,adjustment:i,adjustment_unit_of_measurement:a})},D=(e,t,s)=>{const a=e.states[t];return a?(0,i.C)(a):(null==s?void 0:s.name)||t},w=(e,t,s)=>{let i;var a;t&&(i=null===(a=e.states[t])||void 0===a?void 0:a.attributes.unit_of_measurement);return void 0===i?null==s?void 0:s.statistics_unit_of_measurement:i},k=e=>e.includes(":"),S=e=>e.callWS({type:"recorder/update_statistics_issues"})},6291:function(e,t,s){s.d(t,{f:()=>n});s(39710),s(26847),s(81738),s(72489),s(1455),s(56389),s(27530);var i=s(73742),a=s(7616);const n=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then((e=>e())):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some((e=>void 0===this[e]))||(this.__unsubs=this.hassSubscribe())}}return(0,i.__decorate)([(0,a.Cb)({attribute:!1})],t.prototype,"hass",void 0),t}},25316:function(e,t,s){s.a(e,(async function(e,i){try{s.r(t),s.d(t,{HuiEnergyDateSelectionCard:()=>u});var a=s(73742),n=s(59048),r=s(7616),o=(s(31138),s(93647)),c=s(25804),h=e([c]);c=(h.then?(await h)():h)[0];let l,d,_=e=>e;class u extends n.oi{getCardSize(){return 1}getGridOptions(){return{rows:1,columns:12}}setConfig(e){this._config=e}shouldUpdate(e){return(0,o.SN)(this,e)||e.size>1||!e.has("hass")}render(){return this.hass&&this._config?(0,n.dy)(l||(l=_` <ha-card> <div class="card-content"> <hui-energy-period-selector .hass="${0}" .collectionKey="${0}"></hui-energy-period-selector> </div> </ha-card> `),this.hass,this._config.collection_key):n.Ld}}u.styles=(0,n.iv)(d||(d=_`ha-card{height:100%;display:flex;flex-direction:column;justify-content:center}`)),(0,a.__decorate)([(0,r.Cb)({attribute:!1})],u.prototype,"hass",void 0),(0,a.__decorate)([(0,r.SB)()],u.prototype,"_config",void 0),u=(0,a.__decorate)([(0,r.Mo)("hui-energy-date-selection-card")],u),i()}catch(l){i(l)}}))},25804:function(e,t,s){s.a(e,(async function(e,t){try{var i=s(83788),a=(s(26847),s(1455),s(27530),s(73742)),n=(s(98334),s(46021)),r=s(56858),o=s(66233),c=s(90964),h=s(7722),l=s(25025),d=s(66386),_=s(26306),u=s(34635),p=s(73228),f=s(59048),m=s(7616),g=s(28105),b=s(44548),y=s(34302),v=s(40142),D=s(87639),w=(s(41037),s(93673),s(97365)),k=(s(22852),s(29813),s(6640)),S=s(6291),C=s(97711),A=e([i,w,v,y,C,k,b]);[i,w,v,y,C,k,b]=A.then?(await A)():A;let x,O,$,z=e=>e;const R="M12,16A2,2 0 0,1 14,18A2,2 0 0,1 12,20A2,2 0 0,1 10,18A2,2 0 0,1 12,16M12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12A2,2 0 0,1 12,10M12,4A2,2 0 0,1 14,6A2,2 0 0,1 12,8A2,2 0 0,1 10,6A2,2 0 0,1 12,4Z",P=["today","yesterday","this_week","this_month","this_quarter","this_year","now-7d","now-30d","now-12m"];class j extends((0,S.f)(f.oi)){hassSubscribe(){return[(0,k.UB)(this.hass,{key:this.collectionKey}).subscribe((e=>this._updateDates(e)))]}_measure(){this.narrow=this.offsetWidth<450}async _attachObserver(){this._resizeObserver||(this._resizeObserver=new ResizeObserver((0,D.D)((()=>this._measure()),250,!1))),this._resizeObserver.observe(this)}firstUpdated(){this._attachObserver()}connectedCallback(){super.connectedCallback(),this.updateComplete.then((()=>this._attachObserver()))}disconnectedCallback(){super.disconnectedCallback(),this._resizeObserver&&this._resizeObserver.disconnect()}willUpdate(e){var t,s;super.willUpdate(e),this.hasUpdated||this._measure(),(!this.hasUpdated||e.has("hass")&&(null===(t=this.hass)||void 0===t?void 0:t.localize)!==(null===(s=e.get("hass"))||void 0===s?void 0:s.localize))&&(this._ranges={},P.forEach((e=>{this._ranges[this.hass.localize(`ui.components.date-range-picker.ranges.${e}`)]=(0,C.p)(this.hass,e)})))}render(){if(!this.hass||!this._startDate)return f.Ld;const e=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config);return(0,f.dy)(x||(x=z` <div class="row"> <div class="label"> ${0} </div> <div class="time-handle"> <ha-icon-button-prev .label="${0}" @click="${0}"></ha-icon-button-prev> <ha-icon-button-next .label="${0}" @click="${0}"></ha-icon-button-next> <ha-date-range-picker .hass="${0}" .startDate="${0}" .endDate="${0}" .ranges="${0}" @value-changed="${0}" @preset-selected="${0}" minimal header-position></ha-date-range-picker> </div> ${0} <ha-button-menu> <ha-icon-button slot="trigger" .label="${0}" .path="${0}"></ha-icon-button> <ha-check-list-item left @request-selected="${0}" .selected="${0}"> ${0} </ha-check-list-item> <slot name="overflow-menu"></slot> </ha-button-menu> </div> `),"day"===e?this.narrow?(0,v.mn)(this._startDate,this.hass.locale,this.hass.config):(0,v.p6)(this._startDate,this.hass.locale,this.hass.config):"month"===e?(0,v.NC)(this._startDate,this.hass.locale,this.hass.config):"year"===e?(0,v.yQ)(this._startDate,this.hass.locale,this.hass.config):`${(0,v.ud)(this._startDate,this.hass.locale,this.hass.config)} â€“ ${(0,v.ud)(this._endDate||new Date,this.hass.locale,this.hass.config)}`,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.previous"),this._pickPrevious,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.next"),this._pickNext,this.hass,this._startDate,this._endDate||new Date,this._ranges,this._dateRangeChanged,this._presetSelected,this.narrow?f.Ld:(0,f.dy)(O||(O=z`<mwc-button dense outlined @click="${0}"> ${0} </mwc-button>`),this._pickNow,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.now")),this.hass.localize("ui.common.menu"),R,this._toggleCompare,this._compare,this.hass.localize("ui.panel.lovelace.components.energy_period_selector.compare"))}_updateCollectionPeriod(){const e=(0,k.UB)(this.hass,{key:this.collectionKey});e.setPeriod(this._startDate,this._endDate),e.refresh()}_dateRangeChanged(e){this._startDate=(0,b.AH)(e.detail.value.startDate,n.b,this.hass.locale,this.hass.config),this._endDate=(0,b.AH)(e.detail.value.endDate,r.i,this.hass.locale,this.hass.config),this._updateCollectionPeriod()}_presetSelected(e){localStorage.setItem(`energy-default-period-_${this.collectionKey||"energy"}`,P[e.detail.index])}_pickNow(){if(!this._startDate)return;const e=this._simpleRange(this._startDate,this._endDate,this.hass.locale,this.hass.config),t=new Date;if("month"===e)[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_month");else if("quarter"===e)[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_quarter");else if("year"===e)[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_year");else{const e=(0,y.Bt)(this.hass.locale),s=(0,b.AH)(this._endDate,o.z,this.hass.locale,this.hass.config,{weekStartsOn:e}),i=(0,b.AH)(this._endDate,c.v,this.hass.locale,this.hass.config,{weekStartsOn:e});if(this._startDate.getTime()===s.getTime()&&this._endDate.getTime()===i.getTime())[this._startDate,this._endDate]=(0,C.p)(this.hass,"this_week");else{const s=(0,b.Ai)(this._endDate,this._startDate,h.j,this.hass.locale,this.hass.config);this._startDate=(0,b.AH)((0,b.AH)(t,l.k,this.hass.locale,this.hass.config,s),n.b,this.hass.locale,this.hass.config,{weekStartsOn:e}),this._endDate=(0,b.AH)(t,r.i,this.hass.locale,this.hass.config,{weekStartsOn:e})}}this._updateCollectionPeriod()}_pickPrevious(){this._shift(!1)}_pickNext(){this._shift(!0)}_shift(e){if(!this._startDate)return;const{start:t,end:s}=(0,b.shiftDateRange)(this._startDate,this._endDate,e,this.hass.locale,this.hass.config);this._startDate=t,this._endDate=s,this._updateCollectionPeriod()}_updateDates(e){this._compare=void 0!==e.startCompare,this._startDate=e.start,this._endDate=e.end||(0,d.p)()}_toggleCompare(e){if("interaction"!==e.detail.source)return;this._compare=e.detail.selected;const t=(0,k.UB)(this.hass,{key:this.collectionKey});t.setCompare(this._compare),t.refresh()}constructor(...e){super(...e),this._ranges={},this._compare=!1,this._simpleRange=(0,g.Z)(((e,t,s,i)=>{if(0===(0,h.j)(t,e))return"day";if((0,b.vA)(e,_.b,s,i)&&(0,b.vA)(t,u.h,s,i)){if(0===(0,b.Ai)(t,e,p.d,s,i))return"month";if(2===(0,b.Ai)(t,e,p.d,s,i)&&e.getMonth()%3==0)return"quarter"}return(0,b.vA)(e,_.b,s,i)&&(0,b.vA)(t,u.h,s,i)&&11===(0,b.Ai)(t,e,p.d,s,i)?"year":"other"}))}}j.styles=(0,f.iv)($||($=z`.row{display:flex;align-items:center}:host .time-handle{display:flex;justify-content:flex-end;align-items:center}:host([narrow]) .time-handle{margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}.label{display:flex;align-items:center;justify-content:flex-end;font-size:var(--ha-font-size-xl);margin-left:auto;margin-inline-start:auto;margin-inline-end:initial}:host([narrow]) .label{margin-left:unset;margin-inline-start:unset;margin-inline-end:initial}mwc-button{margin-left:8px;margin-inline-start:8px;margin-inline-end:initial;flex-shrink:0;--mdc-button-outline-color:currentColor;--primary-color:currentColor;--mdc-theme-primary:currentColor;--mdc-theme-on-primary:currentColor;--mdc-button-disabled-outline-color:var(--disabled-text-color);--mdc-button-disabled-ink-color:var(--disabled-text-color)}`)),(0,a.__decorate)([(0,m.Cb)({attribute:!1})],j.prototype,"hass",void 0),(0,a.__decorate)([(0,m.Cb)({attribute:"collection-key"})],j.prototype,"collectionKey",void 0),(0,a.__decorate)([(0,m.Cb)({type:Boolean,reflect:!0})],j.prototype,"narrow",void 0),(0,a.__decorate)([(0,m.SB)()],j.prototype,"_startDate",void 0),(0,a.__decorate)([(0,m.SB)()],j.prototype,"_endDate",void 0),(0,a.__decorate)([(0,m.SB)()],j.prototype,"_ranges",void 0),(0,a.__decorate)([(0,m.SB)()],j.prototype,"_compare",void 0),j=(0,a.__decorate)([(0,m.Mo)("hui-energy-period-selector")],j),t()}catch(x){t(x)}}))},77451:function(e,t,s){var i=s(77341),a=s(30456),n=s(42749),r=s(61360),o=TypeError,c=Object.defineProperty,h=a.self!==a;try{if(r){var l=Object.getOwnPropertyDescriptor(a,"self");!h&&l&&l.get&&l.enumerable||n(a,"self",{get:function(){return a},set:function(e){if(this!==a)throw new o("Illegal invocation");c(a,"self",{value:e,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})}else i({global:!0,simple:!0,forced:h},{self:a})}catch(d){}},66386:function(e,t,s){s.d(t,{p:()=>a});var i=s(56858);function a(e){return(0,i.i)(Date.now(),e)}}}]);
//# sourceMappingURL=53091.6d0f7a80a2d814ab.js.map