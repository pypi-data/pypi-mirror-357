"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["68973"],{92535:function(t,e,o){o.a(t,(async function(t,i){try{o.d(e,{t:()=>l});var r=o(40142),a=o(45691),s=t([r,a]);function l(t,e,o,i){const s=i/60/24,n=new Date(t);if(s>88)return 0===n.getMonth()?`{bold|${(0,r.NC)(n,e,o)}}`:(0,r.Nh)(n,e,o);if(s>35)return 1===n.getDate()?`{bold|${(0,r.ud)(n,e,o)}}`:(0,r.ud)(n,e,o);if(s>7){const t=(0,r.ud)(n,e,o);return 1===n.getDate()?`{bold|${t}}`:t}return s>2?(0,r.U8)(n,e,o):i&&i<5?(0,a.Vu)(n,e,o):0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()?`{bold|${(0,r.ud)(n,e,o)}}`:(0,a.mr)(n,e,o)}[r,a]=s.then?(await s)():s,i()}catch(n){i(n)}}))},13791:function(t,e,o){o.d(e,{W:()=>i});o(26847),o(2394),o(27530);function i(t,e,o,i){if(!t||t.length<10)return t;const a=e*window.devicePixelRatio;if(t.length<=a)return t;const s=null!=o?o:r(t[0])[0],n=null!=i?i:r(t[t.length-1])[0],l=Math.floor((n-s)/a),d=new Map;for(const h of t){const t=r(h);if(!Array.isArray(t))continue;const e=Number(t[0]),o=Number(t[1]);if(isNaN(e)||isNaN(o))continue;const i=Math.floor((e-s)/l),a=d.get(i);a?(a.min.y>o&&(a.min={point:h,x:e,y:o}),a.max.y<o&&(a.max={point:h,x:e,y:o})):d.set(i,{min:{point:h,x:e,y:o},max:{point:h,x:e,y:o}})}const c=[];for(const[r,h]of d)h.min.x>h.max.x&&c.push(h.max.point),c.push(h.min.point),h.min.x<h.max.x&&c.push(h.max.point);return c}function r(t){return t&&"object"==typeof t&&"value"in t?t.value:t}},37008:function(t,e,o){o.a(t,(async function(t,i){try{o.d(e,{Q:()=>A});o(26847),o(2394),o(44438),o(81738),o(94814),o(29981),o(22960),o(6989),o(93190),o(87799),o(1455),o(67886),o(65451),o(46015),o(38334),o(94880),o(75643),o(29761),o(27530);var r=o(73742),a=o(72644),s=o(64346),n=o(19627),l=o(59048),d=o(7616),c=o(31733),h=o(20480),p=o(55815),u=o(39884),g=o(86339),m=o(97133),v=o(2913),y=(o(48017),o(92535)),x=o(45332),_=(o(84447),o(13791)),f=t([s,y]);[s,y]=f.then?(await f)():f;let b,w,C,L,k,V,P=t=>t;const S="M7.41,8.58L12,13.17L16.59,8.58L18,10L12,16L6,10L7.41,8.58Z",Z="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z",D="M12,4C14.1,4 16.1,4.8 17.6,6.3C20.7,9.4 20.7,14.5 17.6,17.6C15.8,19.5 13.3,20.2 10.9,19.9L11.4,17.9C13.1,18.1 14.9,17.5 16.2,16.2C18.5,13.9 18.5,10.1 16.2,7.7C15.1,6.6 13.5,6 12,6V10.6L7,5.6L12,0.6V4M6.3,17.6C3.7,15 3.3,11 5.1,7.9L6.6,9.4C5.5,11.6 5.9,14.4 7.8,16.2C8.3,16.7 8.9,17.1 9.6,17.4L9,19.4C8,19 7.1,18.4 6.3,17.6Z",A=3e5,$=10,O=6,M=300;class T extends l.oi{disconnectedCallback(){var t;for(super.disconnectedCallback();this._listeners.length;)this._listeners.pop()();null===(t=this.chart)||void 0===t||t.dispose(),this.chart=void 0,this._originalZrFlush=void 0}connectedCallback(){var t;if(super.connectedCallback(),this.hasUpdated&&this._setupChart(),this._listeners.push((0,g.K)("(prefers-reduced-motion)",(t=>{this._reducedMotion!==t&&(this._reducedMotion=t,this._setChartOptions({animation:!this._reducedMotion}))}))),null===(t=this.options)||void 0===t||!t.dataZoom){const t=t=>{var e,o;!this._modifierPressed&&(v.V&&"Meta"===t.key||!v.V&&"Control"===t.key)&&(this._modifierPressed=!0,null!==(e=this.options)&&void 0!==e&&e.dataZoom||this._setChartOptions({dataZoom:this._getDataZoomConfig()}),null===(o=this.chart)||void 0===o||o.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!0}))},e=t=>{var e,o;this._modifierPressed&&(v.V&&"Meta"===t.key||!v.V&&"Control"===t.key)&&(this._modifierPressed=!1,null!==(e=this.options)&&void 0!==e&&e.dataZoom||this._setChartOptions({dataZoom:this._getDataZoomConfig()}),null===(o=this.chart)||void 0===o||o.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!1}))};window.addEventListener("keydown",t),window.addEventListener("keyup",e),this._listeners.push((()=>window.removeEventListener("keydown",t)),(()=>window.removeEventListener("keyup",e)))}}firstUpdated(){this._setupChart()}willUpdate(t){if(!this.chart)return;if(t.has("_themes"))return void this._setupChart();let e={};(t.has("data")||t.has("_hiddenDatasets"))&&(e.series=this._getSeries()),t.has("options")?e=Object.assign(Object.assign({},e),this._createOptions()):this._isTouchDevice&&t.has("_isZoomed")&&(e.dataZoom=this._getDataZoomConfig()),Object.keys(e).length>0&&this._setChartOptions(e)}render(){return(0,l.dy)(b||(b=P` <div class="container ${0}" style="${0}"> <div class="chart-container" style="${0}"> <div class="chart"></div> </div> ${0} <div class="chart-controls ${0}"> ${0} <slot name="button"></slot> </div> </div> `),(0,c.$)({"has-height":!!this.height}),(0,h.V)({height:this.height}),(0,h.V)({height:this.height?void 0:`${this._getDefaultHeight()}px`}),this._renderLegend(),(0,c.$)({small:this.smallControls}),this._isZoomed?(0,l.dy)(w||(w=P`<ha-icon-button class="zoom-reset" .path="${0}" @click="${0}" title="${0}"></ha-icon-button>`),D,this._handleZoomReset,this.hass.localize("ui.components.history_charts.zoom_reset")):l.Ld)}_renderLegend(){var t;if(null===(t=this.options)||void 0===t||!t.legend||!this.data)return l.Ld;const e=(0,x.r)(this.options.legend)[0];if(!e.show||"custom"!==e.type)return l.Ld;const o=(0,x.r)(this.data),i=e.data||o.filter((t=>{var e;return(null===(e=t.data)||void 0===e?void 0:e.length)&&(t.id||t.name)})).map((t=>{var e;return null!==(e=t.name)&&void 0!==e?e:t.id}))||[],r=window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches?O:$;return(0,l.dy)(C||(C=P`<div class="${0}"> <ul> ${0} ${0} </ul> </div>`),(0,c.$)({"chart-legend":!0,"multiple-items":i.length>1}),i.map(((t,e)=>{var i,a;if(!this.expandLegend&&e>=r)return l.Ld;let s={},n="";if("string"==typeof t){n=t;const e=o.find((e=>e.id===t||e.name===t));s=Object.assign({color:null==e?void 0:e.color},null==e?void 0:e.itemStyle)}else{var d,p;n=null!==(d=t.name)&&void 0!==d?d:"",s=null!==(p=t.itemStyle)&&void 0!==p?p:{}}const u=null===(i=s)||void 0===i?void 0:i.color,g=null===(a=s)||void 0===a?void 0:a.borderColor;return(0,l.dy)(L||(L=P`<li .name="${0}" @click="${0}" class="${0}" .title="${0}"> <div class="bullet" style="${0}"></div> <div class="label">${0}</div> </li>`),n,this._legendClick,(0,c.$)({hidden:this._hiddenDatasets.has(n)}),n,(0,h.V)({backgroundColor:u,borderColor:g||u}),n)})),i.length>r?(0,l.dy)(k||(k=P`<li> <ha-assist-chip @click="${0}" filled label="${0}"> <ha-svg-icon slot="trailing-icon" .path="${0}"></ha-svg-icon> </ha-assist-chip> </li>`),this._toggleExpandedLegend,this.expandLegend?this.hass.localize("ui.components.history_charts.collapse_legend"):`${this.hass.localize("ui.components.history_charts.expand_legend")} (${i.length-r})`,this.expandLegend?Z:S):l.Ld)}async _setupChart(){if(this._loading)return;const t=this.renderRoot.querySelector(".chart");this._loading=!0;try{var e,i,r;this.chart&&this.chart.dispose();const a=(await Promise.all([o.e("69676"),o.e("97957"),o.e("13230"),o.e("63797"),o.e("7207")]).then(o.bind(o,68234))).default;null!==(e=this.extraComponents)&&void 0!==e&&e.length&&a.use(this.extraComponents),a.registerTheme("custom",this._createTheme()),this.chart=a.init(t,"custom"),this.chart.on("datazoom",(t=>{var e,o;const{start:i,end:r}=null!==(e=null===(o=t.batch)||void 0===o?void 0:o[0])&&void 0!==e?e:t;this._isZoomed=0!==i||100!==r,this._zoomRatio=(r-i)/100})),this.chart.on("click",(t=>{(0,u.B)(this,"chart-click",t)})),null!==(i=this.options)&&void 0!==i&&i.dataZoom||this.chart.getZr().on("dblclick",this._handleClickZoom),this._isTouchDevice&&this.chart.getZr().on("click",(t=>{t.zrByTouch&&(this._lastTapTime&&Date.now()-this._lastTapTime<M?this._handleClickZoom(t):this._lastTapTime=Date.now())}));const s=(0,x.r)((null===(r=this.options)||void 0===r?void 0:r.legend)||[])[0];Object.entries((null==s?void 0:s.selected)||{}).forEach((([t,e])=>{!1===e&&this._hiddenDatasets.add(t)})),this.chart.setOption(Object.assign(Object.assign({},this._createOptions()),{},{series:this._getSeries()}))}finally{this._loading=!1}}_getDataZoomConfig(){var t,e,o,i,r,a;const s=null!==(t=null===(e=this.options)||void 0===e||null===(e=e.xAxis)||void 0===e?void 0:e[0])&&void 0!==t?t:null===(o=this.options)||void 0===o?void 0:o.xAxis,n=null!==(i=null===(r=this.options)||void 0===r||null===(r=r.yAxis)||void 0===r?void 0:r[0])&&void 0!==i?i:null===(a=this.options)||void 0===a?void 0:a.yAxis;if("value"!==(null==s?void 0:s.type)||"category"!==(null==n?void 0:n.type))return{id:"dataZoom",type:"inside",orient:"horizontal",filterMode:"none",moveOnMouseMove:!this._isTouchDevice||this._isZoomed,preventDefaultMouseMove:!this._isTouchDevice||this._isZoomed,zoomLock:!this._isTouchDevice&&!this._modifierPressed}}_createOptions(){var t,e,o;let i=null===(t=this.options)||void 0===t?void 0:t.xAxis;i&&(i=Array.isArray(i)?i:[i],i=i.map((t=>{if("time"!==t.type||!1===t.show)return t;t.min&&(this._minutesDifference=(0,n.X)(t.max||new Date,t.min));const e=this._minutesDifference/60/24;let o;return e&&(o=e>=89?24192e5:e>2?864e5:void 0),Object.assign(Object.assign({axisLine:{show:!1},splitLine:{show:!0}},t),{},{axisLabel:Object.assign({formatter:this._formatTimeLabel,rich:{bold:{fontWeight:"bold"}},hideOverlap:!0},t.axisLabel),minInterval:o})})));let r=null===(e=this.options)||void 0===e?void 0:e.legend;r&&(r=(0,x.r)(r).map((t=>"custom"===t.type?{show:!1}:t)));const a=Object.assign(Object.assign({animation:!this._reducedMotion,darkMode:null!==(o=this._themes.darkMode)&&void 0!==o&&o,aria:{show:!0},dataZoom:this._getDataZoomConfig(),toolbox:{top:1/0,left:1/0,feature:{dataZoom:{show:!0,yAxisIndex:!1,filterMode:"none"}},iconStyle:{opacity:0}}},this.options),{},{legend:r,xAxis:i});if(window.matchMedia("all and (max-width: 450px), all and (max-height: 500px)").matches&&a.tooltip){const t=Array.isArray(a.tooltip)?a.tooltip:[a.tooltip];t.forEach((t=>{t.confine=!0,t.appendTo=void 0,t.triggerOn="click"})),a.tooltip=t}return a}_createTheme(){const t=getComputedStyle(this);return{color:(0,p.o9)(t),backgroundColor:"transparent",textStyle:{color:t.getPropertyValue("--primary-text-color"),fontFamily:"Roboto, Noto, sans-serif"},title:{textStyle:{color:t.getPropertyValue("--primary-text-color")},subtextStyle:{color:t.getPropertyValue("--secondary-text-color")}},line:{lineStyle:{width:1.5},symbolSize:1,symbol:"circle",smooth:!1},bar:{itemStyle:{barBorderWidth:1.5}},graph:{label:{color:t.getPropertyValue("--primary-text-color"),textBorderColor:t.getPropertyValue("--primary-background-color"),textBorderWidth:2}},categoryAxis:{axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!1,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},logAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},timeAxis:{axisLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisTick:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},axisLabel:{show:!0,color:t.getPropertyValue("--primary-text-color")},splitLine:{show:!0,lineStyle:{color:t.getPropertyValue("--divider-color")}},splitArea:{show:!1,areaStyle:{color:[t.getPropertyValue("--divider-color")+"3F",t.getPropertyValue("--divider-color")+"7F"]}}},legend:{textStyle:{color:t.getPropertyValue("--primary-text-color")},inactiveColor:t.getPropertyValue("--disabled-text-color"),pageIconColor:t.getPropertyValue("--primary-text-color"),pageIconInactiveColor:t.getPropertyValue("--disabled-text-color"),pageTextStyle:{color:t.getPropertyValue("--secondary-text-color")}},tooltip:{backgroundColor:t.getPropertyValue("--card-background-color"),borderColor:t.getPropertyValue("--divider-color"),textStyle:{color:t.getPropertyValue("--primary-text-color"),fontSize:12},axisPointer:{lineStyle:{color:t.getPropertyValue("--info-color")},crossStyle:{color:t.getPropertyValue("--info-color")}},extraCssText:"direction:"+t.getPropertyValue("--direction")+";margin-inline-start:3px;margin-inline-end:8px;"},timeline:{}}}_getSeries(){var t,e,o,i,r,a;const s=null!==(t=null===(e=this.options)||void 0===e||null===(e=e.xAxis)||void 0===e?void 0:e[0])&&void 0!==t?t:null===(o=this.options)||void 0===o?void 0:o.xAxis,n=null!==(i=null===(r=this.options)||void 0===r||null===(r=r.yAxis)||void 0===r?void 0:r[0])&&void 0!==i?i:null===(a=this.options)||void 0===a?void 0:a.yAxis;return(0,x.r)(this.data).map((t=>{var e;const o=this._hiddenDatasets.has(String(null!==(e=t.name)&&void 0!==e?e:t.id))?void 0:t.data;if(o&&"line"===t.type){if("log"===(null==n?void 0:n.type))return Object.assign(Object.assign({},t),{},{data:o.map((t=>Array.isArray(t)?[t[0],"number"!=typeof t[1]||t[1]>0?t[1]:null,...t.slice(2)]:t))});if("minmax"===t.sampling){const e=null!=s&&s.min&&"number"==typeof s.min?s.min:void 0,i=null!=s&&s.max&&"number"==typeof s.max?s.max:void 0;return Object.assign(Object.assign({},t),{},{sampling:void 0,data:(0,_.W)(o,this.clientWidth,e,i)})}}return Object.assign(Object.assign({},t),{},{data:o})}))}_getDefaultHeight(){return Math.max(this.clientWidth/2,200)}_setChartOptions(t){if(!this.chart)return;if(!this._originalZrFlush){if((0,x.r)(this.data).reduce(((t,e)=>t+(e.data||[]).length),0)>1e4){const t=this.chart.getZr();this._originalZrFlush=t.flush,t.flush=()=>{setTimeout((()=>{var e;null===(e=this._originalZrFlush)||void 0===e||e.call(t)}),5)}}}const e=t.series?["series"]:[];this.chart.setOption(t,{replaceMerge:e})}_handleZoomReset(){var t;null===(t=this.chart)||void 0===t||t.dispatchAction({type:"dataZoom",start:0,end:100})}_legendClick(t){var e;if(!this.chart)return;const o=null===(e=t.currentTarget)||void 0===e?void 0:e.name;this._hiddenDatasets.has(o)?(this._hiddenDatasets.delete(o),(0,u.B)(this,"dataset-unhidden",{name:o})):(this._hiddenDatasets.add(o),(0,u.B)(this,"dataset-hidden",{name:o})),this.requestUpdate("_hiddenDatasets")}_toggleExpandedLegend(){this.expandLegend=!this.expandLegend,setTimeout((()=>{var t;null===(t=this.chart)||void 0===t||t.resize()}))}constructor(...t){super(...t),this.data=[],this._isZoomed=!1,this._zoomRatio=1,this._minutesDifference=1440,this._hiddenDatasets=new Set,this._modifierPressed=!1,this._isTouchDevice="ontouchstart"in window,this._resizeController=new s.Z(this,{callback:()=>{var t;return null===(t=this.chart)||void 0===t?void 0:t.resize()}}),this._loading=!1,this._reducedMotion=!1,this._listeners=[],this._formatTimeLabel=t=>(0,y.t)(t,this.hass.locale,this.hass.config,this._minutesDifference*this._zoomRatio),this._handleClickZoom=t=>{if(!this.chart)return;const e=this._isZoomed?[0,100]:[t.offsetX/this.chart.getWidth()*100-15,t.offsetX/this.chart.getWidth()*100+15];this.chart.dispatchAction({type:"dataZoom",start:e[0],end:e[1]})}}}T.styles=(0,l.iv)(V||(V=P`:host{display:block;position:relative;letter-spacing:normal}.container{display:flex;flex-direction:column;position:relative}.container.has-height{max-height:var(--chart-max-height,350px)}.chart-container{width:100%;max-height:var(--chart-max-height,350px)}.has-height .chart-container{flex:1}.chart{height:100%;width:100%}.chart-controls{position:absolute;top:16px;right:4px;display:flex;flex-direction:column;gap:4px}.chart-controls.small{top:0;flex-direction:row}.chart-controls ::slotted(ha-icon-button),.chart-controls ha-icon-button{background:var(--card-background-color);border-radius:4px;--mdc-icon-button-size:32px;color:var(--primary-color);border:1px solid var(--divider-color)}.chart-controls.small ::slotted(ha-icon-button),.chart-controls.small ha-icon-button{--mdc-icon-button-size:22px;--mdc-icon-size:16px}.chart-controls ::slotted(ha-icon-button.inactive),.chart-controls ha-icon-button.inactive{color:var(--state-inactive-color)}.chart-legend{max-height:60%;overflow-y:auto;padding:12px 0 0;font-size:var(--ha-font-size-s);color:var(--primary-text-color)}.chart-legend ul{margin:0;padding:0;display:flex;flex-wrap:wrap;justify-content:center;align-items:center;gap:8px}.chart-legend li{height:24px;cursor:pointer;display:inline-flex;align-items:center;padding:0 2px;box-sizing:border-box;overflow:hidden}.chart-legend.multiple-items li{max-width:220px}.chart-legend .hidden{color:var(--secondary-text-color)}.chart-legend .label{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.chart-legend .bullet{border-width:1px;border-style:solid;border-radius:50%;display:block;height:16px;width:16px;margin-right:4px;flex-shrink:0;box-sizing:border-box;margin-inline-end:4px;margin-inline-start:initial;direction:var(--direction)}.chart-legend .hidden .bullet{border-color:var(--secondary-text-color)!important;background-color:transparent!important}ha-assist-chip{height:100%;--_label-text-weight:500;--_leading-space:8px;--_trailing-space:8px;--_icon-label-space:4px}`)),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"hass",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"data",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],T.prototype,"options",void 0),(0,r.__decorate)([(0,d.Cb)({type:String})],T.prototype,"height",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:"expand-legend",type:Boolean})],T.prototype,"expandLegend",void 0),(0,r.__decorate)([(0,d.Cb)({attribute:"small-controls",type:Boolean})],T.prototype,"smallControls",void 0),(0,r.__decorate)([(0,d.SB)(),(0,a.F_)({context:m.LW,subscribe:!0})],T.prototype,"_themes",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_isZoomed",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_zoomRatio",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_minutesDifference",void 0),(0,r.__decorate)([(0,d.SB)()],T.prototype,"_hiddenDatasets",void 0),T=(0,r.__decorate)([(0,d.Mo)("ha-chart-base")],T),i()}catch(b){i(b)}}))},2913:function(t,e,o){o.d(e,{V:()=>i});o(64455),o(32192);const i=/Mac/i.test(navigator.userAgent)}}]);
//# sourceMappingURL=68973.5ecf03973a8d818c.js.map