"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["71352"],{91320:function(t,e,i){i.d(e,{Ec:()=>u,Mo:()=>f,Oj:()=>_,UK:()=>d,av:()=>v,s_:()=>h});i(39710),i(26847),i(2394),i(44438),i(81738),i(33480),i(94814),i(6989),i(93190),i(72489),i(87799),i(67886),i(65451),i(46015),i(38334),i(94880),i(75643),i(29761),i(56389),i(27530);var n=i(45332),s=i(86339),o=i(7334),r=i(16230);function a(t,e){var i;if((0,o.T)(e)&&t.states[e])return null===(i=t.states[e])||void 0===i?void 0:i.state}function c(t,e){var i;const s=t.entity&&e.states[t.entity]?e.states[t.entity].state:r.lz;let o=null!==(i=t.state)&&void 0!==i?i:t.state_not;if(Array.isArray(o)){const t=o.map((t=>a(e,t))).filter((t=>void 0!==t));o=[...o,...t]}else if("string"==typeof o){const t=a(e,o);o=[o],t&&o.push(t)}return null!=t.state?(0,n.r)(o).includes(s):!(0,n.r)(o).includes(s)}function u(t,e){return t.every((t=>{if("condition"in t)switch(t.condition){case"screen":return!!(i=t).media_query&&matchMedia(i.media_query).matches;case"user":return function(t,e){var i;return!(!t.users||null===(i=e.user)||void 0===i||!i.id)&&t.users.includes(e.user.id)}(t,e);case"numeric_state":return function(t,e){var i;const n=null===(i=t.entity?e.states[t.entity]:void 0)||void 0===i?void 0:i.state;let s=t.above,o=t.below;var r,c;"string"==typeof s&&(s=null!==(r=a(e,s))&&void 0!==r?r:s),"string"==typeof o&&(o=null!==(c=a(e,o))&&void 0!==c?c:o);const u=Number(n),d=Number(s),l=Number(o);return!isNaN(u)&&(null==t.above||isNaN(d)||d<u)&&(null==t.below||isNaN(l)||l>u)}(t,e);case"and":return function(t,e){return!t.conditions||u(t.conditions,e)}(t,e);case"or":return function(t,e){return!t.conditions||t.conditions.some((t=>u([t],e)))}(t,e);default:return c(t,e)}var i;return c(t,e)}))}function d(t){const e=new Set;for(const r of t)if("numeric_state"===r.condition)r.entity&&e.add(r.entity),"string"==typeof r.above&&(0,o.T)(r.above)&&e.add(r.above),"string"==typeof r.below&&(0,o.T)(r.below)&&e.add(r.below);else if("state"===r.condition){var i,s;r.entity&&e.add(r.entity),[...null!==(i=(0,n.r)(r.state))&&void 0!==i?i:[],...null!==(s=(0,n.r)(r.state_not))&&void 0!==s?s:[]].forEach((t=>{t&&(0,o.T)(t)&&e.add(t)}))}else if("conditions"in r&&r.conditions)return new Set([...e,...d(r.conditions)]);return e}function l(t){return null!=t.entity&&(null!=t.state||null!=t.state_not)}function h(t){return t.every((t=>{if("condition"in t)switch(t.condition){case"screen":return null!=t.media_query;case"user":return function(t){return null!=t.users}(t);case"numeric_state":return function(t){return null!=t.entity&&(null!=t.above||null!=t.below)}(t);case"and":case"or":return function(t){return null!=t.conditions}(t);default:return l(t)}return l(t)}))}function f(t,e){return"conditions"in t&&t.conditions?Object.assign(Object.assign({},t),{},{conditions:t.conditions.map((t=>f(t,e)))}):"state"===t.condition||"numeric_state"===t.condition?Object.assign({entity:e},t):t}function _(t){return t.reduce(((t,e)=>("conditions"in e&&e.conditions&&t.push(..._(e.conditions)),"screen"===e.condition&&e.media_query&&t.push(e.media_query),t)),[])}function v(t,e){return _(t).map((t=>(0,s.K)(t,(t=>{e(t)}))))}},20546:function(t,e,i){i.d(e,{g:()=>c});i(44776),i(40777),i(26847),i(81738),i(94814),i(22960),i(27530);var n=i(73742),s=i(59048),o=i(7616),r=i(65829),a=i(91320);class c extends s.fl{createRenderRoot(){return this}validateConfig(t){if(!t.conditions)throw new Error("No conditions configured");if(!Array.isArray(t.conditions))throw new Error("Conditions need to be an array");if(!(0,a.s_)(t.conditions))throw new Error("Conditions are invalid");this.lastChild&&this.removeChild(this.lastChild),this._config=t}disconnectedCallback(){super.disconnectedCallback(),this._clearMediaQueries()}connectedCallback(){super.connectedCallback(),this._listenMediaQueries(),this._updateVisibility()}_clearMediaQueries(){this._listeners.forEach((t=>t())),this._listeners=[]}_listenMediaQueries(){if(!this._config||!this.hass)return;const t=this._config.conditions.filter((t=>"condition"in t)),e=(0,a.Oj)(t);if((0,r.v)(e,this._mediaQueries))return;this._clearMediaQueries();const i=this._config.conditions,n=1===i.length&&"condition"in i[0]&&"screen"===i[0].condition&&!!i[0].media_query;this._listeners=(0,a.av)(t,(t=>{n?this.setVisibility(t):this._updateVisibility()}))}update(t){super.update(t),(t.has("_element")||t.has("_config")||t.has("hass")||t.has("preview"))&&(this._listenMediaQueries(),this._updateVisibility())}_updateVisibility(){if(!this._element||!this.hass||!this._config)return;this._element.preview=this.preview;const t=(0,a.Ec)(this._config.conditions,this.hass);this.setVisibility(t)}setVisibility(t){if(!this._element||!this.hass)return;const e=this.preview||t;this.hidden!==!e&&(this.toggleAttribute("hidden",!e),this.style.setProperty("display",e?"":"none")),e?(this._element.hass=this.hass,this._element.parentElement||this.appendChild(this._element)):this._element.parentElement&&this.removeChild(this._element)}constructor(...t){super(...t),this.preview=!1,this._listeners=[],this._mediaQueries=[]}}(0,n.__decorate)([(0,o.Cb)({attribute:!1})],c.prototype,"hass",void 0),(0,n.__decorate)([(0,o.Cb)({type:Boolean})],c.prototype,"preview",void 0),(0,n.__decorate)([(0,o.SB)()],c.prototype,"_config",void 0),c=(0,n.__decorate)([(0,o.Mo)("hui-conditional-base")],c)},13299:function(t,e,i){i.a(t,(async function(t,n){try{i.r(e);i(40777),i(87799);var s=i(73742),o=i(7616),r=i(20546),a=i(9874),c=t([a]);a=(c.then?(await c)():c)[0];class u extends r.g{setConfig(t){if(this.validateConfig(t),!t.row)throw new Error("No row configured");this._element=(0,a.m)(t.state_color?Object.assign({state_color:!0},t.row):t.row)}}u=(0,s.__decorate)([(0,o.Mo)("hui-conditional-row")],u),n()}catch(u){n(u)}}))}}]);
//# sourceMappingURL=71352.682dace62a1cbb36.js.map