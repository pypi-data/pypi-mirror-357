"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["11702"],{7214:function(t,e,s){s.d(e,{Cj:()=>u,F7:()=>r,Hs:()=>k,Kd:()=>g,Kj:()=>p,Nw:()=>f,PA:()=>a,Py:()=>d,Qm:()=>w,Z0:()=>C,_Y:()=>_,_m:()=>n,dL:()=>c,dO:()=>v,hN:()=>l,h_:()=>h,j2:()=>S,q6:()=>m,uR:()=>o});s(39710),s(26847),s(81738),s(72489),s(56389),s(27530);var i=s(15459),r=function(t){return t[t.NONE=0]="NONE",t[t.ARITHMETIC=1]="ARITHMETIC",t[t.CIRCULAR=2]="CIRCULAR",t}({});const a=99387==s.j?["entity_not_recorded","entity_no_longer_recorded","state_class_removed","units_changed","mean_type_changed","no_state"]:null,n=t=>t.sendMessagePromise({type:"recorder/info"}),o=(t,e)=>t.callWS({type:"recorder/list_statistic_ids",statistic_type:e}),d=(t,e)=>t.callWS({type:"recorder/get_statistics_metadata",statistic_ids:e}),c=(t,e,s,i,r="hour",a,n)=>t.callWS({type:"recorder/statistics_during_period",start_time:e.toISOString(),end_time:null==s?void 0:s.toISOString(),statistic_ids:i,period:r,units:a,types:n}),_=(t,e,s,i)=>t.callWS({type:"recorder/statistic_during_period",statistic_id:e,units:i,fixed_period:s.fixed_period?{start_time:s.fixed_period.start instanceof Date?s.fixed_period.start.toISOString():s.fixed_period.start,end_time:s.fixed_period.end instanceof Date?s.fixed_period.end.toISOString():s.fixed_period.end}:void 0,calendar:s.calendar,rolling_window:s.rolling_window}),h=t=>t.callWS({type:"recorder/validate_statistics"}),u=(t,e,s)=>t.callWS({type:"recorder/update_statistics_metadata",statistic_id:e,unit_of_measurement:s}),l=(t,e)=>t.callWS({type:"recorder/clear_statistics",statistic_ids:e}),p=t=>{let e=null;if(!t)return null;for(const s of t)null!==s.change&&void 0!==s.change&&(null===e?e=s.change:e+=s.change);return e},m=(t,e)=>{let s=null;for(const i of e){if(!(i in t))continue;const e=p(t[i]);null!==e&&(null===s?s=e:s+=e)}return s},f=(t,e)=>t.some((t=>void 0!==t[e]&&null!==t[e])),b=["mean","min","max"],y=["sum","state","change"],C=(t,e)=>!(!b.includes(e)||0===t.mean_type)||!(!y.includes(e)||!t.has_sum),S=(t,e,s,i,r)=>{const a=new Date(s).toISOString();return t.callWS({type:"recorder/adjust_sum_statistics",statistic_id:e,start_time:a,adjustment:i,adjustment_unit_of_measurement:r})},g=(t,e,s)=>{const r=t.states[e];return r?(0,i.C)(r):(null==s?void 0:s.name)||e},v=(t,e,s)=>{let i;var r;e&&(i=null===(r=t.states[e])||void 0===r?void 0:r.attributes.unit_of_measurement);return void 0===i?null==s?void 0:s.statistics_unit_of_measurement:i},k=t=>t.includes(":"),w=t=>t.callWS({type:"recorder/update_statistics_issues"})},6291:function(t,e,s){s.d(e,{f:()=>a});s(39710),s(26847),s(81738),s(72489),s(1455),s(56389),s(27530);var i=s(73742),r=s(7616);const a=t=>{class e extends t{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const t=this.__unsubs.pop();t instanceof Promise?t.then((t=>t())):t()}this.__unsubs=void 0}}updated(t){if(super.updated(t),t.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const e of t.keys())if(this.hassSubscribeRequiredHostProps.includes(e))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var t;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(t=this.hassSubscribeRequiredHostProps)&&void 0!==t&&t.some((t=>void 0===this[t]))||(this.__unsubs=this.hassSubscribe())}}return(0,i.__decorate)([(0,r.Cb)({attribute:!1})],e.prototype,"hass",void 0),e}},87079:function(t,e,s){s.a(t,(async function(t,i){try{s.r(e),s.d(e,{HuiEnergyCompareCard:()=>S});s(26847),s(27530);var r=s(73742),a=s(7722),n=s(56858),o=s(59048),d=s(7616),c=s(40142),_=s(6640),h=s(6291),u=s(93647),l=(s(12942),s(39884)),p=t([c,_]);[c,_]=p.then?(await p)():p;let m,f,b,y,C=t=>t;class S extends((0,h.f)(o.oi)){getCardSize(){return 1}setConfig(t){this._config=t}hassSubscribe(){return[(0,_.UB)(this.hass,{key:this._config.collection_key}).subscribe((t=>this._update(t)))]}shouldUpdate(t){return(0,u.SN)(this,t)||t.size>1||!t.has("hass")}render(){if(!this._startCompare||!this._endCompare)return o.Ld;const t=(0,a.j)(this._endCompare,this._startCompare);return(0,o.dy)(m||(m=C` <ha-alert dismissable @alert-dismissed-clicked="${0}"> ${0} </ha-alert> `),this._stopCompare,this.hass.localize("ui.panel.energy.compare.info",{start:(0,o.dy)(f||(f=C`<b>${0}${0}</b>`),(0,c.p6)(this._start,this.hass.locale,this.hass.config),t>0?` -\n          ${(0,c.p6)(this._end||(0,n.i)(new Date),this.hass.locale,this.hass.config)}`:""),end:(0,o.dy)(b||(b=C`<b>${0}${0}</b>`),(0,c.p6)(this._startCompare,this.hass.locale,this.hass.config),t>0?` -\n          ${(0,c.p6)(this._endCompare,this.hass.locale,this.hass.config)}`:"")}))}_update(t){this._start=t.start,this._end=t.end,this._startCompare=t.startCompare,this._endCompare=t.endCompare;const e=this.hidden;this.hidden=!this._startCompare,e!==this.hidden&&(0,l.B)(this,"card-visibility-changed")}_stopCompare(){const t=(0,_.UB)(this.hass,{key:this._config.collection_key});t.setCompare(!1),t.refresh()}constructor(...t){super(...t),this.hidden=!0,this.connectedWhileHidden=!0,this.hassSubscribeRequiredHostProps=["_config"]}}S.styles=(0,o.iv)(y||(y=C`mwc-button{width:max-content}`)),(0,r.__decorate)([(0,d.Cb)({attribute:!1})],S.prototype,"hass",void 0),(0,r.__decorate)([(0,d.SB)()],S.prototype,"_config",void 0),(0,r.__decorate)([(0,d.SB)()],S.prototype,"_start",void 0),(0,r.__decorate)([(0,d.SB)()],S.prototype,"_end",void 0),(0,r.__decorate)([(0,d.SB)()],S.prototype,"_startCompare",void 0),(0,r.__decorate)([(0,d.SB)()],S.prototype,"_endCompare",void 0),(0,r.__decorate)([(0,d.Cb)({type:Boolean,reflect:!0})],S.prototype,"hidden",void 0),S=(0,r.__decorate)([(0,d.Mo)("hui-energy-compare-card")],S),i()}catch(m){i(m)}}))}}]);
//# sourceMappingURL=11702.ed263a91d7c64066.js.map