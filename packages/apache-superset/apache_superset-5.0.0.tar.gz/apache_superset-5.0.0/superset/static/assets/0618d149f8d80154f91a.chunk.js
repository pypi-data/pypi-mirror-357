(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3608],{31746:(e,t,n)=>{var a={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,991],"./langDE.js":[87020,991],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,1652],"./langPL.js":[39271,1652],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function l(e){if(!n.o(a,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],l=t[0];return Promise.all(t.slice(1).map(n.e)).then((()=>n(l)))}l.keys=()=>Object.keys(a),l.id=31746,e.exports=l},33608:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>g,extractTreePathInfo:()=>i});var a=n(96540),l=n(7349),r=n(32142),s=n(86444),c=n(85867),o=n(71194),u=n(2445);const i=e=>(null!=e?e:[]).map((e=>(null==e?void 0:e.name)||"")).filter((e=>""!==e));function g(e){const{height:t,width:n,echartOptions:g,setDataMask:h,labelMap:d,selectedValues:f,formData:p,onContextMenu:v,refs:j,emitCrossFilters:m,coltypeMapping:E}=e,{columns:I}=p,b=(0,a.useCallback)((e=>{const t=i(e),n=t.join(","),a=Object.values(f);let l;l=a.includes(n)?a.filter((e=>e!==n)):[n];const r=l.map((e=>d[e]));return{dataMask:{extraFormData:{filters:0!==l.length&&I?I.slice(0,t.length).map(((e,t)=>{const n=r.map((e=>e[t]));return null==n?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:n}})):[]},filterState:{value:r.length?r:null,selectedValues:l.length?l:null}},isCurrentValueSelected:a.includes(n)}}),[I,d,f]),w=(0,a.useCallback)((e=>{m&&null!=I&&I.length&&h(b(e).dataMask)}),[m,h,b]),O={click:e=>{const{treePathInfo:t}=e;w(t)},contextmenu:async e=>{if(v){e.event.stop();const{data:t,treePathInfo:n}=e,{records:a}=t,c=i(e.treePathInfo),u=e.event.event,g=[],h=[];if(null!=I&&I.length){c.forEach(((e,t)=>g.push({col:I[t],op:"==",val:a[t],formattedVal:e})));const e=c[c.length-1];h.push({col:I[c.length-1],op:"==",val:e,formattedVal:(0,o.Wy)(e,{timeFormatter:(0,l.mo)(p.dateFormat),numberFormatter:(0,r.gV)(p.numberFormat),coltype:null==E?void 0:E[(0,s.A)(I[c.length-1])]})})}v(u.clientX,u.clientY,{drillToDetail:g,crossFilter:null!=I&&I.length?b(n):void 0,drillBy:{filters:h,groupbyFieldName:"columns"}})}}};return(0,u.Y)(c.A,{refs:j,height:t,width:n,echartOptions:g,eventHandlers:O,selectedValues:f})}},85867:(e,t,n)=>{"use strict";n.d(t,{A:()=>M});var a=n(96540),l=n(61225),r=n(96453),s=n(3087),c=n(53080),o=n(92351),u=n(42900),i=n(51719),g=n(74508),h=n(61030),d=n(45567),f=n(49714),p=n(11734),v=n(80491),j=n(25652),m=n(73900),E=n(32003),I=n(22329),b=n(31441),w=n(12458),O=n(39539),y=n(5553),F=n(45967),R=n(40830),k=n(45620),T=n(39838),C=n(42998),S=n(69380),V=n(25384),A=n(29022),H=n(28540),P=n(35278),U=n(51536),L=n(2445);const N=r.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function D({width:e,height:t,echartOptions:r,eventHandlers:s,zrEventHandlers:u,selectedValues:i={},refs:g},h){const d=(0,a.useRef)(null);g&&(g.divRef=d);const[f,p]=(0,a.useState)(!1),v=(0,a.useRef)(),j=(0,a.useMemo)((()=>Object.keys(i)||[]),[i]),m=(0,a.useRef)([]);(0,a.useImperativeHandle)(h,(()=>({getEchartInstance:()=>v.current})));const E=(0,l.d4)((e=>{var t,n;return null!=(t=null==e||null==(n=e.common)?void 0:n.locale)?t:U.Xn})).toUpperCase(),I=(0,a.useCallback)((({width:e,height:t})=>{v.current&&v.current.resize({width:e,height:t})}),[]);return(0,a.useEffect)((()=>{(async e=>{var t;let a;try{a=await n(31746)(`./lang${e}`)}catch(t){console.error(`Locale ${e} not supported in ECharts`,t)}return null==(t=a)?void 0:t.default})(E).then((e=>{e&&(0,c.E)(E,e),d.current&&(v.current||(v.current=(0,o.Ts)(d.current,null,{locale:E})),p(!0))}))}),[E]),(0,a.useEffect)((()=>{var n;f&&(Object.entries(s||{}).forEach((([e,t])=>{var n,a;null==(n=v.current)||n.off(e),null==(a=v.current)||a.on(e,t)})),Object.entries(u||{}).forEach((([e,t])=>{var n,a;null==(n=v.current)||n.getZr().off(e),null==(a=v.current)||a.getZr().on(e,t)})),null==(n=v.current)||n.setOption(r,!0),I({width:e,height:t}))}),[f,r,s,u]),(0,a.useEffect)((()=>()=>{var e;return null==(e=v.current)?void 0:e.dispose()}),[]),(0,a.useEffect)((()=>{v.current&&(v.current.dispatchAction({type:"downplay",dataIndex:m.current.filter((e=>!j.includes(e)))}),j.length&&v.current.dispatchAction({type:"highlight",dataIndex:j}),m.current=j)}),[j,v.current]),(0,a.useLayoutEffect)((()=>{I({width:e,height:t})}),[e,t,I]),(0,L.Y)(N,{ref:d,height:t,width:e})}(0,s.Y)([O.a,u.a,i.a,g.a,h.a,d.a,f.a,p.a,v.a,j.a,m.a,E.a,I.a,b.a,w.a,y.a,F.a,R.a,k.a,T.a,C.a,S.a,V.a,A.a,H.a,P._]);const M=(0,a.forwardRef)(D)}}]);