(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[570],{31746:(e,t,a)=>{var n={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,991],"./langDE.js":[87020,991],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,1652],"./langPL.js":[39271,1652],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function l(e){if(!a.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],l=t[0];return Promise.all(t.slice(1).map(a.e)).then((()=>a(l)))}l.keys=()=>Object.keys(n),l.id=31746,e.exports=l},40570:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>h});var n=a(7349),l=a(32142),r=a(86444),s=a(96540),u=a(85867),c=a(51536),o=a(52425),i=a(71194),g=a(2445);function h({echartOptions:e,emitCrossFilters:t,groupby:a,height:h,labelMap:d,onContextMenu:f,refs:p,setDataMask:v,selectedValues:j,width:m,formData:b,coltypeMapping:E}){const w=(0,s.useCallback)(((e,t)=>{if(null!=e&&e.children)return;const{treePath:n}=(0,o.Rq)(t),l=n.join(","),r=Object.values(j);let s;s=r.includes(l)?r.filter((e=>e!==l)):[l];const u=s.map((e=>d[e]));return{dataMask:{extraFormData:{filters:0===s.length?[]:a.map(((e,t)=>{const a=u.map((e=>e[t]));return null==a?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:a}}))},filterState:{value:u.length?u:null,selectedValues:s.length?s:null}},isCurrentValueSelected:r.includes(l)}}),[a,d,j]),y=(0,s.useCallback)(((e,n)=>{var l;if(!t||0===a.length)return;const r=null==(l=w(e,n))?void 0:l.dataMask;r&&v(r)}),[t,w,v]),I={click:e=>{const{data:t,treePathInfo:a}=e;y(t,a)},contextmenu:async e=>{if(f){e.event.stop();const{data:t,treePathInfo:s}=e,{treePath:u}=(0,o.Rq)(s);if(u.length>0){const o=e.event.event,g=[],h=[];u.forEach(((e,t)=>{const s="null"===e?c.mu:e;g.push({col:a[t],op:"==",val:s,formattedVal:e}),h.push({col:a[t],op:"==",val:s,formattedVal:(0,i.Wy)(s,{timeFormatter:(0,n.mo)(b.dateFormat),numberFormatter:(0,l.gV)(b.numberFormat),coltype:null==E?void 0:E[(0,r.A)(a[t])]})})})),f(o.clientX,o.clientY,{drillToDetail:g,crossFilter:a.length>0?w(t,s):void 0,drillBy:{filters:h,groupbyFieldName:"groupby"}})}}}};return(0,g.Y)(u.A,{refs:p,height:h,width:m,echartOptions:e,eventHandlers:I,selectedValues:j})}},85867:(e,t,a)=>{"use strict";a.d(t,{A:()=>M});var n=a(96540),l=a(61225),r=a(96453),s=a(3087),u=a(53080),c=a(92351),o=a(42900),i=a(51719),g=a(74508),h=a(61030),d=a(45567),f=a(49714),p=a(11734),v=a(80491),j=a(25652),m=a(73900),b=a(32003),E=a(22329),w=a(31441),y=a(12458),I=a(39539),R=a(5553),O=a(45967),F=a(40830),k=a(45620),C=a(39838),T=a(42998),S=a(69380),V=a(25384),A=a(29022),H=a(28540),P=a(35278),U=a(51536),L=a(2445);const N=r.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function D({width:e,height:t,echartOptions:r,eventHandlers:s,zrEventHandlers:o,selectedValues:i={},refs:g},h){const d=(0,n.useRef)(null);g&&(g.divRef=d);const[f,p]=(0,n.useState)(!1),v=(0,n.useRef)(),j=(0,n.useMemo)((()=>Object.keys(i)||[]),[i]),m=(0,n.useRef)([]);(0,n.useImperativeHandle)(h,(()=>({getEchartInstance:()=>v.current})));const b=(0,l.d4)((e=>{var t,a;return null!=(t=null==e||null==(a=e.common)?void 0:a.locale)?t:U.Xn})).toUpperCase(),E=(0,n.useCallback)((({width:e,height:t})=>{v.current&&v.current.resize({width:e,height:t})}),[]);return(0,n.useEffect)((()=>{(async e=>{var t;let n;try{n=await a(31746)(`./lang${e}`)}catch(t){console.error(`Locale ${e} not supported in ECharts`,t)}return null==(t=n)?void 0:t.default})(b).then((e=>{e&&(0,u.E)(b,e),d.current&&(v.current||(v.current=(0,c.Ts)(d.current,null,{locale:b})),p(!0))}))}),[b]),(0,n.useEffect)((()=>{var a;f&&(Object.entries(s||{}).forEach((([e,t])=>{var a,n;null==(a=v.current)||a.off(e),null==(n=v.current)||n.on(e,t)})),Object.entries(o||{}).forEach((([e,t])=>{var a,n;null==(a=v.current)||a.getZr().off(e),null==(n=v.current)||n.getZr().on(e,t)})),null==(a=v.current)||a.setOption(r,!0),E({width:e,height:t}))}),[f,r,s,o]),(0,n.useEffect)((()=>()=>{var e;return null==(e=v.current)?void 0:e.dispose()}),[]),(0,n.useEffect)((()=>{v.current&&(v.current.dispatchAction({type:"downplay",dataIndex:m.current.filter((e=>!j.includes(e)))}),j.length&&v.current.dispatchAction({type:"highlight",dataIndex:j}),m.current=j)}),[j,v.current]),(0,n.useLayoutEffect)((()=>{E({width:e,height:t})}),[e,t,E]),(0,L.Y)(N,{ref:d,height:t,width:e})}(0,s.Y)([I.a,o.a,i.a,g.a,h.a,d.a,f.a,p.a,v.a,j.a,m.a,b.a,E.a,w.a,y.a,R.a,O.a,F.a,k.a,C.a,T.a,S.a,V.a,A.a,H.a,P._]);const M=(0,n.forwardRef)(D)}}]);