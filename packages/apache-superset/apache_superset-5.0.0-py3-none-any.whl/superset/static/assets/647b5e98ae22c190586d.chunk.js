(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3784],{31746:(e,a,t)=>{var l={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,991],"./langDE.js":[87020,991],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,1652],"./langPL.js":[39271,1652],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function n(e){if(!t.o(l,e))return Promise.resolve().then((()=>{var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}));var a=l[e],n=a[0];return Promise.all(a.slice(1).map(t.e)).then((()=>t(n)))}n.keys=()=>Object.keys(l),n.id=31746,e.exports=n},93784:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var l=t(96540),n=t(58863),r=t(96627),s=t(7349),o=t(32142),u=t(86444),c=t(85867),i=t(71194),g=t(2445);function h({height:e,width:a,echartOptions:t,setDataMask:h,labelMap:d,labelMapB:p,groupby:f,groupbyB:m,selectedValues:v,formData:b,emitCrossFilters:j,seriesBreakdown:y,onContextMenu:E,onFocusedSeries:w,xValueFormatter:F,xAxis:I,refs:k,coltypeMapping:O}){const S=(0,l.useCallback)((e=>e<y),[y]),C=(0,l.useCallback)(((e,a)=>{const t=Object.values(v||{});let l;l=t.includes(e)?t.filter((a=>a!==e)):[e];const n=S(a)?f:m,r=S(a)?d:p,s=l.map((e=>null==r?void 0:r[e])).filter((e=>!!e));return{dataMask:{extraFormData:{filters:0===l.length?[]:[...n.map(((e,a)=>{const t=s.map((e=>e[a]));return null==t?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:t}}))]},filterState:{value:s.length?s:null,selectedValues:l.length?l:null}},isCurrentValueSelected:t.includes(e)}}),[f,m,S,d,p,v]),R=(0,l.useCallback)(((e,a)=>{const t=S(a);!j||t&&0===f.length||!t&&0===m.length||h(C(e,a).dataMask)}),[S,j,f.length,m.length,h,C]),T={click:e=>{const{seriesName:a,seriesIndex:t}=e;R(a,t)},mouseout:()=>{w(null)},mouseover:e=>{w(e.seriesName)},contextmenu:async e=>{if(E){e.event.stop();const{data:a,seriesName:t,seriesIndex:l}=e,c=e.event.event,g=[],h=[],v=S(l),j=[...e.name?[e.name]:[],...(v?d:p)[e.seriesName]||[]];a&&I.type===n.Gw.Time&&g.push({col:I.label===r.Tf?b.granularitySqla:I.label,grain:b.timeGrainSqla,op:"==",val:a[0],formattedVal:F(a[0])}),[...a&&I.type===n.Gw.Category?[I.label]:[],...v?b.groupby:b.groupbyB].forEach(((e,a)=>g.push({col:e,op:"==",val:j[a],formattedVal:String(j[a])}))),[...v?b.groupby:b.groupbyB].forEach(((e,a)=>h.push({col:e,op:"==",val:j[a],formattedVal:(0,i.Wy)(j[a],{timeFormatter:(0,s.mo)(b.dateFormat),numberFormatter:(0,o.gV)(b.numberFormat),coltype:null==O?void 0:O[(0,u.A)(e)]})})));const y=v&&f.length>0||!v&&m.length>0;E(c.clientX,c.clientY,{drillToDetail:g,crossFilter:y?C(t,l):void 0,drillBy:{filters:h,groupbyFieldName:v?"groupby":"groupby_b",adhocFilterFieldName:v?"adhoc_filters":"adhoc_filters_b"}})}}};return(0,g.Y)(c.A,{refs:k,height:e,width:a,echartOptions:t,eventHandlers:T,selectedValues:v})}},85867:(e,a,t)=>{"use strict";t.d(a,{A:()=>D});var l=t(96540),n=t(61225),r=t(96453),s=t(3087),o=t(53080),u=t(92351),c=t(42900),i=t(51719),g=t(74508),h=t(61030),d=t(45567),p=t(49714),f=t(11734),m=t(80491),v=t(25652),b=t(73900),j=t(32003),y=t(22329),E=t(31441),w=t(12458),F=t(39539),I=t(5553),k=t(45967),O=t(40830),S=t(45620),C=t(39838),R=t(42998),T=t(69380),N=t(25384),V=t(29022),A=t(28540),x=t(35278),H=t(51536),U=t(2445);const L=r.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function M({width:e,height:a,echartOptions:r,eventHandlers:s,zrEventHandlers:c,selectedValues:i={},refs:g},h){const d=(0,l.useRef)(null);g&&(g.divRef=d);const[p,f]=(0,l.useState)(!1),m=(0,l.useRef)(),v=(0,l.useMemo)((()=>Object.keys(i)||[]),[i]),b=(0,l.useRef)([]);(0,l.useImperativeHandle)(h,(()=>({getEchartInstance:()=>m.current})));const j=(0,n.d4)((e=>{var a,t;return null!=(a=null==e||null==(t=e.common)?void 0:t.locale)?a:H.Xn})).toUpperCase(),y=(0,l.useCallback)((({width:e,height:a})=>{m.current&&m.current.resize({width:e,height:a})}),[]);return(0,l.useEffect)((()=>{(async e=>{var a;let l;try{l=await t(31746)(`./lang${e}`)}catch(a){console.error(`Locale ${e} not supported in ECharts`,a)}return null==(a=l)?void 0:a.default})(j).then((e=>{e&&(0,o.E)(j,e),d.current&&(m.current||(m.current=(0,u.Ts)(d.current,null,{locale:j})),f(!0))}))}),[j]),(0,l.useEffect)((()=>{var t;p&&(Object.entries(s||{}).forEach((([e,a])=>{var t,l;null==(t=m.current)||t.off(e),null==(l=m.current)||l.on(e,a)})),Object.entries(c||{}).forEach((([e,a])=>{var t,l;null==(t=m.current)||t.getZr().off(e),null==(l=m.current)||l.getZr().on(e,a)})),null==(t=m.current)||t.setOption(r,!0),y({width:e,height:a}))}),[p,r,s,c]),(0,l.useEffect)((()=>()=>{var e;return null==(e=m.current)?void 0:e.dispose()}),[]),(0,l.useEffect)((()=>{m.current&&(m.current.dispatchAction({type:"downplay",dataIndex:b.current.filter((e=>!v.includes(e)))}),v.length&&m.current.dispatchAction({type:"highlight",dataIndex:v}),b.current=v)}),[v,m.current]),(0,l.useLayoutEffect)((()=>{y({width:e,height:a})}),[e,a,y]),(0,U.Y)(L,{ref:d,height:a,width:e})}(0,s.Y)([F.a,c.a,i.a,g.a,h.a,d.a,p.a,f.a,m.a,v.a,b.a,j.a,y.a,E.a,w.a,I.a,k.a,O.a,S.a,C.a,R.a,T.a,N.a,V.a,A.a,x._]);const D=(0,l.forwardRef)(M)}}]);