import{aI as r,aJ as X,aK as e,aL as re,aM as Z,aN as ae,aO as P,aP as le,aQ as ie,aR as U,aS as m,aT as K,aU as ne,aV as oe,aW as W,aX as q,aY as p,aZ as l,a_ as T,a$ as ce,b0 as se,b1 as de,b2 as he,b3 as fe,b4 as ue,b5 as me}from"./main.js";var xe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M296 250c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h384c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H296zm184 144H296c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h184c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8zm-48 458H208V148h560v320c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V108c0-17.7-14.3-32-32-32H168c-17.7 0-32 14.3-32 32v784c0 17.7 14.3 32 32 32h264c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm440-88H728v-36.6c46.3-13.8 80-56.6 80-107.4 0-61.9-50.1-112-112-112s-112 50.1-112 112c0 50.7 33.7 93.6 80 107.4V764H520c-8.8 0-16 7.2-16 16v152c0 8.8 7.2 16 16 16h352c8.8 0 16-7.2 16-16V780c0-8.8-7.2-16-16-16zM646 620c0-27.6 22.4-50 50-50s50 22.4 50 50-22.4 50-50 50-50-22.4-50-50zm180 266H566v-60h260v60z"}}]},name:"audit",theme:"outlined"},ge={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM416 702h-76V172c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v530h-76c-6.7 0-10.5 7.8-6.3 13l112 141.9a8 8 0 0012.6 0l112-141.9c4.1-5.2.4-13-6.3-13z"}}]},name:"sort-ascending",theme:"outlined"},pe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M839.6 433.8L749 150.5a9.24 9.24 0 00-8.9-6.5h-77.4c-4.1 0-7.6 2.6-8.9 6.5l-91.3 283.3c-.3.9-.5 1.9-.5 2.9 0 5.1 4.2 9.3 9.3 9.3h56.4c4.2 0 7.8-2.8 9-6.8l17.5-61.6h89l17.3 61.5c1.1 4 4.8 6.8 9 6.8h61.2c1 0 1.9-.1 2.8-.4 2.4-.8 4.3-2.4 5.5-4.6 1.1-2.2 1.3-4.7.6-7.1zM663.3 325.5l32.8-116.9h6.3l32.1 116.9h-71.2zm143.5 492.9H677.2v-.4l132.6-188.9c1.1-1.6 1.7-3.4 1.7-5.4v-36.4c0-5.1-4.2-9.3-9.3-9.3h-204c-5.1 0-9.3 4.2-9.3 9.3v43c0 5.1 4.2 9.3 9.3 9.3h122.6v.4L587.7 828.9a9.35 9.35 0 00-1.7 5.4v36.4c0 5.1 4.2 9.3 9.3 9.3h211.4c5.1 0 9.3-4.2 9.3-9.3v-43a9.2 9.2 0 00-9.2-9.3zM310.3 167.1a8 8 0 00-12.6 0L185.7 309c-4.2 5.3-.4 13 6.3 13h76v530c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V322h76c6.7 0 10.5-7.8 6.3-13l-112-141.9z"}}]},name:"sort-descending",theme:"outlined"};function G(){return G=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h])}return n},G.apply(this,arguments)}const be=(n,i)=>r.createElement(X,G({},n,{ref:i,icon:xe})),ve=r.forwardRef(be);function Y(){return Y=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h])}return n},Y.apply(this,arguments)}const ye=(n,i)=>r.createElement(X,Y({},n,{ref:i,icon:ge})),je=r.forwardRef(ye);function J(){return J=Object.assign?Object.assign.bind():function(n){for(var i=1;i<arguments.length;i++){var o=arguments[i];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h])}return n},J.apply(this,arguments)}const we=(n,i)=>r.createElement(X,J({},n,{ref:i,icon:pe})),Ne=r.forwardRef(we);ne.config({paths:{vs:"/monaco-editor/min/vs"},"vs/nls":{availableLanguages:{"*":"zh-cn"}}});const{TabPane:te}=Z,Ce=({commitId:n,onClose:i})=>{const[o,h]=r.useState({diff:""}),[f,N]=r.useState(null),[u,j]=r.useState(null),[C,$]=r.useState(!1),[x,F]=r.useState("split"),[d,w]=r.useState(null),[L,_]=r.useState(!1),[z,ee]=r.useState("1"),g=r.useRef(null),b=r.useRef(null),v=r.useRef(null),k=r.useRef(null),B=async()=>{if(n){_(!0);try{const t=encodeURIComponent(n),s=await U.get(`/api/history/commit-diff/${t}`);s.data.success?h({diff:s.data.diff,file_changes:s.data.file_changes}):m.error(s.data.message||"获取diff失败")}catch(t){console.error("Error fetching diff:",t),m.error("获取diff失败")}finally{_(!1)}}},S=async t=>{if(n)try{$(!0),j(null),g.current=null,b.current=null,v.current=null;const s=encodeURIComponent(n),a=await U.get(`/api/history/file-diff/${s}?file_path=${encodeURIComponent(t)}`);a.data.success?j(a.data.file_diff):m.error(a.data.message||"获取文件差异失败")}catch(s){console.error("Error fetching file diff:",s),m.error("获取文件差异失败")}finally{$(!1)}},O=t=>{f===t?(N(null),j(null),g.current=null,b.current=null,v.current=null,w(null)):(N(t),S(t),w(null))},R=r.useCallback(t=>{g.current=t},[]),H=r.useCallback(t=>{b.current=t},[]),A=r.useCallback(t=>{v.current=t},[]),y=t=>{var c;const s=(c=t.split(".").pop())==null?void 0:c.toLowerCase();return{js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",java:"java",c:"c",cpp:"cpp",cs:"csharp",go:"go",rs:"rust",rb:"ruby",php:"php",html:"html",css:"css",scss:"scss",json:"json",md:"markdown",yml:"yaml",yaml:"yaml",xml:"xml",sh:"shell",bash:"shell",txt:"plaintext"}[s||""]||"plaintext"},M=({viewType:t})=>{const s=d===t;return e.jsx("button",{className:"ml-2 text-gray-400 hover:text-white transition-colors",onClick:a=>{a.stopPropagation(),w(s?null:t)},title:s?"恢复正常视图":"最大化视图",children:s?e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"})}):e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5v-4m0 4h-4m4 0l-5-5"})})})},D=()=>{if(!f||!u)return null;const t=y(f),s=`diff-${n}-${f}-${x}`,a=`before-${n}-${f}`,c=`after-${n}-${f}`,E={readOnly:!0,scrollBeyondLastLine:!1,minimap:{enabled:!1},lineNumbers:"on",wordWrap:"on",automaticLayout:!0,scrollbar:{vertical:"visible",horizontal:"visible",verticalScrollbarSize:14,horizontalScrollbarSize:14}};return x==="unified"?e.jsxs("div",{ref:k,className:"bg-gray-900 rounded-lg border border-gray-700",style:{height:"500px",width:"100%",overflow:"hidden"},children:[e.jsxs("div",{className:"py-1 px-3 bg-gray-800 border-b border-gray-700 text-xs font-medium text-white flex justify-between items-center",children:[e.jsx("span",{children:"差异视图"}),e.jsx(M,{viewType:"diff"})]}),e.jsx(K,{height:"calc(100% - 26px)",width:"100%",defaultLanguage:"diff",value:u.diff_content||"",theme:"vs-dark",onMount:A,options:E,loading:e.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"加载中..."})},s)]}):e.jsxs("div",{ref:k,className:"grid grid-cols-2 gap-2",style:{height:"500px",width:"100%"},children:[(d===null||d==="before")&&e.jsxs("div",{className:`bg-gray-900 rounded-lg border border-gray-700 ${d==="before"?"col-span-2":""}`,style:{overflow:"hidden"},children:[e.jsxs("div",{className:"py-1 px-3 bg-gray-800 border-b border-gray-700 text-xs font-medium text-white flex justify-between items-center",children:[e.jsxs("span",{children:["修改前 (",u.file_status==="added"?"新文件":f,")"]}),e.jsx(M,{viewType:"before"})]}),e.jsx(K,{height:"calc(100% - 26px)",width:"100%",defaultLanguage:t,value:u.before_content||"",theme:"vs-dark",onMount:R,options:E,loading:e.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"加载中..."})},a)]}),(d===null||d==="after")&&e.jsxs("div",{className:`bg-gray-900 rounded-lg border border-gray-700 ${d==="after"?"col-span-2":""}`,style:{overflow:"hidden"},children:[e.jsxs("div",{className:"py-1 px-3 bg-gray-800 border-b border-gray-700 text-xs font-medium text-white flex justify-between items-center",children:[e.jsxs("span",{children:["修改后 (",u.file_status==="deleted"?"文件已删除":f,")"]}),e.jsx(M,{viewType:"after"})]}),e.jsx(K,{height:"calc(100% - 26px)",width:"100%",defaultLanguage:t,value:u.after_content||"",theme:"vs-dark",onMount:H,options:E,loading:e.jsx("div",{className:"flex items-center justify-center h-full text-white",children:"加载中..."})},c)]})]})};r.useEffect(()=>{n&&B()},[n]);const V={background:"#1F2937",borderBottom:"1px solid #374151",margin:0,padding:"0 16px"},I=(t,s)=>e.jsx(s,{...t,style:V,className:"custom-tabs-bar"});return e.jsxs("div",{className:"flex flex-col h-full bg-[#111827] overflow-hidden",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-[#1F2937] border-b border-[#374151]",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"代码变更详情"}),e.jsx(re,{children:i&&e.jsx("button",{className:"px-3 py-1.5 bg-gray-700 hover:bg-gray-600 text-white rounded text-sm",onClick:i,children:"关闭"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs(Z,{activeKey:z,onChange:ee,type:"card",className:"diff-viewer-tabs",renderTabBar:I,style:{background:"#111827"},children:[e.jsx(te,{tab:e.jsx("div",{className:`py-2 px-4 ${z==="1"?"text-white font-medium":"text-gray-400"}`,children:"文件列表"}),children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"space-y-2 mb-4",children:L?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):o.file_changes&&o.file_changes.length>0?o.file_changes.map((t,s)=>e.jsx("div",{className:`text-sm py-2 px-3 rounded cursor-pointer ${f===t.path?"bg-gray-700 border-l-2 border-indigo-500":"hover:bg-gray-750 bg-gray-800"}`,onClick:()=>O(t.path),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${t.change_type==="added"?"bg-green-500":t.change_type==="modified"?"bg-yellow-500":t.change_type==="deleted"?"bg-red-500":"bg-blue-500"}`}),e.jsx("span",{className:`font-mono ${t.change_type==="deleted"?"line-through text-gray-500":"text-white"}`,children:t.path}),e.jsx(ae,{className:"ml-2 text-gray-400"})]})},s)):e.jsx("div",{className:"text-center text-white py-8",children:e.jsx("p",{children:"没有文件变更信息"})})}),C&&e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}),f&&u&&!C&&e.jsx("div",{className:"flex justify-end mb-3",children:e.jsxs(P.Group,{value:x,onChange:t=>F(t.target.value),buttonStyle:"solid",children:[e.jsx(P.Button,{value:"split",style:{color:x==="split"?"#fff":"#1f2937"},children:"分割视图"}),e.jsx(P.Button,{value:"unified",style:{color:x==="unified"?"#fff":"#1f2937"},children:"统一视图"})]})}),f&&u&&!C&&D()]})},"1"),e.jsx(te,{tab:e.jsx("div",{className:`py-2 px-4 ${z==="2"?"text-white font-medium":"text-gray-400"}`,children:"原始差异"}),children:e.jsx("div",{className:"p-4",children:L?e.jsx("div",{className:"flex items-center justify-center py-10",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})}):e.jsx(le,{language:"diff",style:ie,customStyle:{padding:"12px",borderRadius:"4px",overflow:"auto",maxHeight:"600px"},children:o.diff||""})})},"2")]})})]})};ne.config({paths:{vs:"/monaco-editor/min/vs"},"vs/nls":{availableLanguages:{"*":"zh-cn"}}});const{Text:Q}=de,{TabPane:Se}=Z,Re=()=>{const[n,i]=r.useState([]),[o,h]=r.useState(!1),[f,N]=r.useState(!1),[u,j]=r.useState(!1),[C,$]=r.useState([]),[x,F]=r.useState(null),[d,w]=r.useState(null),[L,_]=r.useState([]),[z,ee]=r.useState(!1),[g,b]=r.useState({show:!1,commitHash:"",commitMessage:""}),[v,k]=r.useState(!1),[B,S]=r.useState(null),[O,R]=r.useState(null),H=s=>{if(!s){m.info(l("noAssociatedCodeChanges"));return}F(s)},A=()=>{d&&(w(null),i(L))},y=async()=>{N(!0);try{const s=await U.get("/api/history/validate-and-load");if(s.data.success){const a=s.data.queries;if(_(a),d){const c=a.filter(E=>E.response===d);i(c)}else i(a)}else m.error(s.data.message||l("loadHistoryFailed"))}catch(s){console.error("Error loading queries:",s),m.error(l("loadFailed"))}finally{N(!1)}};oe.useEffect(()=>{y();const s=W.subscribe(q.CODING.TASK_COMPLETE,c=>{console.log("Coding task completed, reloading queries",c),y()}),a=W.subscribe(q.HISTORY.FILTER_BY_COMMIT,c=>{console.log("Filtering history by commit hash:",c.commitHash),w(c.commitHash),y()});return()=>{s(),a()}},[d]);const M=(s,a,c)=>{s.stopPropagation(),b({show:!0,commitHash:a,commitMessage:c})},D=async()=>{try{k(!0),S(null),R(null);const s=await fetch(`/api/commits/${g.commitHash}/revert`,{method:"POST",headers:{"Content-Type":"application/json"}});if(!s.ok){const c=await s.json();throw new Error(c.detail||l("revertCommitFailed"))}const a=await s.json();R(`${l("revertCommitSuccessPrefix")}: ${a.new_commit_hash.substring(0,7)}`),b(c=>({...c,show:!1})),y(),setTimeout(()=>{R(null)},5e3)}catch(s){S(s instanceof Error?s.message:"撤销提交失败"),console.error("Failed to revert commit:",s)}finally{k(!1)}},V=()=>{b({show:!1,commitHash:"",commitMessage:""}),S(null)},I=(s,a)=>{s.stopPropagation(),W.publish(q.CHAT.NEW_MESSAGE,{action:"review",commit_id:a,mode:"chat"}),m.success(l("reviewCommandSent"))},t=(s,a)=>{s.stopPropagation(),navigator.clipboard.writeText(a).then(()=>{m.success(l("commitCopied"))}).catch(c=>{console.error("复制失败:",c),m.error(l("copyFailed"))})};return x?e.jsx(Ce,{commitId:x,onClose:()=>F(null)}):e.jsxs("div",{className:"flex flex-col bg-[#111827] overflow-hidden",style:{height:"650px"},children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-[#1F2937] border-b border-[#374151] sticky top-0 z-10 shadow-md",children:[e.jsxs(re,{children:[e.jsx(p,{icon:o?e.jsx(je,{}):e.jsx(Ne,{}),onClick:()=>{h(!o),i([...n].reverse())},children:o?l("ascending"):l("descending")}),e.jsx(p,{type:"primary",onClick:y,loading:f,children:l("refresh")}),d&&e.jsx(p,{type:"default",onClick:A,danger:!0,children:l("clearFilter")||"清除过滤"})]}),d&&e.jsxs("div",{className:"px-2 py-1 bg-blue-900/30 text-blue-300 rounded-md text-xs flex items-center",children:[e.jsxs("span",{children:[l("filteringByCommit")||"按提交过滤",":"]}),e.jsx("code",{className:"ml-1 font-mono",children:d.substring(0,8)})]})]}),g.show&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl max-w-md w-full p-6 border border-gray-700",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:l("confirmRevertTitle")}),e.jsx("p",{className:"text-gray-300 mb-6",children:l("confirmRevertMessage")}),e.jsxs("div",{className:"bg-gray-900 p-3 rounded mb-6 border border-gray-700",children:[e.jsxs("p",{className:"text-sm text-gray-400 mb-1",children:[l("commitInfoLabel"),":"]}),e.jsx("p",{className:"text-white",children:g.commitMessage}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Commit: ",g.commitHash.substring(0,7)]})]}),B&&e.jsx("div",{className:"bg-red-900 bg-opacity-25 text-red-400 p-3 rounded mb-4",children:B}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",onClick:V,disabled:v,children:l("cancel")}),e.jsx("button",{className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded transition-colors flex items-center",onClick:D,disabled:v,children:v?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),l("processing"),"..."]}):e.jsx(e.Fragment,{children:l("confirmRevertButton")})})]})]})}),O&&e.jsx("div",{className:"fixed top-4 right-4 bg-green-800 text-green-100 p-4 rounded-lg shadow-lg z-50 animate-fade-in-out",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})}),e.jsx("span",{children:O})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[d&&n.length===0&&e.jsx("div",{className:"text-center p-8 text-gray-400",children:e.jsx("p",{children:l("noFilteredResults")||"没有匹配的历史记录"})}),e.jsx(T,{dataSource:n,renderItem:s=>e.jsx(T.Item,{className:"border-b border-[#374151] last:border-b-0",children:e.jsx(ce,{className:`w-full bg-[#1F2937] border-[#374151] hover:bg-[#2D3748] transition-colors duration-200 
                                    ${d&&s.response===d?"border-blue-500 border-2":""}`,title:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{children:[e.jsx(se,{style:{marginRight:"8px",color:"#9CA3AF"}}),e.jsx(Q,{style:{color:"#E5E7EB"},children:`${s.file_number}_chat_action.yml`}),s.timestamp&&e.jsx(Q,{style:{marginLeft:"10px",fontSize:"12px",color:"#9CA3AF"},children:s.timestamp})]}),e.jsxs("div",{className:"flex space-x-2",children:[s.urls&&s.urls.length>0&&e.jsx(p,{icon:e.jsx(se,{}),type:"link",style:{color:"#60A5FA"},onClick:()=>{$(s.urls||[]),j(!0)},children:l("viewContext")}),s.response&&!s.is_reverted&&e.jsxs(e.Fragment,{children:[e.jsx(p,{icon:e.jsx(he,{}),type:"link",style:{color:"#F87171"},onClick:a=>M(a,s.response,s.query),children:l("revert")}),e.jsx(p,{icon:e.jsx(ve,{}),type:"link",style:{color:"#10B981"},onClick:a=>I(a,s.response),children:l("reviewChanges")}),e.jsx(p,{icon:e.jsx(fe,{}),type:"link",style:{color:"#6366F1"},onClick:a=>t(a,s.response),children:l("copyCommit")})]}),e.jsx(p,{icon:e.jsx(ue,{}),type:"link",style:{color:s.response?"#60A5FA":"#9CA3AF"},onClick:()=>H(s.response),disabled:!s.response,children:l("viewChanges")})]})]}),children:e.jsxs("div",{className:`${s.is_reverted?"border border-red-500 rounded-lg p-2 relative":""}`,children:[s.is_reverted&&e.jsx("div",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs px-2 py-0.5 rounded-full",children:l("reverted")}),e.jsx("div",{style:{backgroundColor:"#111827",padding:"12px",borderRadius:"4px",color:"#E5E7EB",border:"1px solid #374151",maxWidth:"100%",fontSize:"14px",lineHeight:"1.6",whiteSpace:"normal",wordBreak:"break-word"},children:s.query})]})})})}),e.jsx(me,{title:l("contextFileListTitle"),open:u,onCancel:()=>j(!1),width:600,footer:null,className:"dark-theme-modal",styles:{content:{backgroundColor:"#1f2937",padding:"20px"},header:{backgroundColor:"#1f2937",borderBottom:"1px solid #374151",color:"#ffffff"},body:{backgroundColor:"#1f2937",color:"#ffffff"},mask:{backgroundColor:"rgba(0, 0, 0, 0.6)"}},children:e.jsx(T,{dataSource:C,className:"dark-theme-list max-h-96 overflow-y-auto",renderItem:s=>e.jsx(T.Item,{className:"text-gray-200 border-gray-700",children:e.jsx("div",{className:"flex items-center w-full",children:e.jsx(Q,{style:{color:"#E5E7EB"},children:s})})})})})]})]})};export{Re as default};
