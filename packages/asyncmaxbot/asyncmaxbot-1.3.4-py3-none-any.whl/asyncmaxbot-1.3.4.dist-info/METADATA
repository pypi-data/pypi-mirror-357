Metadata-Version: 2.4
Name: asyncmaxbot
Version: 1.3.4
Summary: Python library for creating bots in Max API with aiogram-like syntax
Author-email: Anton Sedykh <antonsedykh@gmail.com>
Maintainer-email: Anton Sedykh <antonsedykh@gmail.com>
License: MIT
Project-URL: Homepage, https://github.com/sdkinfotech/asyncmaxbot
Project-URL: Documentation, https://github.com/sdkinfotech/asyncmaxbot/blob/main/README.md
Project-URL: Repository, https://github.com/sdkinfotech/asyncmaxbot
Project-URL: Bug Tracker, https://github.com/sdkinfotech/asyncmaxbot/issues
Project-URL: Examples, https://github.com/sdkinfotech/asyncmaxbot/tree/main/examples
Keywords: max,api,bot,telegram,aiogram,async,messenger
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Communications :: Chat
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: aiohttp>=3.8.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: loguru>=0.7.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-asyncio>=0.21.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Dynamic: license-file

# AsyncMaxBot SDK

Python SDK –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Max API - –ø–ª–∞—Ç—Ñ–æ—Ä–º–æ–π –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤ –≤ Max Messenger.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Max API** - –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –±—ã—Å—Ç—Ä–∞—è –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚úÖ **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤
- ‚úÖ **–£–¥–æ–±–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã** - –ª–µ–≥–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫–æ–º–∞–Ω–¥
- ‚úÖ **Middleware —Å–∏—Å—Ç–µ–º–∞** - —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å
- ‚úÖ **–°—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è** - Pydantic –º–æ–¥–µ–ª–∏ –¥–ª—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏
- ‚úÖ **–ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø—Ä–∏–º–µ—Ä—ã –∏ API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
pip install asyncmaxbot
```

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```python
import asyncio
from maxbot import Bot
from maxbot.dispatcher import Dispatcher
from maxbot.filters import command, has_attachment

async def main():
    bot = Bot("YOUR_TOKEN")
    dispatcher = Dispatcher(bot)
    
    @dispatcher.message_handler(command("start"))
    async def start_command(ctx):
        await ctx.reply("–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è Max Messenger.")
    
    @dispatcher.message_handler(has_attachment())
    async def handle_attachments(ctx):
        await ctx.reply(f"–ü–æ–ª—É—á–∏–ª {len(ctx.attachments)} –≤–ª–æ–∂–µ–Ω–∏–π!")
    
    @dispatcher.message_handler()
    async def echo_handler(ctx):
        if ctx.text:
            await ctx.reply(f"–í—ã —Å–∫–∞–∑–∞–ª–∏: {ctx.text}")
    
    async with bot:
        await bot.polling(dispatcher=dispatcher)

if __name__ == "__main__":
    asyncio.run(main())
```

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –†–∞–±–æ—Ç–∞ —Å –≤–ª–æ–∂–µ–Ω–∏—è–º–∏

```python
@dispatcher.message_handler(Attachment("image"))
async def handle_images(ctx):
    for attachment in ctx.attachments:
        photo_id = attachment.payload.photo_id
        await ctx.reply(f"–ü–æ–ª—É—á–∏–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ! ID: {photo_id}")

@dispatcher.message_handler(Attachment("file"))
async def handle_files(ctx):
    for attachment in ctx.attachments:
        filename = attachment.filename or "–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è"
        size = attachment.size or 0
        await ctx.reply(f"–§–∞–π–ª: {filename} ({size} –±–∞–π—Ç)")

@dispatcher.message_handler(Attachment("location"))
async def handle_location(ctx):
    for attachment in ctx.attachments:
        lat = attachment.latitude
        lon = attachment.longitude
        await ctx.reply(f"üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã: {lat}, {lon}")
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Ç–æ–º

```python
@dispatcher.message_handler(command("members"))
async def get_members(ctx):
    members = await ctx.get_members()
    member_list = "\n".join([f"- {member.name}" for member in members])
    await ctx.reply(f"–£—á–∞—Å—Ç–Ω–∏–∫–∏ —á–∞—Ç–∞:\n{member_list}")

@dispatcher.message_handler(command("typing"))
async def send_typing(ctx):
    await ctx.send_action("typing")
    await asyncio.sleep(3)
    await ctx.reply("–ü–µ—á–∞—Ç–∞—é...")

@dispatcher.message_handler(command("pin"))
async def pin_message(ctx):
    if ctx.message and ctx.message.body and ctx.message.body.mid:
        await ctx.pin_message(ctx.message.body.mid)
        await ctx.reply("–°–æ–æ–±—â–µ–Ω–∏–µ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–æ!")
```

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π

```python
@dispatcher.message_handler(HasAttachment())
async def forward_attachment(ctx):
    if ctx.attachments:
        # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º –≤–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ
        original_attachment = ctx.attachments[0]
        await ctx.bot.send_attachment(
            original_attachment.model_dump(),
            chat_id=ctx.chat_id,
            caption="–ü–µ—Ä–µ—Å–ª–∞–Ω–Ω–æ–µ –≤–ª–æ–∂–µ–Ω–∏–µ"
        )
```

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ç–∏–ø—ã –≤–ª–æ–∂–µ–Ω–∏–π

- **`image`** - –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Ñ–æ—Ç–æ)
- **`video`** - –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã
- **`audio`** - –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã  
- **`file`** - –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ —Ñ–∞–π–ª—ã
- **`sticker`** - —Å—Ç–∏–∫–µ—Ä—ã
- **`location`** - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
- **`share`** - —Å—Å—ã–ª–∫–∏

## –§–∏–ª—å—Ç—Ä—ã

```python
from maxbot.filters import command, text, regex, Attachment, HasAttachment

# –ö–æ–º–∞–Ω–¥—ã
@dispatcher.message_handler(command("start"))
async def start_handler(ctx): ...

# –¢–µ–∫—Å—Ç
@dispatcher.message_handler(text("–ø—Ä–∏–≤–µ—Ç"))
async def hello_handler(ctx): ...

# –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
@dispatcher.message_handler(regex(r"^\d+$"))
async def number_handler(ctx): ...

# –í–ª–æ–∂–µ–Ω–∏—è
@dispatcher.message_handler(Attachment("image"))
async def image_handler(ctx): ...

@dispatcher.message_handler(HasAttachment())
async def any_attachment_handler(ctx): ...
```

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

üìñ **[–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](API_DOCUMENTATION.md)** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

üìö **[–ü—Ä–∏–º–µ—Ä—ã](examples/)** - –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –±–æ—Ç–æ–≤

üß™ **[–¢–µ—Å—Ç—ã](tests/)** - —Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- aiohttp >= 3.8.0
- pydantic >= 2.0.0
- loguru >= 0.7.0

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª [LICENSE](LICENSE)

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìß –°–æ–∑–¥–∞–π—Ç–µ Issue –≤ GitHub
- üìñ –ò–∑—É—á–∏—Ç–µ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](API_DOCUMENTATION.md)
- üß™ –ó–∞–ø—É—Å—Ç–∏—Ç–µ [—Ç–µ—Å—Ç—ã](tests/) –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

## –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –≤–µ—Ä—Å–∏–∏ 1.2+

### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

1. **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ `send_attachment()`** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ –≤–ª–æ–∂–µ–Ω–∏—è
2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ (image, video, audio, file, location, sticker)
3. **–ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–æ–º** - –ø–æ–ª—É—á–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π, –¥–µ–π—Å—Ç–≤–∏—è
4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–∏—Å–ª–æ–≤—ã—Ö –∏ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö ID –≤ payload
5. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** - –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ API —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:

–ö–æ–¥, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –¥–ª—è –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π, —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —è–≤–ª—è—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏.
