const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-BWLBzXjn.js","./VegaLite-GVqhQbDs.js","./index-DlQKt39j.js","./index-7fo-bO1b.css","./compile-DnHFbvjV.js","./index-B_2-onrX.js"])))=>i.map(i=>d[i]);
import{u as G,c as N,a4 as O,a5 as J,$ as K,Y as k,j as s,a as Q,a6 as W,a7 as X,a8 as q,a9 as Z,a0 as ee,aa as te,ab as A,ac as re,ad as se,ae as ie,__tla as ae}from"./index-DlQKt39j.js";import{P as le,C as oe,f as V,E as ne,a as me,u as ce,__tla as pe}from"./edit-page-CM7Z6do2.js";import{c as de}from"./compile-DnHFbvjV.js";import{r as ue,u as he,__tla as xe}from"./storage-Dz2fUeWr.js";import{A as ge}from"./shutdown-button-D56z6eVx.js";import{C as fe}from"./circle-play-CxSSFgdO.js";import"./_createAggregator-CCTzDuxr.js";import"./_baseEach-DtUk7cBy.js";import"./transform-C5148Z0S.js";import"./sortBy-CDXarBT-.js";import"./_baseMap-zXgLfXUO.js";import"./index-TycZpXM8.js";import"./index-Bhxhykeb.js";import"./index-BkG9SImY.js";import"./index-cyG9KqdX.js";import"./index-CSVJhvPj.js";import"./index-BLhUKus3.js";import"./index-DhhQl-OJ.js";import"./index-BWRJuAq5.js";import"./index-CFqFJcvv.js";import"./index-BWJPY1iW.js";import"./index-BGV64nJA.js";import"./index-Ckjkc_22.js";import"./index-DLz0HVCk.js";import"./apl-CXdQSnD-.js";import"./asciiarmor-D5V0T9Cu.js";import"./asterisk-B46aRdXb.js";import"./brainfuck-CtZaYBKt.js";import"./clike-BgBwzOhw.js";import"./cmake-DXn5xaP-.js";import"./cobol-stawOqaz.js";import"./coffeescript-BTDxI-eT.js";import"./commonlisp-vq6DHwts.js";import"./crystal-CRzZ78HM.js";import"./cypher-gJDei3ni.js";import"./d-BShv7fp-.js";import"./diff-UJJ5BM9S.js";import"./dockerfile-knGOOxt4.js";import"./simple-mode-C3vEBAcb.js";import"./dtd-DI9Herc-.js";import"./dylan-DkEP81N9.js";import"./ebnf-B-Df8AvO.js";import"./ecl-DPFc0Uaf.js";import"./eiffel-DR5c0IrL.js";import"./elm-DompmV0j.js";import"./erlang-BuqgqA5h.js";import"./factor-CFXhaUWb.js";import"./fcl-CVaBTCzQ.js";import"./forth-POgR1ypr.js";import"./fortran-DL7KluxX.js";import"./gas-bV0CklSb.js";import"./gherkin-B6X1vGSW.js";import"./groovy-DnIzCrpZ.js";import"./haskell-CLQs6EAM.js";import"./haxe-D25e-2l-.js";import"./http-BKJkqRj4.js";import"./idl-pcmmZuaN.js";import"./jinja2-DhgKlfW7.js";import"./julia-DjdwvFuI.js";import"./livescript-HO6ttBFx.js";import"./lua-8DXOpKDz.js";import"./mathematica-IIbmv7SK.js";import"./mbox-z_N2Mo3d.js";import"./mirc-DkvFAiy5.js";import"./modelica-DSrSSXCg.js";import"./mscgen-B2igx18G.js";import"./mumps-zvxmGV4l.js";import"./nginx-B4hAVlXN.js";import"./nsis-BvKfQ9lQ.js";import"./ntriples-BSwWqoLa.js";import"./octave-C4hdQ5Hf.js";import"./oz-qQq7irPq.js";import"./pascal-CafrKXZF.js";import"./perl-tdMlh9QA.js";import"./pig-CwGJVRC4.js";import"./powershell-D1ly3AHC.js";import"./properties-_nPj978X.js";import"./protobuf-B4y9do6W.js";import"./puppet-Bc-yJKzi.js";import"./q-B0kTJ4cI.js";import"./r-BA4EbLKE.js";import"./ruby-CR-u2WLS.js";import"./sas-Bqaci40L.js";import"./scheme-qjP0V5Ag.js";import"./shell-BLav31RL.js";import"./sieve-r025o_jW.js";import"./smalltalk-C7J3IyEP.js";import"./solr-78MBEUkU.js";import"./sparql-BRLJFz69.js";import"./spreadsheet-CGlWr0eM.js";import"./stylus-Bdo_Aemu.js";import"./swift-B_XXVlXX.js";import"./tcl-B2fODqDH.js";import"./textile-BuVhTOzU.js";import"./tiddlywiki-BgR6AEZu.js";import"./tiki-CI-ztowC.js";import"./toml-wcPdHu67.js";import"./troff-Ce85hlLp.js";import"./ttcn-BxnYHtq8.js";import"./turtle-BkSuIpt-.js";import"./vb-BHgjm0DN.js";import"./vbscript-Dawdd5GZ.js";import"./velocity-BdD_26Jv.js";import"./verilog-B4LBqg_1.js";import"./vhdl-CWWH2SUo.js";import"./webidl-CGwyPRYs.js";import"./xquery-CVDBqZPY.js";import"./yacas-I8QjZlxf.js";import"./z80-D8p3gKXp.js";import"./index-B_2-onrX.js";let U,w,ve=Promise.all([(()=>{try{return ae}catch{}})(),(()=>{try{return pe}catch{}})(),(()=>{try{return xe}catch{}})()]).then(async()=>{const Y=G("circle-ellipsis",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M17 12h.01",key:"1m0b6t"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M7 12h.01",key:"eqddd0"}]]),$="hoveredCellId",C="cellHover",R="startTimestamp",P="endTimestamp";let E,L,M,z,B,H,D,F;E=J(new Map),U=()=>{const t=N.c(28),{runIds:e,runMap:r}=O(ue),o=O(E),{clearRuns:a}=he(),{theme:l}=K(),[i,u]=k.useState("above");let m;t[0]!==i?(m=()=>{u(i==="above"?"sideBySide":"above")},t[0]=i,t[1]=m):m=t[1];const x=m;if(e.length===0){let h;return t[2]===Symbol.for("react.memo_cache_sentinel")?(h=s.jsx(le,{title:"No traces",description:s.jsx("span",{children:"Cells that have ran will appear here."}),icon:s.jsx(ge,{})}),t[2]=h):h=t[2],h}let d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("label",{htmlFor:"chartPosition",className:"text-xs",children:"Inline chart"}),t[3]=d):d=t[3];const c=i==="sideBySide";let g,p,y,f,v,I;if(t[4]!==c||t[5]!==x?(g=s.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[d,s.jsx("input",{type:"checkbox",name:"chartPosition",id:"chartPosition",onClick:x,defaultChecked:c,className:"h-3 cursor-pointer"})]}),t[4]=c,t[5]=x,t[6]=g):g=t[6],t[7]!==a?(p=s.jsx(oe,{dataTestId:"clear-traces-button",onClick:a}),t[7]=a,t[8]=p):p=t[8],t[9]!==g||t[10]!==p?(y=s.jsxs("div",{className:"flex flex-row justify-end gap-3",children:[g,p]}),t[9]=g,t[10]=p,t[11]=y):y=t[11],t[12]!==i||t[13]!==o||t[14]!==e||t[15]!==r||t[16]!==l){let h;t[18]!==i||t[19]!==o||t[20]!==r||t[21]!==l?(h=(S,n)=>{const j=r.get(S);if(j)return s.jsx(z,{run:j,isExpanded:o.get(j.runId),isMostRecentRun:n===0,chartPosition:i,theme:l},j.runId)},t[18]=i,t[19]=o,t[20]=r,t[21]=l,t[22]=h):h=t[22],f=e.map(h),t[12]=i,t[13]=o,t[14]=e,t[15]=r,t[16]=l,t[17]=f}else f=t[17];return t[23]!==f?(v=s.jsx("div",{className:"flex flex-col gap-3",children:f}),t[23]=f,t[24]=v):v=t[24],t[25]!==y||t[26]!==v?(I=s.jsxs("div",{className:"py-1 px-2 overflow-y-scroll",children:[y,v]}),t[25]=y,t[26]=v,t[27]=I):I=t[27],I},L=Q.lazy(()=>W(()=>import("./index-BWLBzXjn.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url).then(t=>({default:t.Vega}))),M=t=>{const e=N.c(10),{ref:r,width:o}=ce(),a=o===void 0?300:o,l=t.theme==="dark"?"dark":void 0,i=a-50;let u,m;return e[0]!==t.height||e[1]!==t.signalListeners||e[2]!==t.vegaSpec||e[3]!==l||e[4]!==i?(u=s.jsx(k.Suspense,{children:s.jsx(L,{spec:t.vegaSpec,theme:l,width:i,height:t.height,signalListeners:t.signalListeners,actions:!1})}),e[0]=t.height,e[1]=t.signalListeners,e[2]=t.vegaSpec,e[3]=l,e[4]=i,e[5]=u):u=e[5],e[6]!==t.className||e[7]!==r||e[8]!==u?(m=s.jsx("div",{className:t.className,ref:r,children:u}),e[6]=t.className,e[7]=r,e[8]=u,e[9]=m):m=e[9],m},z=({run:t,isMostRecentRun:e,chartPosition:r,isExpanded:o,theme:a})=>{const l=X(E),i=(o=o??e)?re:se,u=s.jsx(i,{height:16,className:"inline"}),m=s.jsxs("span",{className:"text-sm cursor-pointer",onClick:()=>{l(x=>{const d=new Map(x);return d.set(t.runId,!o),d})},children:["Run - ",q(t.runStartTime),u]});return o?s.jsx(B,{run:t,chartPosition:r,theme:a,title:m},t.runId):s.jsx("div",{className:"flex flex-col",children:s.jsx("pre",{className:"font-mono font-semibold",children:m})},t.runId)},B=t=>{const e=N.c(32),{run:r,chartPosition:o,theme:a,title:l}=t,[i,u]=k.useState();let m;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={[C]:(S,n)=>{var _;const j=n,b=(_=j.cell)==null?void 0:_[0];u(b??null)}},e[0]=m):m=e[0];const x=m,d=Z();let c,g;if(e[1]!==d||e[2]!==o||e[3]!==r.cellRuns||e[4]!==r.runId||e[5]!==a){const S=[...r.cellRuns.values()].map(n=>{const j=n.elapsedTime??0;return{cell:n.cellId,cellNum:d.inOrderIds.indexOf(n.cellId),startTimestamp:w(n.startTime),endTimestamp:w(n.startTime+j),elapsedTime:V(1e3*j),status:n.status}});c=`hiddenInputElement-${r.runId}`,g=de(function(n,j,b,_){return{$schema:"https://vega.github.io/schema/vega-lite/v5.json",background:_==="dark"?"black":void 0,mark:{type:"bar",cornerRadius:2},params:[{name:$,bind:{element:`#${j}`}},{name:C,select:{type:"point",on:"mouseover",fields:["cell"],clear:"mouseout"}}],height:{step:b==="above"?21:26},encoding:{y:{field:"cellNum",scale:{paddingInner:.2},sort:{field:R},title:"cell",axis:b==="sideBySide"?null:void 0},x:{field:R,type:"temporal",axis:{orient:"top",title:null}},x2:{field:P,type:"temporal"},tooltip:[{field:R,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"Start"},{field:P,type:"temporal",timeUnit:"hoursminutessecondsmilliseconds",title:"End"}],size:{value:{expr:`${$} == toString(datum.cell) ? 19.5 : 18`}},color:{field:"status",scale:{domain:["success","error"],range:["#37BE5F","red"]},legend:null}},data:{values:n},config:{view:{stroke:"transparent"}}}}(S,c,o,a)),e[1]=d,e[2]=o,e[3]=r.cellRuns,e[4]=r.runId,e[5]=a,e[6]=c,e[7]=g}else c=e[6],g=e[7];const p=g.spec;let y;e[8]!==c||e[9]!==i||e[10]!==r?(y=s.jsx(H,{run:r,hoveredCellId:i,hiddenInputElementId:c}),e[8]=c,e[9]=i,e[10]=r,e[11]=y):y=e[11];const f=y;if(o==="above"){let S,n,j;return e[12]!==a||e[13]!==p?(S=s.jsx(M,{vegaSpec:p,height:120,signalListeners:x,theme:a}),e[12]=a,e[13]=p,e[14]=S):S=e[14],e[15]!==S||e[16]!==l||e[17]!==f?(n=s.jsxs("pre",{className:"font-mono font-semibold",children:[l,S,f]}),e[15]=S,e[16]=l,e[17]=f,e[18]=n):n=e[18],e[19]!==r.runId||e[20]!==n?(j=s.jsx("div",{className:"flex flex-col",children:n},r.runId),e[19]=r.runId,e[20]=n,e[21]=j):j=e[21],j}let v,I,h;return e[22]!==l||e[23]!==f?(v=s.jsxs("pre",{className:"font-mono font-semibold",children:[l,f]}),e[22]=l,e[23]=f,e[24]=v):v=e[24],e[25]!==a||e[26]!==p?(I=s.jsx(M,{className:"-mt-0.5 flex-1",vegaSpec:p,height:100,signalListeners:x,theme:a}),e[25]=a,e[26]=p,e[27]=I):I=e[27],e[28]!==r.runId||e[29]!==v||e[30]!==I?(h=s.jsxs("div",{className:"flex flex-row",children:[v,I]},r.runId),e[28]=r.runId,e[29]=v,e[30]=I,e[31]=h):h=e[31],h},H=t=>{const e=N.c(12),{run:r,hoveredCellId:o,hiddenInputElementId:a}=t,l=k.useRef(null);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=p=>{l.current&&(l.current.value=String(p),l.current.dispatchEvent(new Event("input",{bubbles:!0})))},e[0]=i):i=e[0];const u=i,m=o||"";let x,d,c,g;return e[1]!==a||e[2]!==m?(x=s.jsx("input",{type:"text",id:a,defaultValue:m,hidden:!0,ref:l}),e[1]=a,e[2]=m,e[3]=x):x=e[3],e[4]!==r.cellRuns?(d=[...r.cellRuns.values()],e[4]=r.cellRuns,e[5]=d):d=e[5],e[6]!==o||e[7]!==d?(c=d.map(p=>s.jsx(F,{cellRun:p,hovered:p.cellId===o,dispatchHoverEvent:u},p.cellId)),e[6]=o,e[7]=d,e[8]=c):c=e[8],e[9]!==x||e[10]!==c?(g=s.jsxs("div",{className:"text-xs mt-0.5 ml-3 flex flex-col gap-0.5",children:[x,c]}),e[9]=x,e[10]=c,e[11]=g):g=e[11],g},D={success:s.jsx(me,{color:"green",size:14}),running:s.jsx(fe,{color:"var(--blue-10)",size:14}),error:s.jsx(ie,{color:"red",size:14}),queued:s.jsx(Y,{color:"grey",size:14})},F=t=>{const e=N.c(39),{cellRun:r,hovered:o,dispatchHoverEvent:a}=t;let l;e[0]!==r.elapsedTime?(l=r.elapsedTime?V(1e3*r.elapsedTime):"-",e[0]=r.elapsedTime,e[1]=l):l=e[1];const i=l;let u;e[2]!==r.elapsedTime||e[3]!==i?(u=r.elapsedTime?s.jsxs("span",{children:["This cell took ",s.jsx(ne,{elapsedTime:i})," to run"]}):s.jsx("span",{children:"This cell has not been run"}),e[2]=r.elapsedTime,e[3]=i,e[4]=u):u=e[4];const m=u;let x;e[5]!==r.cellId||e[6]!==a?(x=()=>{a(r.cellId)},e[5]=r.cellId,e[6]=a,e[7]=x):x=e[7];const d=x;let c;e[8]!==a?(c=()=>{a(null)},e[8]=a,e[9]=c):c=e[9];const g=c,p=o&&"bg-[var(--gray-3)] opacity-100";let y,f,v,I,h,S,n;e[10]!==p?(y=ee("flex flex-row gap-2 py-1 px-1 opacity-70 hover:bg-[var(--gray-3)] hover:opacity-100",p),e[10]=p,e[11]=y):y=e[11],e[12]!==r.startTime?(f=q(r.startTime),e[12]=r.startTime,e[13]=f):f=e[13],e[14]!==f?(v=s.jsxs("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:["[",f,"]"]}),e[14]=f,e[15]=v):v=e[15],e[16]!==r.cellId?(I=s.jsxs("span",{className:"text-[var(--gray-10)] w-16",children:["(",s.jsx(te,{cellId:r.cellId}),")"]}),e[16]=r.cellId,e[17]=I):I=e[17],e[18]!==r.code?(h=s.jsx("span",{className:"w-40 truncate -ml-1",children:r.code}),e[18]=r.code,e[19]=h):h=e[19],e[20]!==i?(S=s.jsx("span",{className:"text-[var(--gray-10)] dark:text-[var(--gray-11)]",children:i}),e[20]=i,e[21]=S):S=e[21],e[22]!==m||e[23]!==S?(n=s.jsx(A,{content:m,children:S}),e[22]=m,e[23]=S,e[24]=n):n=e[24];const j=D[r.status];let b,_,T;return e[25]!==r.status||e[26]!==j?(b=s.jsx(A,{content:r.status,children:j}),e[25]=r.status,e[26]=j,e[27]=b):b=e[27],e[28]!==n||e[29]!==b?(_=s.jsxs("div",{className:"flex flex-row gap-1 w-16 justify-end -ml-2",children:[n,b]}),e[28]=n,e[29]=b,e[30]=_):_=e[30],e[31]!==d||e[32]!==g||e[33]!==h||e[34]!==_||e[35]!==y||e[36]!==v||e[37]!==I?(T=s.jsxs("div",{className:y,onMouseEnter:d,onMouseLeave:g,children:[v,I,h,_]}),e[31]=d,e[32]=g,e[33]=h,e[34]=_,e[35]=y,e[36]=v,e[37]=I,e[38]=T):T=e[38],T},w=function(t){try{const e=new Date(1e3*t),r=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),u=String(e.getSeconds()).padStart(2,"0");return`${r}-${o}-${a} ${l}:${i}:${u}.${String(e.getMilliseconds()).padStart(3,"0")}`}catch{return""}}});export{U as Tracing,ve as __tla,w as formatChartTime};
