Metadata-Version: 2.4
Name: hosha-network
Version: 1.0.0
Summary: A Python library to construct detailed pedestrian-vehicle layered networks from macro-level road data.
Author-email: Hiroyuki Hasada <important83d@email.com>
License: MIT License
        
        Copyright (c) 2025 Hiroyuki Hasada
        
        Permission is hereby granted, free of charge, to any person obtaining a copy
        of this software and associated documentation files (the â€œSoftwareâ€), to deal
        in the Software without restriction, including without limitation the rights
        to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
        copies of the Software, and to permit persons to whom the Software is
        furnished to do so, subject to the following conditions:
        
        The above copyright notice and this permission notice shall be included in all
        copies or substantial portions of the Software.
        
        THE SOFTWARE IS PROVIDED â€œAS ISâ€, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
        IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
        FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
        AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
        LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
        OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
        SOFTWARE.
Project-URL: Homepage, https://github.com/hasada83d/hosha-network
Project-URL: Repository, https://github.com/hasada83d/hosha-network
Project-URL: Issue Tracker, https://github.com/hasada83d/hosha-network/issues
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: pandas
Requires-Dist: geopandas
Requires-Dist: numpy
Requires-Dist: networkx
Requires-Dist: shapely
Provides-Extra: dev
Requires-Dist: pytest; extra == "dev"
Requires-Dist: black; extra == "dev"
Requires-Dist: build; extra == "dev"
Requires-Dist: twine; extra == "dev"
Dynamic: license-file

# hosha-network ï¼ˆæ­©è»Šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ï¼‰
[![PyPI version](https://badge.fury.io/py/hosha-network.svg)](https://pypi.org/project/hosha-network/)

A Python library to construct detailed pedestrian-vehicle layered networks from macro-level road data.

ãƒã‚¯ãƒ­ãƒ¬ãƒ™ãƒ«ãªé“è·¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰ï¼Œæ­©è¡Œè€…ã¨è»Šä¸¡ã®è©³ç´°ãªå‹•æ…‹ã‚’è¡¨ç¾ã™ã‚‹æ­©è»Šåˆ†é›¢ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æ§‹ç¯‰ã™ã‚‹ Python ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ï¼

## Overview æ¦‚è¦
**hosha-network** is a Python library for constructing a micro network that expresses the detailed dynamics of pedestrians and vehicles from a macro road network consisting of undirected links and intersection nodes. By extending intersections to add entrance/exit nodes and transition links, it creates a directed network divided into layers for pedestrians and vehicles.

**hosha-network** ã¯ï¼Œç„¡å‘ãƒªãƒ³ã‚¯ã¨äº¤å·®ç‚¹ãƒãƒ¼ãƒ‰ã‹ã‚‰ãªã‚‹ãƒã‚¯ãƒ­ãªè¡—è·¯ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‹ã‚‰ï¼Œæ­©è¡Œè€…ã¨è»Šä¸¡ã®è©³ç´°ãªå‹•ãã‚’è¡¨ç¾ã§ãã‚‹ãƒŸã‚¯ãƒ­ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã® Python ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ï¼äº¤å·®ç‚¹ã‚’æ‹¡å¼µã—ã¦é·ç§»ãƒªãƒ³ã‚¯ã‚„å‡ºå…¥å£ãƒãƒ¼ãƒ‰ã‚’æŒ¿å…¥ã—ï¼Œæ­©è¡Œè€…ã¨è»Šä¸¡ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«åˆ†ã‹ã‚ŒãŸæœ‰å‘ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’ä½œæˆã—ã¾ã™ï¼

 <img src="https://github.com/user-attachments/assets/3973ff2a-0010-4537-855e-d294dc73ac13" width="80%" />

## Features ç‰¹å¾´

- ğŸš¶â€â™‚ï¸ğŸš— Separate layers for pedestrians and vehicles: Sidewalks are generated on both sides of vehicle lanes, enabling independent analysis for pedestrians and vehicles.
 
ã€€ã€€æ­©è¡Œè€…ã¨è»Šä¸¡ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ†é›¢ï¼šè»Šé“ã®ä¸¡å¤–å´ã«æ­©è¡Œç©ºé–“ã‚’è¨­ã‘ã‚‹ã“ã¨ã§ï¼Œæ­©è¡Œè€…ã¨è»Šä¸¡ã‚’åˆ¥ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§æ‰±ã„ï¼Œãã‚Œãã‚Œã®ç§»å‹•ç‰¹æ€§ã«åŸºã¥ã„ãŸè§£æãŒå¯èƒ½ã«ãªã‚Šã¾ã™. 
  
- ğŸš¥ Vehicle Turning movement representation: Transition links for vehicle right-turn, left-turn, u-turn and straight movement are inserted to represent detailed behavior at intersections.
 
ã€€ã€€è»Šä¸¡ã®é·ç§»å‹•ä½œã®æ˜ç¤ºï¼šç›´é€²ãƒ»å³å·¦æŠ˜ãƒ»Uã‚¿ãƒ¼ãƒ³ã‚’è¡¨ã™é·ç§»ãƒªãƒ³ã‚¯ã‚’äº¤å·®ç‚¹ã«æŒ¿å…¥ã—ï¼Œè»Šä¸¡ã®äº¤å·®ç‚¹å†…ã®è©³ç´°ãªå‹•ä½œã‚’å†ç¾ã—ã¾ã™. 
  
- ğŸš¸ Pedestrian crossing movement representation: Crossing links for pedestrians are placed around vehicular transitions, clearly capturing pedestrian crossing behavior.
 
ã€€ã€€æ­©è¡Œè€…ã®æ¨ªæ–­è¡Œå‹•ã®æ˜ç¤ºï¼šè»Šä¸¡ã®é·ç§»ãƒªãƒ³ã‚¯ã®å¤–å´ã«æ­©è¡Œè€…ç”¨ã®æ¨ªæ–­ãƒªãƒ³ã‚¯ã‚’è¨­ã‘ï¼Œæ¨ªæ–­è¡Œå‹•ã‚’æ˜ç¢ºã«è¡¨ç¾ã—ã¾ã™. 
  
- ğŸ“ Midlink segmentation: Road segments are divided at their midpoints, enabling precise modeling of trip origins and destinations even along road sections.

ã€€ã€€ä¸­ç‚¹ã§ã®é“è·¯åˆ†å‰²ï¼šæ­©è¡Œç©ºé–“ãƒ»è»Šé“ãƒªãƒ³ã‚¯ã¯ä¸­ç‚¹ã§åˆ†å‰²ã•ã‚Œï¼Œäº¤å·®ç‚¹ä»¥å¤–ã®è¡—è·¯ä¸Šã§ã‚‚æ­£ç¢ºãªå‡ºç™ºãƒ»åˆ°ç€ï¼ˆODï¼‰è¡¨ç¾ãŒå¯èƒ½ã«ãªã‚Šã¾ã™. 

## Citation å¼•ç”¨
- Hasada, H., Flexible Foundational Tools for Identifying Detailed Pedestrian and Vehicle Movements Based on Street Structure (preprint).  
  ç¾½ä½ç”°ç´˜ä¹‹, è¡—è·¯æ§‹é€ ã«åŸºã¥ã„ã¦æ­©è¡Œè€…ãƒ»è»Šä¸¡ã®è©³ç´°ãªç§»å‹•ã‚’æ¨å®šã™ã‚‹æŸ”è»ŸãªåŸºç›¤æŠ€è¡“ã®é–‹ç™º (preprint).

## Acknowledgment è¬è¾
This library includes the results of Cross-ministerial Strategic Innovation Promotion Program (SIP) 3rd Phase, â€œDevelopment of Smart Mobility Platformâ€ promoted by Council for Science, Technology and Innovation, Cabinet Office. ï¼ˆProject Management Agencyï¼šNew Energy and Industrial Technology Development Organization (NEDO) (Project Code JPNP23023))

<img src="https://github.com/user-attachments/assets/80e29de7-1e28-43b5-bab1-aef8f11690b1" width="100px"> 

æœ¬ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯ï¼Œå†…é–£åºœç·åˆç§‘å­¦æŠ€è¡“ãƒ»ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ä¼šè­°ã®ä¸‹ã§æ¨é€²ã™ã‚‹ã€Œæˆ¦ç•¥çš„ã‚¤ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³å‰µé€ ãƒ—ãƒ­ã‚°ãƒ©ãƒ (SIP)ç¬¬ï¼“æœŸï¼ã‚¹ãƒãƒ¼ãƒˆãƒ¢ãƒ“ãƒªãƒ†ã‚£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®æ§‹ç¯‰ã€ï¼ˆç ”ç©¶æ¨é€²æ³•äººï¼šå›½ç«‹ç ”ç©¶é–‹ç™ºæ³•äººæ–°ã‚¨ãƒãƒ«ã‚®ãƒ¼ãƒ»ç”£æ¥­æŠ€è¡“ç·åˆé–‹ç™ºæ©Ÿæ§‹ï¼‰(NEDOç®¡ç†ç•ªå·ï¼šJPNP23023)ã®æˆæœãŒå«ã¾ã‚Œã¦ã„ã¾ã™ï¼

## References å‚è€ƒæ–‡çŒ®
- ç¾½ä½ç”°ç´˜ä¹‹, æ± è°·é¢¨é¦¬, é³¥æµ·æ¢“, æœ¬é–“è£•å¤§, and å¤§å£æ•¬. 2025. â€œæ­©è»Šãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã®æ§‹ç¯‰ã¨ã€Œå®‰å¿ƒã¨ã“ã¦ãã‚¾ãƒ¼ãƒ³ã€ã®è¨­å®šæ‰‹æ³•ç†è«–ã®æ¤œè¨.â€ In ç¬¬71å›åœŸæœ¨è¨ˆç”»å­¦ç ”ç©¶ç™ºè¡¨ä¼šãƒ»è¬›æ¼”é›†.

---
## Installation ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
pip install hosha-network
```

## Usage ä½¿ã„æ–¹

```python
from hosha_network import develop_hosha_network

develop_hosha_network(link_df, node_df, output_dir="./output")
```

## Function é–¢æ•°

Function `develop_hosha_network()` generates a layered pedestrian-vehicle network from macro-level road data in [GMNS format](https://github.com/zephyr-data-specs/GMNS).

é–¢æ•°`develop_hosha_network()` ã¯ï¼Œ[GMNS ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ](https://github.com/zephyr-data-specs/GMNS)ã®ãƒã‚¯ãƒ­é“è·¯ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ­©è»Šåˆ†é›¢ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚’æ§‹ç¯‰ã—ã¾ã™. 

**Parameters å¼•æ•°:**

English
- `link_df`: DataFrame with columns: `link_id`, `from_node_id`, `to_node_id`, `length`  (follows GMNS format)
- `node_df`: DataFrame with columns: `node_id`, `x_coord`, `y_coord`  (follows GMNS format with EPSG:4326)
- `output_dir`: Output directory for saving results.

Other optional keyword arguments can be used for fine-tuning the construction process.

æ—¥æœ¬èª
- `link_df`: `link_id`, `from_node_id`, `to_node_id`, `length` ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ  (GMNS ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«æº–æ‹ ). 
- `node_df`: `node_id`, `x_coord`, `y_coord`ã‚’å«ã‚€ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ  (GMNS ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«æº–æ‹ ã€EPSG:4326ã®ã¿å¯¾å¿œ). 
- `output_dir`: çµæœã‚’ä¿å­˜ã™ã‚‹å‡ºåŠ›å…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª. 

ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¼•æ•°ã‚’ä½¿ç”¨ã—ã¦ï¼Œæ§‹ç¯‰æ–¹æ³•ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™. 
