const t=Math.min,e=Math.max,n=Math.round,o=Math.floor,i=t=>({x:t,y:t});function r(){return"undefined"!=typeof window}function c(t){return s(t)?(t.nodeName||"").toLowerCase():"#document"}function u(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function l(t){var e;return null==(e=(s(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function s(t){return!!r()&&(t instanceof Node||t instanceof u(t).Node)}function a(t){return!!r()&&(t instanceof HTMLElement||t instanceof u(t).HTMLElement)}function d(t){return!(!r()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof u(t).ShadowRoot)}function f(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=h(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function h(t){return u(t).getComputedStyle(t)}function m(t){const e=function(t){if("html"===c(t))return t;const e=t.assignedSlot||t.parentNode||d(t)&&t.host||l(t);return d(e)?e.host:e}(t);return function(t){return["html","body","#document"].includes(c(t))}(e)?t.ownerDocument?t.ownerDocument.body:t.body:a(e)&&f(e)?e:m(e)}function v(t,e,n){var o;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=m(t),r=i===(null==(o=t.ownerDocument)?void 0:o.body),c=u(i);if(r){const t=w(c);return e.concat(c,c.visualViewport||[],f(i)?i:[],t&&n?v(t):[])}return e.concat(i,v(i,[],n))}function w(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function g(t){return e=t,r()&&(e instanceof Element||e instanceof u(e).Element)?t:t.contextElement;var e}function p(t){const e=g(t);if(!a(e))return i(1);const o=e.getBoundingClientRect(),{width:r,height:c,$:u}=function(t){const e=h(t);let o=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=a(t),c=r?t.offsetWidth:o,u=r?t.offsetHeight:i,l=n(o)!==c||n(i)!==u;return l&&(o=c,i=u),{width:o,height:i,$:l}}(e);let l=(u?n(o.width):o.width)/r,s=(u?n(o.height):o.height)/c;return l&&Number.isFinite(l)||(l=1),s&&Number.isFinite(s)||(s=1),{x:l,y:s}}function y(t,e,n,o){void 0===e&&(e=!1);const r=t.getBoundingClientRect(),c=g(t);let l=i(1);e&&(l=p(t));const s=i(0);let a=(r.left+s.x)/l.x,d=(r.top+s.y)/l.y,f=r.width/l.x,m=r.height/l.y;if(c){const t=o;let e=u(c),n=w(e);for(;n&&o&&t!==e;){const t=p(n),o=n.getBoundingClientRect(),i=h(n),r=o.left+(n.clientLeft+parseFloat(i.paddingLeft))*t.x,c=o.top+(n.clientTop+parseFloat(i.paddingTop))*t.y;a*=t.x,d*=t.y,f*=t.x,m*=t.y,a+=r,d+=c,e=u(n),n=w(e)}}return function(t){const{x:e,y:n,width:o,height:i}=t;return{width:o,height:i,top:n,left:e,right:e+o,bottom:n+i,x:e,y:n}}({width:f,height:m,x:a,y:d})}function x(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function b(n,i,r,c){void 0===c&&(c={});const{ancestorScroll:u=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:d="function"==typeof IntersectionObserver,animationFrame:f=!1}=c,h=g(n),m=u||s?[...h?v(h):[],...v(i)]:[];m.forEach(t=>{u&&t.addEventListener("scroll",r,{passive:!0}),s&&t.addEventListener("resize",r)});const w=h&&d?function(n,i){let r,c=null;const u=l(n);function s(){var t;clearTimeout(r),null==(t=c)||t.disconnect(),c=null}return function l(a,d){void 0===a&&(a=!1),void 0===d&&(d=1),s();const f=n.getBoundingClientRect(),{left:h,top:m,width:v,height:w}=f;if(a||i(),!v||!w)return;const g={rootMargin:-o(m)+"px "+-o(u.clientWidth-(h+v))+"px "+-o(u.clientHeight-(m+w))+"px "+-o(h)+"px",threshold:e(0,t(1,d))||1};let p=!0;function y(t){const e=t[0].intersectionRatio;if(e!==d){if(!p)return l();e?l(!1,e):r=setTimeout(()=>{l(!1,1e-7)},1e3)}1!==e||x(f,n.getBoundingClientRect())||l(),p=!1}try{c=new IntersectionObserver(y,{...g,root:u.ownerDocument})}catch(b){c=new IntersectionObserver(y,g)}c.observe(n)}(!0),s}(h,r):null;let p,b=-1,E=null;a&&(E=new ResizeObserver(t=>{let[e]=t;e&&e.target===h&&E&&(E.unobserve(i),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var t;null==(t=E)||t.observe(i)})),r()}),h&&!f&&E.observe(h),E.observe(i));let R=f?y(n):null;return f&&function t(){const e=y(n);R&&!x(R,e)&&r();R=e,p=requestAnimationFrame(t)}(),r(),()=>{var t;m.forEach(t=>{u&&t.removeEventListener("scroll",r),s&&t.removeEventListener("resize",r)}),null==w||w(),null==(t=E)||t.disconnect(),E=null,f&&cancelAnimationFrame(p)}}export{b as a};
