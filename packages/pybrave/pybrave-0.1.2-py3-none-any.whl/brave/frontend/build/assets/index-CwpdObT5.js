import{K as V,L as he,N as fe,O as U,P as be,Q as je,U as ye,V as ve,r as o,W as Z,X as le,Y as H,Z as Se,$ as Ce,a0 as we,a1 as $e,a2 as Ie,a3 as ke,R as P,a4 as Fe,a5 as _e,a6 as Pe,a7 as Oe,a8 as Le,a9 as Ee,aa as Ne,ab as Te,F as y,j as e,ac as X,B as L,ad as T,D as k,S as A,J as re,u as q,a as O,t as B,C as F,I as _,w as G,z as Y,y as z,T as Q}from"./index-COCGZQB3.js";import{M}from"./index-Bk_zsU4f.js";import{D as Me}from"./index-CtOJ-pPl.js";import"./context-DP9GjKgE.js";const Be=t=>{const{componentCls:a,notificationMarginEdge:s,animationMaxHeight:n}=t,i=`${a}-notice`,l=new V("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),c=new V("antNotificationTopFadeIn",{"0%":{top:-n,opacity:0},"100%":{top:0,opacity:1}}),r=new V("antNotificationBottomFadeIn",{"0%":{bottom:t.calc(n).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),u=new V("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[a]:{[`&${a}-top, &${a}-bottom`]:{marginInline:0,[i]:{marginInline:"auto auto"}},[`&${a}-top`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:c}},[`&${a}-bottom`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:r}},[`&${a}-topRight, &${a}-bottomRight`]:{[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:l}},[`&${a}-topLeft, &${a}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:s,_skip_check_:!0},[i]:{marginInlineEnd:"auto",marginInlineStart:0},[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationName:u}}}}},Ae=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],Re={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},De=(t,a)=>{const{componentCls:s}=t;return{[`${s}-${a}`]:{[`&${s}-stack > ${s}-notice-wrapper`]:{[a.startsWith("top")?"top":"bottom"]:0,[Re[a]]:{value:0,_skip_check_:!0}}}}},He=t=>{const a={};for(let s=1;s<t.notificationStackLayer;s++)a[`&:nth-last-child(${s+1})`]={overflow:"hidden",[`& > ${t.componentCls}-notice`]:{opacity:0,transition:`opacity ${t.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${t.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},a)},qe=t=>{const a={};for(let s=1;s<t.notificationStackLayer;s++)a[`&:nth-last-child(${s+1})`]={background:t.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},a)},ze=t=>{const{componentCls:a}=t;return Object.assign({[`${a}-stack`]:{[`& > ${a}-notice-wrapper`]:Object.assign({transition:`transform ${t.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},He(t))},[`${a}-stack:not(${a}-stack-expanded)`]:{[`& > ${a}-notice-wrapper`]:Object.assign({},qe(t))},[`${a}-stack${a}-stack-expanded`]:{[`& > ${a}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${t.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:t.margin,width:"100%",insetInline:0,bottom:t.calc(t.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},Ae.map(s=>De(t,s)).reduce((s,n)=>Object.assign(Object.assign({},s),n),{}))},ce=t=>{const{iconCls:a,componentCls:s,boxShadow:n,fontSizeLG:i,notificationMarginBottom:l,borderRadiusLG:c,colorSuccess:r,colorInfo:u,colorWarning:x,colorError:b,colorTextHeading:j,notificationBg:S,notificationPadding:w,notificationMarginEdge:C,notificationProgressBg:g,notificationProgressHeight:h,fontSize:m,lineHeight:d,width:p,notificationIconSize:v,colorText:I}=t,f=`${s}-notice`;return{position:"relative",marginBottom:l,marginInlineStart:"auto",background:S,borderRadius:c,boxShadow:n,[f]:{padding:w,width:p,maxWidth:`calc(100vw - ${U(t.calc(C).mul(2).equal())})`,overflow:"hidden",lineHeight:d,wordWrap:"break-word"},[`${f}-message`]:{marginBottom:t.marginXS,color:j,fontSize:i,lineHeight:t.lineHeightLG},[`${f}-description`]:{fontSize:m,color:I},[`${f}-closable ${f}-message`]:{paddingInlineEnd:t.paddingLG},[`${f}-with-icon ${f}-message`]:{marginBottom:t.marginXS,marginInlineStart:t.calc(t.marginSM).add(v).equal(),fontSize:i},[`${f}-with-icon ${f}-description`]:{marginInlineStart:t.calc(t.marginSM).add(v).equal(),fontSize:m},[`${f}-icon`]:{position:"absolute",fontSize:v,lineHeight:1,[`&-success${a}`]:{color:r},[`&-info${a}`]:{color:u},[`&-warning${a}`]:{color:x},[`&-error${a}`]:{color:b}},[`${f}-close`]:Object.assign({position:"absolute",top:t.notificationPaddingVertical,insetInlineEnd:t.notificationPaddingHorizontal,color:t.colorIcon,outline:"none",width:t.notificationCloseButtonSize,height:t.notificationCloseButtonSize,borderRadius:t.borderRadiusSM,transition:`background-color ${t.motionDurationMid}, color ${t.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:t.colorIconHover,backgroundColor:t.colorBgTextHover},"&:active":{backgroundColor:t.colorBgTextActive}},ye(t)),[`${f}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${U(c)} * 2)`,left:{_skip_check_:!0,value:c},right:{_skip_check_:!0,value:c},bottom:0,blockSize:h,border:0,"&, &::-webkit-progress-bar":{borderRadius:c,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:g},"&::-webkit-progress-value":{borderRadius:c,background:g}},[`${f}-actions`]:{float:"right",marginTop:t.marginSM}}},Ge=t=>{const{componentCls:a,notificationMarginBottom:s,notificationMarginEdge:n,motionDurationMid:i,motionEaseInOut:l}=t,c=`${a}-notice`,r=new V("antNotificationFadeOut",{"0%":{maxHeight:t.animationMaxHeight,marginBottom:s},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[a]:Object.assign(Object.assign({},be(t)),{position:"fixed",zIndex:t.zIndexPopup,marginRight:{value:n,_skip_check_:!0},[`${a}-hook-holder`]:{position:"relative"},[`${a}-fade-appear-prepare`]:{opacity:"0 !important"},[`${a}-fade-enter, ${a}-fade-appear`]:{animationDuration:t.motionDurationMid,animationTimingFunction:l,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${a}-fade-leave`]:{animationTimingFunction:l,animationFillMode:"both",animationDuration:i,animationPlayState:"paused"},[`${a}-fade-enter${a}-fade-enter-active, ${a}-fade-appear${a}-fade-appear-active`]:{animationPlayState:"running"},[`${a}-fade-leave${a}-fade-leave-active`]:{animationName:r,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${c}-actions`]:{float:"left"}}})},{[a]:{[`${c}-wrapper`]:Object.assign({},ce(t))}}]},de=t=>({zIndexPopup:t.zIndexPopupBase+je+50,width:384}),ue=t=>{const a=t.paddingMD,s=t.paddingLG;return fe(t,{notificationBg:t.colorBgElevated,notificationPaddingVertical:a,notificationPaddingHorizontal:s,notificationIconSize:t.calc(t.fontSizeLG).mul(t.lineHeightLG).equal(),notificationCloseButtonSize:t.calc(t.controlHeightLG).mul(.55).equal(),notificationMarginBottom:t.margin,notificationPadding:`${U(t.paddingMD)} ${U(t.paddingContentHorizontalLG)}`,notificationMarginEdge:t.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${t.colorPrimaryBorderHover}, ${t.colorPrimary})`})},pe=he("Notification",t=>{const a=ue(t);return[Ge(a),Be(a),ze(a)]},de),Ve=ve(["Notification","PurePanel"],t=>{const a=`${t.componentCls}-notice`,s=ue(t);return{[`${a}-pure-panel`]:Object.assign(Object.assign({},ce(s)),{width:s.width,maxWidth:`calc(100vw - ${U(t.calc(s.notificationMarginEdge).mul(2).equal())})`,margin:0})}},de);var Ue=function(t,a){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)a.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};function ee(t,a){return a===null||a===!1?null:a||o.createElement(Ce,{className:`${t}-close-icon`})}const We={success:ke,info:Ie,error:$e,warning:we},me=t=>{const{prefixCls:a,icon:s,type:n,message:i,description:l,actions:c,role:r="alert"}=t;let u=null;return s?u=o.createElement("span",{className:`${a}-icon`},s):n&&(u=o.createElement(We[n]||null,{className:H(`${a}-icon`,`${a}-icon-${n}`)})),o.createElement("div",{className:H({[`${a}-with-icon`]:u}),role:r},u,o.createElement("div",{className:`${a}-message`},i),o.createElement("div",{className:`${a}-description`},l),c&&o.createElement("div",{className:`${a}-actions`},c))},Ye=t=>{const{prefixCls:a,className:s,icon:n,type:i,message:l,description:c,btn:r,actions:u,closable:x=!0,closeIcon:b,className:j}=t,S=Ue(t,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:w}=o.useContext(Z),C=u??r,g=a||w("notification"),h=`${g}-notice`,m=le(g),[d,p,v]=pe(g,m);return d(o.createElement("div",{className:H(`${h}-pure-panel`,p,s,v,m)},o.createElement(Ve,{prefixCls:g}),o.createElement(Se,Object.assign({},S,{prefixCls:g,eventKey:"pure",duration:null,closable:x,className:H({notificationClassName:j}),closeIcon:ee(g,b),content:o.createElement(me,{prefixCls:h,icon:n,type:i,message:l,description:c,actions:C})}))))};function Xe(t,a,s){let n;switch(t){case"top":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:a,bottom:"auto"};break;case"topLeft":n={left:0,top:a,bottom:"auto"};break;case"topRight":n={right:0,top:a,bottom:"auto"};break;case"bottom":n={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:s};break;case"bottomLeft":n={left:0,top:"auto",bottom:s};break;default:n={right:0,top:"auto",bottom:s};break}return n}function Je(t){return{motionName:`${t}-fade`}}function Ke(t,a,s){return typeof t<"u"?t:typeof(a==null?void 0:a.closeIcon)<"u"?a.closeIcon:s==null?void 0:s.closeIcon}var Qe=function(t,a){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&a.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)a.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};const oe=24,Ze=4.5,et="topRight",tt=t=>{let{children:a,prefixCls:s}=t;const n=le(s),[i,l,c]=pe(s,n);return i(P.createElement(Oe,{classNames:{list:H(l,c,n)}},a))},at=(t,a)=>{let{prefixCls:s,key:n}=a;return P.createElement(tt,{prefixCls:s,key:n},t)},nt=P.forwardRef((t,a)=>{const{top:s,bottom:n,prefixCls:i,getContainer:l,maxCount:c,rtl:r,onAllRemoved:u,stack:x,duration:b,pauseOnHover:j=!0,showProgress:S}=t,{getPrefixCls:w,getPopupContainer:C,notification:g,direction:h}=o.useContext(Z),[,m]=_e(),d=i||w("notification"),p=E=>Xe(E,s??oe,n??oe),v=()=>H({[`${d}-rtl`]:r??h==="rtl"}),I=()=>Je(d),[f,$]=Pe({prefixCls:d,style:p,className:v,motion:I,closable:!0,closeIcon:ee(d),duration:b??Ze,getContainer:()=>(l==null?void 0:l())||(C==null?void 0:C())||document.body,maxCount:c,pauseOnHover:j,showProgress:S,onAllRemoved:u,renderNotifications:at,stack:x===!1?!1:{threshold:typeof x=="object"?x==null?void 0:x.threshold:void 0,offset:8,gap:m.margin}});return P.useImperativeHandle(a,()=>Object.assign(Object.assign({},f),{prefixCls:d,notification:g})),$});function xe(t){const a=P.useRef(null);return Fe(),[P.useMemo(()=>{const n=r=>{var u;if(!a.current)return;const{open:x,prefixCls:b,notification:j}=a.current,S=`${b}-notice`,{message:w,description:C,icon:g,type:h,btn:m,actions:d,className:p,style:v,role:I="alert",closeIcon:f,closable:$}=r,E=Qe(r,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),D=d??m,se=ee(S,Ke(f,t,j));return x(Object.assign(Object.assign({placement:(u=t==null?void 0:t.placement)!==null&&u!==void 0?u:et},E),{content:P.createElement(me,{prefixCls:S,icon:g,type:h,message:w,description:C,actions:D,role:I}),className:H(h&&`${S}-${h}`,p,j==null?void 0:j.className),style:Object.assign(Object.assign({},j==null?void 0:j.style),v),closeIcon:se,closable:$??!!se}))},l={open:n,destroy:r=>{var u,x;r!==void 0?(u=a.current)===null||u===void 0||u.close(r):(x=a.current)===null||x===void 0||x.destroy()}};return["success","info","warning","error"].forEach(r=>{l[r]=u=>n(Object.assign(Object.assign({},u),{type:r}))}),l},[]),P.createElement(nt,Object.assign({key:"notification-holder"},t,{ref:a}))]}function st(t){return xe(t)}let N=null,J=t=>t(),K=[],W={};function ie(){const{getContainer:t,rtl:a,maxCount:s,top:n,bottom:i,showProgress:l,pauseOnHover:c}=W,r=(t==null?void 0:t())||document.body;return{getContainer:()=>r,rtl:a,maxCount:s,top:n,bottom:i,showProgress:l,pauseOnHover:c}}const ot=P.forwardRef((t,a)=>{const{notificationConfig:s,sync:n}=t,{getPrefixCls:i}=o.useContext(Z),l=W.prefixCls||i("notification"),c=o.useContext(Te),[r,u]=xe(Object.assign(Object.assign(Object.assign({},s),{prefixCls:l}),c.notification));return P.useEffect(n,[]),P.useImperativeHandle(a,()=>{const x=Object.assign({},r);return Object.keys(x).forEach(b=>{x[b]=function(){return n(),r[b].apply(r,arguments)}}),{instance:x,sync:n}}),u}),it=P.forwardRef((t,a)=>{const[s,n]=P.useState(ie),i=()=>{n(ie)};P.useEffect(i,[]);const l=Ne(),c=l.getRootPrefixCls(),r=l.getIconPrefixCls(),u=l.getTheme(),x=P.createElement(ot,{ref:a,sync:i,notificationConfig:s});return P.createElement(Ee,{prefixCls:c,iconPrefixCls:r,theme:u},l.holderRender?l.holderRender(x):x)});function te(){if(!N){const t=document.createDocumentFragment(),a={fragment:t};N=a,J(()=>{Le()(P.createElement(it,{ref:n=>{const{instance:i,sync:l}=n||{};Promise.resolve().then(()=>{!a.instance&&i&&(a.instance=i,a.sync=l,te())})}}),t)});return}N.instance&&(K.forEach(t=>{switch(t.type){case"open":{J(()=>{N.instance.open(Object.assign(Object.assign({},W),t.config))});break}case"destroy":J(()=>{N==null||N.instance.destroy(t.key)});break}}),K=[])}function lt(t){W=Object.assign(Object.assign({},W),t),J(()=>{var a;(a=N==null?void 0:N.sync)===null||a===void 0||a.call(N)})}function ge(t){K.push({type:"open",config:t}),te()}const rt=t=>{K.push({type:"destroy",key:t}),te()},ct=["success","info","warning","error"],dt={open:ge,destroy:rt,config:lt,useNotification:st,_InternalPanelDoNotUseOrYouWillBeFired:Ye},ae=dt;ct.forEach(t=>{ae[t]=a=>ge(Object.assign(Object.assign({},a),{type:t}))});const ne=({value:t,onChange:a,multiple:s=!0})=>{const[n]=y.useForm(),[i,l]=o.useState(t),[c,r]=ae.useNotification(),[u,x]=o.useState(),[b,j]=o.useState(!1),[S,w]=o.useState(!1),C=[{title:"分析名称",dataIndex:"analysis_name",key:"analysis_name",ellipsis:!0},{title:"id",dataIndex:"id",key:"id"},{title:"分析方法",dataIndex:"analysis_method",key:"analysis_method"},{title:"project",dataIndex:"project",key:"project"},{title:"control",dataIndex:"control",key:"control"},{title:"treatment",dataIndex:"treatment",key:"treatment"},{title:"software",dataIndex:"software",key:"software"},{title:"rank",dataIndex:"rank",key:"rank"},{title:"创建时间",dataIndex:"create_date",key:"create_date"},{title:"操作",key:"action",fixed:"right",width:200,render:(h,m)=>e.jsx(re,{size:"middle",children:e.jsx("a",{onClick:()=>{w(!0),x(m),n.setFieldValue("id",m.id),n.setFieldValue("label",m.analysisName),n.setFieldValue("contentPath",m.content),console.log(m),m.analysis_method=="abundance-venn"?n.setFieldValue("name",`${m.software}-${m.rank}-${m.analysis_method}`):n.setFieldValue("name",`${m.software}-${m.rank}-${m.analysis_method}(${m.treatment} - ${m.control})`)},children:"添加"})})}],g={difference:[{label:"table#`P-value`<0.05",value:"table#`P-value`<0.05"}],prevalence:[{label:"table#type=='Prevalent in both sites'",value:"table#type=='Prevalent in both sites'"},{label:"table#type=='Prevalent in oral cavity' or type=='Prevalent in both sites'",value:"table#type=='Prevalent in oral cavity' or type=='Prevalent in both sites'"},{label:"table#type=='Prevalent in gut'",value:"table#type=='Prevalent in gut'"},{label:"table#type=='Prevalent in gut' or type=='Prevalent in both sites'",value:"table#type=='Prevalent in gut' or type=='Prevalent in both sites'"}],"abundance-venn":[{label:"regions#unique#taxonomy",value:"regions#unique#taxonomy"},{label:"regions#11#taxonomy",value:"regions#11#taxonomy"}]};return e.jsxs(e.Fragment,{children:[t?e.jsxs(e.Fragment,{children:[e.jsx(X,{style:{cursor:"pointer"},onClick:()=>j(!0),children:e.jsx("pre",{children:JSON.stringify(t,null,2)})}),e.jsx("a",{onClick:()=>{a(void 0),l(void 0)},children:"清除"})]}):e.jsx(e.Fragment,{children:e.jsx(L,{onClick:()=>j(!0),children:"添加数据"})}),e.jsxs(M,{footer:e.jsx(e.Fragment,{children:e.jsx(L,{type:"primary",onClick:()=>j(!1),children:"关闭"})}),width:"60%",onOk:async()=>{a(i)},title:u?`${u.software}-${u.rank}-${u.analysis_method}(${u.treatment} - ${u.control})`:"",open:b,onCancel:()=>j(!1),children:[e.jsx(T,{columnsParamsALL:C,shouldTrigger:!0,form:n}),S&&e.jsxs(e.Fragment,{children:[e.jsxs(y,{form:n,children:[e.jsx(y.Item,{name:"contentPath",label:"路径",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(k,{disabled:!0})}),e.jsx(y.Item,{name:"label",label:"标签",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(k,{})}),e.jsx(y.Item,{name:"name",label:"名称",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(k,{})}),e.jsx(y.Item,{name:"query",label:"条件",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:g[u==null?void 0:u.analysis_method]})}),e.jsx(y.Item,{name:"id",style:{display:"none"},children:e.jsx(k,{disabled:!0})})]}),e.jsx(L,{onClick:async()=>{const h=await n.validateFields();if(s){if(Array.isArray(i)){if(i.length>3){c.error({message:"目前只支持3个对象的韦恩图!"});return}if(i.filter(d=>d.name==h.name&&d.query==h.query).length>0){c.error({message:`已经存在name:${h.name};query:${h.query}`});return}i.push(h),l(i),a(i)}else l([h]),a([h]);n.resetFields()}else l(h),a(h);w(!1)},children:"确认"}),e.jsx(L,{onClick:()=>{l([]),w(!1),a(i)},children:"清除"})]}),e.jsx("div",{children:i&&Array.isArray(i)?i.map((h,m)=>e.jsxs("div",{children:[e.jsx(X,{children:e.jsx("pre",{children:JSON.stringify(h,null,2)})}),e.jsx("a",{onClick:()=>{const d=i.filter(p=>p.id!=h.id);l(d),a(d)},children:"删除"})]},m)):e.jsxs(e.Fragment,{children:[e.jsx(X,{children:e.jsx("pre",{children:JSON.stringify(i,null,2)})}),e.jsx("a",{onClick:()=>{a(void 0),l(void 0)},children:"清除"})]})})]}),r]})},R=({form:t,children:a})=>{const{project:s,sampleComposition:n}=q(),[i,l]=o.useState([]),c=y.useWatch("column",t),r=async()=>{const b=(await O.get(`/api/get-group?column=${c}&project=${s}&sample_composition=${n}`)).data.map(j=>({label:`${j.group_name}(${j.count})`,value:j.group_name}));console.log(b),l(b)};o.useEffect(()=>{c&&r()},[c]);const u=y.useWatch(x=>x.id,t);return e.jsxs(e.Fragment,{children:[e.jsxs(y,{form:t,children:[e.jsx(y.Item,{label:"分析id",name:"id",style:{display:"none"},children:e.jsx(k,{})}),e.jsx(y.Item,{label:"分析名称",name:"analysisName",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(k,{})}),e.jsx(y.Item,{initialValue:"metaphlan",name:"software",label:"分析软件",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:[{label:"metaphlan",value:"metaphlan"},{label:"kraken",value:"kraken"}]})}),e.jsx(y.Item,{initialValue:"sample_group",name:"column",label:"分组列",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:[{label:"sample_composition",value:"sample_composition"},{label:"host_disease",value:"host_disease"},{label:"sample_group",value:"sample_group"}]})}),e.jsx(y.Item,{label:"处理组",name:"treatment",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:i})}),e.jsx(y.Item,{label:"对照组",name:"control",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:i})}),e.jsx(y.Item,{initialValue:"SPECIES",label:"rank",name:"rank",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:[{label:"SGB",value:"SGB"},{label:"SPECIES",value:"SPECIES"},{label:"GENUS",value:"GENUS"},{label:"FAMILY",value:"FAMILY"},{label:"ORDER",value:"ORDER"},{label:"CLASS",value:"CLASS"},{label:"PHYLUM",value:"PHYLUM"}]})}),a]}),u?e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>t.setFieldValue("id",void 0),children:"更新"}),e.jsx("a",{onClick:()=>t.resetFields(),children:"清除"})]}):e.jsx(e.Fragment,{children:"新增"})]})},ut=({form:t})=>{const{project:a,sampleComposition:s}=q(),[n,i]=o.useState([]),l=y.useWatch("column",t);o.useEffect(()=>{},[l]);const c=y.useWatch(r=>r.id,t);return e.jsxs(e.Fragment,{children:[e.jsxs(y,{form:t,children:[e.jsx(y.Item,{label:"分析id",name:"id",style:{display:"none"},children:e.jsx(k,{})}),e.jsx(y.Item,{label:"分析名称",name:"analysisName",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(k,{})}),e.jsx(y.Item,{initialValue:"SPECIES",label:"rank",name:"rank",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(A,{allowClear:!0,options:[{label:"SGB",value:"SGB"},{label:"SPECIES",value:"SPECIES"},{label:"GENUS",value:"GENUS"},{label:"FAMILY",value:"FAMILY"},{label:"ORDER",value:"ORDER"},{label:"CLASS",value:"CLASS"},{label:"PHYLUM",value:"PHYLUM"}]})}),e.jsx(y.Item,{name:"params",label:"params",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(ne,{})})]}),c?e.jsxs(e.Fragment,{children:[e.jsx("a",{onClick:()=>t.setFieldValue("id",void 0),children:"更新"}),e.jsx("a",{onClick:()=>t.resetFields(),children:"清除"})]}):e.jsx(e.Fragment,{children:"新增"})]})},pt=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState({}),{project:l}=q(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),[C,g]=o.useState([]),{Search:h}=k,m=async()=>{const f=await t.validateFields();console.log(f),s(!0);const $=await O.post("/jupyter/get--compare-abundance",{...f,project:l});i($.data),g($.data.table),s(!1),console.log($)},d=f=>{i(f),g(f.table)},p=async f=>{const $=await t.validateFields();x(f),w(!0);const E=await O.post("/jupyter/abundance-boxplot",{project:l,taxonomy:f,...$});j(E.data),w(!1)},v=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy",render:(f,$)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"javascript:;",onClick:()=>{p($.taxonomy),r(!0)},children:$.taxonomy})})},{title:"tax_id",dataIndex:"tax_id",key:"tax_id",render:(f,$)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:`https://www.ncbi.nlm.nih.gov/datasets/taxonomy/${$.tax_id}/`,target:"__blank",children:$.tax_id})})},{title:"rank",dataIndex:"rank",key:"rank"},{title:"Statistic",dataIndex:"Statistic",key:"Statistic"},{title:"P-value",dataIndex:"P-value",key:"P-value"},{title:"log2foldchange",dataIndex:"log2foldchange",key:"log2foldchange"},{title:"fdr_bh",dataIndex:"fdr_bh",key:"fdr_bh"},{title:"AdjustedP-value",dataIndex:"AdjustedP-value",key:"AdjustedP-value"}],I=()=>{const f=n==null?void 0:n.table.filter(D=>D["P-value"]<.05),$=f.filter(D=>D.log2foldchange>0),E=f.filter(D=>D.log2foldchange<0);return`总共有${f.length}个分类，其中上调的有${$.length}个，下调的有${E.length}多个`};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t}),e.jsx(L,{onClick:m,children:"提交"}),e.jsx(T,{analysisMethod:"difference",shouldTrigger:!a,form:t,setTableLoading:s,setTabletData:d})]}),e.jsxs(F,{lg:12,sm:24,xs:24,children:[(n==null?void 0:n.img)&&e.jsx(e.Fragment,{children:e.jsx(_,{width:"50%",src:n==null?void 0:n.img})}),e.jsx("p",{children:(n==null?void 0:n.table)&&e.jsxs(e.Fragment,{children:["一共鉴定到",n==null?void 0:n.table.length,"个分类，其中根据pvalue 小于 0.05筛选，",I()]})}),e.jsx(h,{placeholder:"input search text",allowClear:!0,onSearch:f=>{const $=n==null?void 0:n.table.filter(E=>E.taxonomy.includes(f)||E.tax_id&&E.tax_id.includes(f));g($)},style:{width:304}}),e.jsx(G,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content",y:55*5},columns:v,dataSource:C})]}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},mt=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState(),{project:l}=Y(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),{Search:C}=k,g=async()=>{const d=await t.validateFields();console.log(d),s(!0);const p=await O.post("/jupyter/abundance-roc",{...d,project:l});i(p.data),s(!1),console.log(p)},h=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy",render:(d,p)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"javascript:;",onClick:()=>{m(p.taxonomy),r(!0)},children:p.taxonomy})})},{title:"tax_id",dataIndex:"tax_id",key:"tax_id",render:(d,p)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:`https://www.ncbi.nlm.nih.gov/datasets/taxonomy/${p.tax_id}/`,target:"__blank",children:p.tax_id})})},{title:"rank",dataIndex:"rank",key:"rank"},{title:"Importance",dataIndex:"Importance",key:"Importance"}],m=async d=>{const p=await t.validateFields();x(d),w(!0);const v=await O.post("/jupyter/abundance-boxplot",{project:l,taxonomy:d,...p});j(v.data),w(!1)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t}),e.jsx(L,{onClick:g,children:"提交"}),e.jsx(T,{analysisMethod:"roc",shouldTrigger:!0,form:t,setTableLoading:s,setTabletData:d=>{i(d)}})]}),e.jsx(F,{lg:12,sm:24,xs:24,children:e.jsx(z,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(Q,{items:[{key:"roc",label:"roc",children:e.jsx(_,{width:"100%",src:n==null?void 0:n.img})},{key:"importance",label:"importance",children:e.jsxs(e.Fragment,{children:[e.jsx(G,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content"},columns:h,dataSource:n.importance?n.importance:[]}),e.jsx("p",{children:e.jsx("ol",{children:e.jsx("li",{children:"Importance: 特征重要性反映每个特征在决策树分裂时对降低不纯度的平均贡献。权重值越大，表示该特征对分类的影响越显著。"})})}),e.jsx("p",{})]})}]})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},xt=()=>{const[t,a]=o.useState([]),[s,n]=o.useState(!1),{project:i}=Y(),[l,c]=o.useState(!1),[r,u]=o.useState(),[x,b]=o.useState(!1),[j,S]=o.useState([]),{Search:w}=k,C=async()=>{n(!0);const d=await O.get(`/api/abundance?project=${i}`);console.log(d),n(!1),a(d.data)},g=async d=>{b(!0);const p=await O.get(`/api/read-hdfs?path=${d}`);console.log(p.data),S(p.data),b(!1)},h=[{title:"样本名称",dataIndex:"sample_name",key:"sample_name"},{title:"数据版本",dataIndex:"data_version",key:"data_version"},{title:"software",dataIndex:"software",key:"software"},{title:"sample_composition",dataIndex:"sample_composition",key:"sample_composition"},{title:"host_disease",dataIndex:"host_disease",key:"host_disease"},{title:"sample_group",dataIndex:"sample_group",key:"sample_group"},{title:"项目",dataIndex:"project",key:"project"},{title:"操作",key:"action",fixed:"left",width:100,render:(d,p)=>e.jsx(re,{size:"middle",children:e.jsx("a",{onClick:()=>{u(p),g(p.content),c(!0)},children:"查看"})})}],m=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy"},{title:"relative_abundance",dataIndex:"relative_abundance",key:"relative_abundance"},{title:"tax_id",dataIndex:"tax_id",key:"tax_id"},{title:"rank",dataIndex:"rank",key:"rank"},{title:"additional_species",dataIndex:"additional_species",key:"additional_species"}];return o.useEffect(()=>{C()},[]),e.jsxs(e.Fragment,{children:[t&&e.jsxs(e.Fragment,{children:["鉴定丰度的样本数量",t.length]}),e.jsx(L,{onClick:C,children:"刷新"}),e.jsx(G,{pagination:{pageSize:30},loading:s,scroll:{x:"max-content"},columns:h,dataSource:t}),e.jsxs(Me,{extra:e.jsx(e.Fragment,{children:e.jsx(L,{onClick:()=>g(r==null?void 0:r.content_path),children:"刷新"})}),loading:x,title:r?r.sample_name:"",open:l,onClose:()=>c(!1),width:"80%",children:[e.jsx(w,{placeholder:"input search text",allowClear:!0,onSearch:d=>{const p=j.filter(v=>v.taxonomy.includes(d));S(p)},style:{width:304}}),e.jsx(G,{pagination:{pageSize:30},loading:x,scroll:{x:"max-content"},columns:m,dataSource:j})]})]})},gt=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState(),{project:l}=q(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),{Search:C}=k,g=async()=>{const h=await t.validateFields();console.log(h),s(!0);const m=await O.post("/jupyter/abundance-diversity",{...h,project:l});i(m.data),s(!1),console.log(m)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t}),e.jsx(L,{onClick:g,children:"提交"}),e.jsx(T,{analysisMethod:"diversity-alpha",shouldTrigger:!0,form:t,setTableLoading:s,setTabletData:h=>{i(h)}})]}),e.jsx(F,{lg:12,sm:24,xs:24,children:e.jsx(z,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(Q,{items:[{key:"roc",label:"roc",children:e.jsx(_,{width:"100%",src:n==null?void 0:n.img})}]})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},ht=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState(),{project:l}=q(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),[C,g]=o.useState(!0),{Search:h}=k,m=async()=>{const d=await t.validateFields();console.log(d),s(!0),g(!1);const p=await O.post("/jupyter/abundance-diversity-beta",{...d,project:l});i(p.data),g(!0),s(!1),console.log(p)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t}),e.jsx(L,{onClick:m,children:"提交"}),e.jsx(T,{analysisMethod:"diversity-beta",shouldTrigger:C,form:t,setTableLoading:s,setTabletData:d=>{i(d)}})]}),e.jsx(F,{lg:12,sm:24,xs:24,children:e.jsx(z,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(Q,{items:[{key:"roc",label:"roc",children:e.jsx(_,{width:"100%",src:n==null?void 0:n.img})}]})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},ft=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState({}),[l,c]=o.useState([]),{project:r}=Y(),[u,x]=o.useState(!1),[b,j]=o.useState(""),[S,w]=o.useState(""),[C,g]=o.useState(!1),{Search:h}=k,m=async()=>{const v=await t.validateFields();console.log(v),s(!0);const I=await O.post("/jupyter/abundance-prevalence ",{...v,project:r});i(I.data),c(I.data.table),s(!1)},d=async v=>{const I=await t.validateFields();j(v),g(!0);const f=await O.post("/jupyter/abundance-boxplot",{project:r,taxonomy:v,...I});w(f.data),g(!1)},p=[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy",render:(v,I)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:"javascript:;",onClick:()=>{d(I.taxonomy),x(!0)},children:I.taxonomy})})},{title:"tax_id",dataIndex:"tax_id",key:"tax_id",render:(v,I)=>e.jsx(e.Fragment,{children:e.jsx("a",{href:`https://www.ncbi.nlm.nih.gov/datasets/taxonomy/${I.tax_id}/`,target:"__blank",children:I.tax_id})})},{title:"rank",dataIndex:"rank",key:"rank"},{title:"oral_prev",dataIndex:"oral_prev",key:"oral_prev"},{title:"faeces_prev",dataIndex:"faeces_prev",key:"faeces_prev"},{title:"类型",dataIndex:"type",key:"type"}];return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t}),e.jsx(L,{onClick:m,children:"提交"}),e.jsx(T,{analysisMethod:"prevalence",shouldTrigger:!0,form:t,setTableLoading:s,setTabletData:v=>{i(v),c(v.table)}})]}),e.jsxs(F,{lg:12,sm:24,xs:24,children:[(n==null?void 0:n.img)&&e.jsx(e.Fragment,{children:e.jsx(_,{width:"50%",src:n==null?void 0:n.img})}),e.jsx("p",{children:n!=null&&n.desc?n.desc:""}),e.jsx("div",{children:e.jsx(h,{placeholder:"input search text",allowClear:!0,onSearch:v=>{const I=n.table.filter(f=>f.type.includes(v)||f.taxonomy.includes(v));c(I)},style:{width:304}})}),e.jsx(G,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content",y:55*5},columns:p,dataSource:l})]}),e.jsx(M,{loading:C,title:b,width:"50%",open:u,footer:e.jsx(e.Fragment,{}),onCancel:()=>x(!1),children:e.jsx(_,{width:"100%",src:S})})]})})},bt=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState(),{project:l}=Y(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),[C,g]=o.useState(!0),{Search:h}=k,m=async()=>{const d=await t.validateFields();console.log(d),s(!0),g(!1);const p=await O.post("/jupyter/abundance-stacked-diagram",{...d,project:l});i(p.data),g(!0),s(!1),console.log(p)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t,children:e.jsx(y.Item,{name:"params",label:"params",children:e.jsx(ne,{multiple:!1})})}),e.jsx(L,{onClick:m,children:"提交"}),e.jsx(T,{analysisMethod:"stacked-diagram",shouldTrigger:C,form:t,setTableLoading:s,setTabletData:d=>{i(d)}})]}),e.jsx(F,{lg:12,sm:24,xs:24,children:e.jsx(z,{spinning:a,tip:"正在计算中...",children:n?e.jsxs(e.Fragment,{children:[e.jsx(_,{width:"100%",src:n==null?void 0:n.img}),"一共",n.table.length,"条记录",e.jsx(G,{pagination:{pageSize:30},loading:a,scroll:{x:"max-content",y:55*5},columns:[{title:"taxonomy",dataIndex:"taxonomy",key:"taxonomy"}],dataSource:n.table})]}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},jt=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState(),{project:l}=q(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),[C,g]=o.useState(!0),{Search:h}=k,m=async()=>{const d=await t.validateFields();console.log(d),s(!0),g(!1);const p=await O.post("/jupyter/abundance-pie",{...d,project:l});i(p.data),g(!0),s(!1),console.log(p)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(R,{form:t}),e.jsx(L,{onClick:m,children:"提交"}),e.jsx(T,{analysisMethod:"abundance-pie",shouldTrigger:C,form:t,setTableLoading:s,setTabletData:d=>{i(d)}})]}),e.jsx(F,{lg:12,sm:24,xs:24,children:e.jsx(z,{spinning:a,tip:"正在计算中...",children:n?e.jsx(e.Fragment,{children:e.jsx(_,{width:"100%",src:n==null?void 0:n.img})}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},yt=()=>{const[t,a]=o.useState(!1),[s,n]=o.useState(),{project:i}=Y(),[l,c]=o.useState(!1),[r,u]=o.useState({}),[x,b]=o.useState([]),{Search:j}=k,[S,w]=ae.useNotification(),[C,g]=o.useState(!0),[h]=y.useForm(),[m]=y.useForm(),d=async()=>{const p=await m.validateFields();a(!0),g(!1);const v=await O.post("/jupyter/abundance-venn",{...p,project:i});g(!0),n(v.data),a(!1)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(ut,{form:m}),e.jsx(L,{onClick:d,children:"提交"}),e.jsx(T,{analysisMethod:"abundance-venn",shouldTrigger:C,form:m,setTableLoading:a,setTabletData:p=>{n(p)}})]}),e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsx(z,{spinning:t,tip:"正在计算中...",children:s?e.jsxs(e.Fragment,{children:[e.jsx(_,{width:"50%",src:s==null?void 0:s.img}),e.jsxs("table",{className:"result-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"binary_code"}),e.jsx("th",{children:"label"}),e.jsx("th",{children:"count"}),e.jsx("th",{children:"操作"})]})}),e.jsx("tbody",{children:s.regions.map((p,v)=>e.jsxs("tr",{children:[e.jsx("td",{children:p.binary_code}),e.jsx("td",{children:p.label}),e.jsx("td",{children:p.count}),e.jsx("td",{children:e.jsx("a",{onClick:()=>{b(p.elements)},style:{whiteSpace:"nowrap"},children:"查看元素"})})]},v))})]}),x.length>0&&e.jsx(e.Fragment,{children:e.jsxs("table",{className:"result-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"index"}),e.jsx("th",{children:"name"})]})}),e.jsx("tbody",{children:x.map((p,v)=>e.jsxs("tr",{children:[e.jsx("td",{children:v+1}),e.jsx("td",{children:e.jsx("a",{onClick:()=>{u({project:i,taxonomy:p.taxonomy,column:"sample_group",rank:"SPECIES",software:"metaphlan"}),c(!0)},children:p.taxonomy})})]},v))})]})})]}):e.jsx("div",{style:{height:"100px"}})}),e.jsx(vt,{boxplotParam:r,open:l,setOpen:c})]})]})})},vt=({boxplotParam:t,open:a,setOpen:s})=>{const[n,i]=o.useState(""),[l,c]=o.useState(!1),r=async()=>{c(!0);const u=await O.post("/jupyter/abundance-boxplot",{...t});i(u.data),c(!1)};return o.useEffect(()=>{a&&r()},[a]),e.jsx(e.Fragment,{children:e.jsxs(M,{loading:l,title:"箱线图",width:"50%",open:a,footer:e.jsx(e.Fragment,{}),onCancel:()=>s(!1),children:[e.jsx(_,{width:"100%",src:n}),e.jsx(X,{children:e.jsx("pre",{children:JSON.stringify(t,null,2)})})]})})},St=()=>{const[t]=y.useForm(),[a,s]=o.useState(!1),[n,i]=o.useState(),{project:l}=q(),[c,r]=o.useState(!1),[u,x]=o.useState(""),[b,j]=o.useState(""),[S,w]=o.useState(!1),[C,g]=o.useState(!0),{Search:h}=k,m=async()=>{const d=await t.validateFields();console.log(d),s(!0),g(!1);const p=await O.post("/jupyter/abundance-cumulative-abundance",{...d,project:l});i(p.data),g(!0),s(!1),console.log(p)};return e.jsx(e.Fragment,{children:e.jsxs(B,{children:[e.jsxs(F,{lg:12,sm:24,xs:24,children:[e.jsxs(R,{form:t,children:[e.jsx(y.Item,{label:"累积类型",name:"yType",children:e.jsx(A,{options:[{label:"sum",value:"sum"},{label:"count",value:"count"}]})}),e.jsx(y.Item,{name:"params",label:"params",rules:[{required:!0,message:"该字段不能为空!"}],children:e.jsx(ne,{multiple:!0})})]}),e.jsx(L,{onClick:m,children:"提交"}),e.jsx(T,{analysisMethod:"cumulative-abundance",shouldTrigger:C,form:t,setTableLoading:s,setTabletData:d=>{i(d)}})]}),e.jsx(F,{lg:12,sm:24,xs:24,children:e.jsx(z,{spinning:a,tip:"正在计算中...",children:n?e.jsxs(e.Fragment,{children:[e.jsx(_,{width:"100%",src:n==null?void 0:n.img}),(n==null?void 0:n.describe)&&e.jsx("p",{children:n==null?void 0:n.describe})]}):e.jsx("div",{style:{height:"100px"}})})}),e.jsx(M,{loading:S,title:u,width:"50%",open:c,footer:e.jsx(e.Fragment,{}),onCancel:()=>r(!1),children:e.jsx(_,{width:"100%",src:b})})]})})},kt=()=>e.jsx(e.Fragment,{children:e.jsx(Q,{items:[{key:"diversity-alphattmp",label:"alpha多样性",children:e.jsx(gt,{})},{key:"diversity-beta",label:"beta多样性",children:e.jsx(ht,{})},{key:"stacked-diagram",label:"堆叠图",children:e.jsx(bt,{})},{key:"pie",label:"饼图",children:e.jsx(jt,{})},{key:"difference",label:"差异分析",children:e.jsx(pt,{})},{key:"roc",label:"ROC分析",children:e.jsx(mt,{})},{key:"prevalence",label:"流行率分析",children:e.jsx(ft,{})},{key:"cumulative-abundance",label:"累积丰度",children:e.jsx(St,{})},{key:"venn",label:"集合分析",children:e.jsx(yt,{})},{key:"abundanceTable",label:"丰度表格",children:e.jsx(xt,{})}]})});export{kt as default};
