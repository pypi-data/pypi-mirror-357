import{r as l,l as I,R as y,ad as ne,ae as Fe,B as oe,af as Re,ag as V,ah as le,ai as Le,Z as ae,V as W,W as se,aj as re,X as T,ak as ze,al as G,am as We,an as Ae,ao as Ve,ap as De,aq as z,ar as He,U as _e,as as qe,at as Xe,N as U,au as Ze,a8 as ce,a4 as Qe,P as Ge,$ as Ue,a0 as Ye,a2 as Je,a1 as Ke,a9 as et,a7 as tt,av as nt,aw as ot,ax as lt}from"./index-DDPiedLI.js";import{u as at}from"./context-_LvM5ICY.js";function st(){const[e,n]=l.useState([]),a=l.useCallback(t=>(n(o=>[].concat(I(o),[t])),()=>{n(o=>o.filter(c=>c!==t))}),[]);return[e,a]}const M=y.createContext({}),{Provider:ie}=M,Y=()=>{const{autoFocusButton:e,cancelButtonProps:n,cancelTextLocale:a,isSilent:t,mergedOkCancel:o,rootPrefixCls:c,close:g,onCancel:i,onConfirm:r}=l.useContext(M);return o?y.createElement(ne,{isSilent:t,actionFn:i,close:function(){g==null||g.apply(void 0,arguments),r==null||r(!1)},autoFocus:e==="cancel",buttonProps:n,prefixCls:`${c}-btn`},a):null},J=()=>{const{autoFocusButton:e,close:n,isSilent:a,okButtonProps:t,rootPrefixCls:o,okTextLocale:c,okType:g,onConfirm:i,onOk:r}=l.useContext(M);return y.createElement(ne,{isSilent:a,type:g||"primary",actionFn:r,close:function(){n==null||n.apply(void 0,arguments),i==null||i(!0)},autoFocus:e==="ok",buttonProps:t,prefixCls:`${o}-btn`},c)},rt=()=>Fe()&&window.document.documentElement,K=()=>{const{cancelButtonProps:e,cancelTextLocale:n,onCancel:a}=l.useContext(M);return y.createElement(oe,Object.assign({onClick:a},e),n)},ee=()=>{const{confirmLoading:e,okButtonProps:n,okType:a,okTextLocale:t,onOk:o}=l.useContext(M);return y.createElement(oe,Object.assign({},Re(a),{loading:e,onClick:o},n),t)};function ue(e,n){return y.createElement("span",{className:`${e}-close-x`},n||y.createElement(ae,{className:`${e}-close-icon`}))}const de=e=>{const{okText:n,okType:a="primary",cancelText:t,confirmLoading:o,onOk:c,onCancel:g,okButtonProps:i,cancelButtonProps:r,footer:b}=e,[s]=V("Modal",le()),d=n||(s==null?void 0:s.okText),u=t||(s==null?void 0:s.cancelText),m={confirmLoading:o,okButtonProps:i,cancelButtonProps:r,okTextLocale:d,cancelTextLocale:u,okType:a,onOk:c,onCancel:g},p=y.useMemo(()=>m,I(Object.values(m)));let f;return typeof b=="function"||typeof b>"u"?(f=y.createElement(y.Fragment,null,y.createElement(K,null),y.createElement(ee,null)),typeof b=="function"&&(f=b(f,{OkBtn:ee,CancelBtn:K})),f=y.createElement(ie,{value:p},f)):f=b,y.createElement(Le,{disabled:!1},f)};var ct=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};let A;const it=e=>{A={x:e.pageX,y:e.pageY},setTimeout(()=>{A=null},100)};rt()&&document.documentElement.addEventListener("click",it,!0);const fe=e=>{const{prefixCls:n,className:a,rootClassName:t,open:o,wrapClassName:c,centered:g,getContainer:i,focusTriggerAfterClose:r=!0,style:b,visible:s,width:d=520,footer:u,classNames:m,styles:p,children:f,loading:C,confirmLoading:v,zIndex:x,mousePosition:P,onOk:$,onCancel:h}=e,k=ct(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel"]),{getPopupContainer:F,getPrefixCls:S,direction:he,modal:O}=l.useContext(W),D=w=>{v||h==null||h(w)},$e=w=>{$==null||$(w)},E=S("modal",n),H=S(),_=se(E),[Ee,q,je]=re(E,_),we=T(c,{[`${E}-centered`]:g??(O==null?void 0:O.centered),[`${E}-wrap-rtl`]:he==="rtl"}),Te=u!==null&&!C?l.createElement(de,Object.assign({},e,{onOk:$e,onCancel:D})):null,[X,Z,Ie]=ze(G(e),G(O),{closable:!0,closeIcon:l.createElement(ae,{className:`${E}-close-icon`}),closeIconRender:w=>ue(E,w)}),Ne=at(`.${E}-content`),[Se,ke]=We("Modal",x),[Me,R]=l.useMemo(()=>d&&typeof d=="object"?[void 0,d]:[d,void 0],[d]),Be=l.useMemo(()=>{const w={};return R&&Object.keys(R).forEach(Q=>{const L=R[Q];L!==void 0&&(w[`--${E}-${Q}-width`]=typeof L=="number"?`${L}px`:L)}),w},[R]);return Ee(l.createElement(Ae,{form:!0,space:!0},l.createElement(Ve.Provider,{value:ke},l.createElement(De,Object.assign({width:Me},k,{zIndex:Se,getContainer:i===void 0?F:i,prefixCls:E,rootClassName:T(q,t,je,_),footer:Te,visible:o??s,mousePosition:P??A,onClose:D,closable:X&&{disabled:Ie,closeIcon:Z},closeIcon:Z,focusTriggerAfterClose:r,transitionName:z(H,"zoom",e.transitionName),maskTransitionName:z(H,"fade",e.maskTransitionName),className:T(q,a,O==null?void 0:O.className),style:Object.assign(Object.assign(Object.assign({},O==null?void 0:O.style),b),Be),classNames:Object.assign(Object.assign(Object.assign({},O==null?void 0:O.classNames),m),{wrapper:T(we,m==null?void 0:m.wrapper)}),styles:Object.assign(Object.assign({},O==null?void 0:O.styles),p),panelRef:Ne}),C?l.createElement(He,{active:!0,title:!1,paragraph:{rows:4},className:`${E}-body-skeleton`}):f))))},ut=e=>{const{componentCls:n,titleFontSize:a,titleLineHeight:t,modalConfirmIconSize:o,fontSize:c,lineHeight:g,modalTitleHeight:i,fontHeight:r,confirmBodyPadding:b}=e,s=`${n}-confirm`;return{[s]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${s}-body-wrapper`]:Object.assign({},Ze()),[`&${n} ${n}-body`]:{padding:b},[`${s}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:o,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(r).sub(o).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(i).sub(o).equal()).div(2).equal()}},[`${s}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${U(e.marginSM)})`},[`${e.iconCls} + ${s}-paragraph`]:{maxWidth:`calc(100% - ${U(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${s}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:a,lineHeight:t},[`${s}-content`]:{color:e.colorText,fontSize:c,lineHeight:g},[`${s}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${s}-error ${s}-body > ${e.iconCls}`]:{color:e.colorError},[`${s}-warning ${s}-body > ${e.iconCls},
        ${s}-confirm ${s}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${s}-info ${s}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${s}-success ${s}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},dt=_e(["Modal","confirm"],e=>{const n=qe(e);return[ut(n)]},Xe,{order:-1e3});var ft=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};function me(e){const{prefixCls:n,icon:a,okText:t,cancelText:o,confirmPrefixCls:c,type:g,okCancel:i,footer:r,locale:b}=e,s=ft(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let d=a;if(!a&&a!==null)switch(g){case"info":d=l.createElement(Ke,null);break;case"success":d=l.createElement(Je,null);break;case"error":d=l.createElement(Ye,null);break;default:d=l.createElement(Ue,null)}const u=i??g==="confirm",m=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[p]=V("Modal"),f=b||p,C=t||(u?f==null?void 0:f.okText:f==null?void 0:f.justOkText),v=o||(f==null?void 0:f.cancelText),x=Object.assign({autoFocusButton:m,cancelTextLocale:v,okTextLocale:C,mergedOkCancel:u},s),P=l.useMemo(()=>x,I(Object.values(x))),$=l.createElement(l.Fragment,null,l.createElement(Y,null),l.createElement(J,null)),h=e.title!==void 0&&e.title!==null,k=`${c}-body`;return l.createElement("div",{className:`${c}-body-wrapper`},l.createElement("div",{className:T(k,{[`${k}-has-title`]:h})},d,l.createElement("div",{className:`${c}-paragraph`},h&&l.createElement("span",{className:`${c}-title`},e.title),l.createElement("div",{className:`${c}-content`},e.content))),r===void 0||typeof r=="function"?l.createElement(ie,{value:P},l.createElement("div",{className:`${c}-btns`},typeof r=="function"?r($,{OkBtn:J,CancelBtn:Y}):$)):r,l.createElement(dt,{prefixCls:n}))}const mt=e=>{const{close:n,zIndex:a,maskStyle:t,direction:o,prefixCls:c,wrapClassName:g,rootPrefixCls:i,bodyStyle:r,closable:b=!1,onConfirm:s,styles:d}=e,u=`${c}-confirm`,m=e.width||416,p=e.style||{},f=e.mask===void 0?!0:e.mask,C=e.maskClosable===void 0?!1:e.maskClosable,v=T(u,`${u}-${e.type}`,{[`${u}-rtl`]:o==="rtl"},e.className),[,x]=Qe(),P=l.useMemo(()=>a!==void 0?a:x.zIndexPopupBase+Ge,[a,x]);return l.createElement(fe,Object.assign({},e,{className:v,wrapClassName:T({[`${u}-centered`]:!!e.centered},g),onCancel:()=>{n==null||n({triggerCancel:!0}),s==null||s(!1)},title:"",footer:null,transitionName:z(i||"","zoom",e.transitionName),maskTransitionName:z(i||"","fade",e.maskTransitionName),mask:f,maskClosable:C,style:p,styles:Object.assign({body:r,mask:t},d),width:m,zIndex:P,closable:b}),l.createElement(me,Object.assign({},e,{confirmPrefixCls:u})))},Ce=e=>{const{rootPrefixCls:n,iconPrefixCls:a,direction:t,theme:o}=e;return l.createElement(ce,{prefixCls:n,iconPrefixCls:a,direction:t,theme:o},l.createElement(mt,Object.assign({},e)))},N=[];let ge="";function ve(){return ge}const Ct=e=>{var n,a;const{prefixCls:t,getContainer:o,direction:c}=e,g=le(),i=l.useContext(W),r=ve()||i.getPrefixCls(),b=t||`${r}-modal`;let s=o;return s===!1&&(s=void 0),y.createElement(Ce,Object.assign({},e,{rootPrefixCls:r,prefixCls:b,iconPrefixCls:i.iconPrefixCls,theme:i.theme,direction:c??i.direction,locale:(a=(n=i.locale)===null||n===void 0?void 0:n.Modal)!==null&&a!==void 0?a:g,getContainer:s}))};function B(e){const n=et(),a=document.createDocumentFragment();let t=Object.assign(Object.assign({},e),{close:r,open:!0}),o,c;function g(){for(var s,d=arguments.length,u=new Array(d),m=0;m<d;m++)u[m]=arguments[m];if(u.some(C=>C==null?void 0:C.triggerCancel)){var f;(s=e.onCancel)===null||s===void 0||(f=s).call.apply(f,[e,()=>{}].concat(I(u.slice(1))))}for(let C=0;C<N.length;C++)if(N[C]===r){N.splice(C,1);break}c()}function i(s){clearTimeout(o),o=setTimeout(()=>{const d=n.getPrefixCls(void 0,ve()),u=n.getIconPrefixCls(),m=n.getTheme(),p=y.createElement(Ct,Object.assign({},s));c=tt()(y.createElement(ce,{prefixCls:d,iconPrefixCls:u,theme:m},n.holderRender?n.holderRender(p):p),a)})}function r(){for(var s=arguments.length,d=new Array(s),u=0;u<s;u++)d[u]=arguments[u];t=Object.assign(Object.assign({},t),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),g.apply(this,d)}}),t.visible&&delete t.visible,i(t)}function b(s){typeof s=="function"?t=s(t):t=Object.assign(Object.assign({},t),s),i(t)}return i(t),N.push(r),{destroy:r,update:b}}function be(e){return Object.assign(Object.assign({},e),{type:"warning"})}function xe(e){return Object.assign(Object.assign({},e),{type:"info"})}function pe(e){return Object.assign(Object.assign({},e),{type:"success"})}function ye(e){return Object.assign(Object.assign({},e),{type:"error"})}function Oe(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function gt(e){let{rootPrefixCls:n}=e;ge=n}var vt=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};const bt=(e,n)=>{var a,{afterClose:t,config:o}=e,c=vt(e,["afterClose","config"]);const[g,i]=l.useState(!0),[r,b]=l.useState(o),{direction:s,getPrefixCls:d}=l.useContext(W),u=d("modal"),m=d(),p=()=>{var x;t(),(x=r.afterClose)===null||x===void 0||x.call(r)},f=function(){var x;i(!1);for(var P=arguments.length,$=new Array(P),h=0;h<P;h++)$[h]=arguments[h];if($.some(S=>S==null?void 0:S.triggerCancel)){var F;(x=r.onCancel)===null||x===void 0||(F=x).call.apply(F,[r,()=>{}].concat(I($.slice(1))))}};l.useImperativeHandle(n,()=>({destroy:f,update:x=>{b(P=>Object.assign(Object.assign({},P),x))}}));const C=(a=r.okCancel)!==null&&a!==void 0?a:r.type==="confirm",[v]=V("Modal",nt.Modal);return l.createElement(Ce,Object.assign({prefixCls:u,rootPrefixCls:m},r,{close:f,open:g,afterClose:p,okText:r.okText||(C?v==null?void 0:v.okText:v==null?void 0:v.justOkText),direction:r.direction||s,cancelText:r.cancelText||(v==null?void 0:v.cancelText)},c))},xt=l.forwardRef(bt);let te=0;const pt=l.memo(l.forwardRef((e,n)=>{const[a,t]=st();return l.useImperativeHandle(n,()=>({patchElement:t}),[]),l.createElement(l.Fragment,null,a)}));function yt(){const e=l.useRef(null),[n,a]=l.useState([]);l.useEffect(()=>{n.length&&(I(n).forEach(g=>{g()}),a([]))},[n]);const t=l.useCallback(c=>function(i){var r;te+=1;const b=l.createRef();let s;const d=new Promise(C=>{s=C});let u=!1,m;const p=l.createElement(xt,{key:`modal-${te}`,config:c(i),ref:b,afterClose:()=>{m==null||m()},isSilent:()=>u,onConfirm:C=>{s(C)}});return m=(r=e.current)===null||r===void 0?void 0:r.patchElement(p),m&&N.push(m),{destroy:()=>{function C(){var v;(v=b.current)===null||v===void 0||v.destroy()}b.current?C():a(v=>[].concat(I(v),[C]))},update:C=>{function v(){var x;(x=b.current)===null||x===void 0||x.update(C)}b.current?v():a(x=>[].concat(I(x),[v]))},then:C=>(u=!0,d.then(C))}},[]);return[l.useMemo(()=>({info:t(xe),success:t(pe),error:t(ye),warning:t(be),confirm:t(Oe)}),[]),l.createElement(pt,{key:"modal-holder",ref:e})]}var Ot=function(e,n){var a={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(a[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(e);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(e,t[o])&&(a[t[o]]=e[t[o]]);return a};const Pt=e=>{const{prefixCls:n,className:a,closeIcon:t,closable:o,type:c,title:g,children:i,footer:r}=e,b=Ot(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:s}=l.useContext(W),d=s(),u=n||s("modal"),m=se(d),[p,f,C]=re(u,m),v=`${u}-confirm`;let x={};return c?x={closable:o??!1,title:"",footer:"",children:l.createElement(me,Object.assign({},e,{prefixCls:u,confirmPrefixCls:v,rootPrefixCls:d,content:i}))}:x={closable:o??!0,title:g,footer:r!==null&&l.createElement(de,Object.assign({},e)),children:i},p(l.createElement(lt,Object.assign({prefixCls:u,className:T(f,`${u}-pure-panel`,c&&v,c&&`${v}-${c}`,a,C,m)},b,{closeIcon:ue(u,t),closable:o},x)))},ht=ot(Pt);function Pe(e){return B(be(e))}const j=fe;j.useModal=yt;j.info=function(n){return B(xe(n))};j.success=function(n){return B(pe(n))};j.error=function(n){return B(ye(n))};j.warning=Pe;j.warn=Pe;j.confirm=function(n){return B(Oe(n))};j.destroyAll=function(){for(;N.length;){const n=N.pop();n&&n()}};j.config=gt;j._InternalPanelDoNotUseOrYouWillBeFired=ht;export{j as M};
