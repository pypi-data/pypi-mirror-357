import{r as a,F as T,j as s,aG as P,aH as D,ac as y,w as J,aI as M,B as v,S as N,aJ as q,b as B}from"./index-DDPiedLI.js";import C from"./index-CdNGfUYH.js";import{D as O}from"./index-CwQo344a.js";import"./context-_LvM5ICY.js";const E=()=>{const i=a.useRef(null),[r,c]=a.useState("downstream"),[g,m]=a.useState(),[x,u]=a.useState(!1),[t,f]=a.useState(),[n,h]=a.useState(),[j,d]=a.useState(!1),[o]=T.useForm(),[S,b]=a.useState(),[A,w]=a.useState({}),[F,p]=a.useState(!1),[R,L]=a.useState(!1),_=async e=>{p(!0);const l=await B.get(`/find_downstream_analysis/${e}`);w(l.data),p(!1)};return s.jsxs("div",{style:{maxWidth:"1800px",margin:"1rem auto"},children:[s.jsx(P,{style:{marginBottom:"1rem"},justify:"flex-end",align:"center",gap:"small",children:s.jsx(D.Group,{options:[{label:"下游分析结果",value:"downstream"},{label:"上游分析结果",value:"upstream"}],onChange:({target:{value:e}})=>{console.log(e),c(e)},value:r,optionType:"button",buttonStyle:"solid"})}),s.jsx(y,{title:"下游分析历史记录",ref:i,analysisType:"analysisResult",params:{analysis_type:r},setTableLoading:u,setRecord:e=>{const l=JSON.parse(e.request_param);console.log(l),f(e),h(l)},setTabletData:e=>{m(e)}}),s.jsx("div",{style:{marginBottom:"2rem"}}),t&&s.jsxs(s.Fragment,{children:[s.jsx(J,{title:`${t.analysis_method}`,extra:s.jsx(s.Fragment,{children:s.jsx(v,{onClick:()=>{d(!0),_(n.analysis_method),o.resetFields(),o.setFieldsValue(n),t!=null&&t.id&&o.setFieldValue("id",t==null?void 0:t.id)},children:"重新分析"})}),children:s.jsx(M,{plotLoading:x,filePlot:g})}),s.jsx("hr",{}),s.jsx(C,{params:{obj_key:t.analysis_method,obj_type:"analysis_img"}}),s.jsxs(O,{loading:F,title:`重新分析 - ${t.analysis_name}`,open:j,onClose:()=>d(!1),width:"50%",children:[s.jsx(y,{title:"输出文件}",analysisType:r,analysisMethod:[n.inputAnalysisMenthod],shouldTrigger:!0,setResultTableList:b}),s.jsx(N,{spinning:R,children:s.jsx(q,{form:o,resultTableList:S,formJson:A.formJson,sampleGroupApI:!1,moduleName:n.moduleName,params:n.params,setPlotLoading:e=>{u(e),L(e)},activeTabKey:n.inputAnalysisMenthod.name,currentAnalysisMenthod:n.inputAnalysisMenthod,saveAnalysisMethod:n.analysis_method,project:n.project,setFilePlot:m,plotReloadTable:()=>{i.current&&i.current.reload()}})})]})]})]})};export{E as default};
