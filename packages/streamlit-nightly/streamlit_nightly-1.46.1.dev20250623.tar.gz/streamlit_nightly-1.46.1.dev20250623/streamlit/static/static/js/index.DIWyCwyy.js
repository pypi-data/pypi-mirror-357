import{r as o,aN as U,z as k,cq as x,C as A,j as l,bp as L,bF as P,bq as B,b7 as D,br as j}from"./index.GQSrzYvF.js";import{u as q}from"./uniqueId.OfTwqNZo.js";import{u as _,a as w,b as K}from"./useOnInputChange.dALPpkgr.js";import{I as N}from"./InputInstructions.TPKmOf1e.js";import{a as O}from"./useBasicWidgetState.BwLEUZab.js";import{T as $}from"./textarea.DBC27xex.js";import"./inputUtils.CQWz5UKz.js";import"./FormClearHelper.4d5unoV3.js";import"./base-input.Bnn6NZuq.js";const T=(a,t)=>a.getStringValue(t)??t.default??null,G=a=>a.default??null,J=a=>a.value??null,Q=(a,t,s,u)=>{t.setStringValue(a,s.value,{fromUi:s.fromUi},u)},X=({disabled:a,element:t,widgetMgr:s,fragmentId:u})=>{var g;const h=o.useRef(q("text_area_")).current,[W,S]=U(),[r,n]=o.useState(!1),[C,b]=o.useState(!1),[i,d]=o.useState(()=>T(s,t)??null),I=o.useCallback(()=>{d(t.default??null),n(!0)},[t]),[F,c]=O({getStateFromWidgetMgr:T,getDefaultStateFromProto:G,getCurrStateFromProto:J,updateWidgetMgrState:Q,element:t,widgetMgr:s,fragmentId:u,onFormCleared:I});_(F,i,d,r);const e=k(),m=o.useCallback(()=>{n(!1),c({value:i,fromUi:!0})},[i,c]),V=o.useCallback(()=>{r&&m(),b(!1)},[r,m]),y=o.useCallback(()=>{b(!0)},[]),v=w({formId:t.formId,maxChars:t.maxChars,setDirty:n,setUiValue:d,setValueWithSource:c}),E=K(t.formId,m,r,s,u,!0),{height:f,placeholder:z,formId:p}=t,R=x({formId:p})?s.allowFormEnterToSubmit(p):r,H=C&&W>e.breakpoints.hideWidgetDetails;return A("div",{className:"stTextArea","data-testid":"stTextArea",ref:S,children:[l(j,{label:t.label,disabled:a,labelVisibility:L((g=t.labelVisibility)==null?void 0:g.value),htmlFor:h,children:t.help&&l(P,{children:l(B,{content:t.help,placement:D.TOP_RIGHT})})}),l($,{value:i??"",placeholder:z,onBlur:V,onFocus:y,onChange:v,onKeyDown:E,"aria-label":t.label,disabled:a,id:h,overrides:{Input:{style:{lineHeight:e.lineHeights.inputWidget,height:f?`${f}px`:"",minHeight:e.sizes.largestElementHeight,resize:"vertical",paddingRight:e.spacing.md,paddingLeft:e.spacing.md,paddingBottom:e.spacing.md,paddingTop:e.spacing.md,"::placeholder":{color:e.colors.fadedText60}}},Root:{props:{"data-testid":"stTextAreaRootElement"},style:{borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth}}}}),H&&l(N,{dirty:r,value:i??"",maxLength:t.maxChars,type:"multiline",inForm:x({formId:p}),allowEnterToSubmit:R})]})},it=o.memo(X);export{it as default};
