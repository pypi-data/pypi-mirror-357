var Lo=Object.defineProperty;var dl=e=>{throw TypeError(e)};var Fo=(e,t,n)=>t in e?Lo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var X=(e,t,n)=>Fo(e,typeof t!="symbol"?t+"":t,n),Gt=(e,t,n)=>t.has(e)||dl("Cannot "+n);var d=(e,t,n)=>(Gt(e,t,"read from private field"),n?n.call(e):t.get(e)),D=(e,t,n)=>t.has(e)?dl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),I=(e,t,n,l)=>(Gt(e,t,"write to private field"),l?l.call(e,n):t.set(e,n),n),E=(e,t,n)=>(Gt(e,t,"access private method"),n);var kt=(e,t,n,l)=>({set _(o){I(e,t,o,n)},get _(){return d(e,t,l)}});import{k as mn,x as Oo,M as Ho,u as Ro,U as en,I as Mo,C as No,$ as Po}from"./@vavt-D0iSl322.js";import{d as K,i as O,c as m,r as ve,a as j,w as H,o as te,b as ut,e as tn,s as Ze,f as fe,n as Pe,T as Do,h as Bo,p as _e,F as Bt,t as Ne,g as jo}from"./@vue-D35tL6nz.js";import{E as Be,H as Kl,s as Yl,k as Wo,h as fl,m as zo,d as Vo,u as Uo,r as Go,a as qo,b as qt,i as Xo,p as Ko,c as ot,C as nt,e as Yo,f as Zo,g as Jo,l as Qo,S as ei,j as ti,n as ni}from"./@codemirror-xEbqB7wZ.js";import{a as $}from"./@lezer-B2pTEO0R.js";import{m as li}from"./medium-zoom-bWEtUbjf.js";import{c as oi}from"./copy-to-clipboard-B1uT6SkR.js";import{M as ii}from"./markdown-it-DI8MEbma.js";import{r as ai}from"./markdown-it-image-figures-BD49Kf-b.js";import{s as ri}from"./markdown-it-sub-Bxi31R0z.js";import{s as si}from"./markdown-it-sup-Bp2DoVCN.js";import{p as Xt}from"./vite-plugin-node-polyfills-CYF0W5wK.js";const f="md-editor",ci="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.js",ui="https://at.alicdn.com/t/c/font_2605852_cmafimm6hot.css",q="https://unpkg.com",di=`${q}/@highlightjs/cdn-assets@11.10.0/highlight.min.js`,hl={main:`${q}/prettier@3.3.3/standalone.js`,markdown:`${q}/prettier@3.3.3/plugins/markdown.js`},fi={css:`${q}/cropperjs@1.6.2/dist/cropper.min.css`,js:`${q}/cropperjs@1.6.2/dist/cropper.min.js`},hi=`${q}/screenfull@5.2.0/dist/screenfull.js`,mi=`${q}/mermaid@11.3.0/dist/mermaid.min.js`,gi={js:`${q}/katex@0.16.11/dist/katex.min.js`,css:`${q}/katex@0.16.11/dist/katex.min.css`},nn={a11y:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/a11y-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/a11y-dark.min.css`},atom:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/atom-one-dark.min.css`},github:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/github.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/github-dark.min.css`},gradient:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/gradient-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/gradient-dark.min.css`},kimbie:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/kimbie-dark.min.css`},paraiso:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/paraiso-dark.min.css`},qtcreator:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/qtcreator-dark.min.css`},stackoverflow:{light:`${q}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-light.min.css`,dark:`${q}/@highlightjs/cdn-assets@11.10.0/styles/stackoverflow-dark.min.css`}},Zl=["bold","underline","italic","strikeThrough","-","title","sub","sup","quote","unorderedList","orderedList","task","-","codeRow","code","link","image","table","mermaid","katex","-","revoke","next","save","=","prettier","pageFullscreen","fullscreen","preview","previewOnly","htmlPreview","catalog","github"],Jl=["markdownTotal","=","scrollSwitch"],ml={"zh-CN":{toolbarTips:{bold:"加粗",underline:"下划线",italic:"斜体",strikeThrough:"删除线",title:"标题",sub:"下标",sup:"上标",quote:"引用",unorderedList:"无序列表",orderedList:"有序列表",task:"任务列表",codeRow:"行内代码",code:"块级代码",link:"链接",image:"图片",table:"表格",mermaid:"mermaid图",katex:"katex公式",revoke:"后退",next:"前进",save:"保存",prettier:"美化",pageFullscreen:"浏览器全屏",fullscreen:"屏幕全屏",preview:"预览",previewOnly:"仅预览",htmlPreview:"html代码预览",catalog:"目录",github:"源码地址"},titleItem:{h1:"一级标题",h2:"二级标题",h3:"三级标题",h4:"四级标题",h5:"五级标题",h6:"六级标题"},imgTitleItem:{link:"添加链接",upload:"上传图片",clip2upload:"裁剪上传"},linkModalTips:{linkTitle:"添加链接",imageTitle:"添加图片",descLabel:"链接描述：",descLabelPlaceHolder:"请输入描述...",urlLabel:"链接地址：",urlLabelPlaceHolder:"请输入链接...",buttonOK:"确定"},clipModalTips:{title:"裁剪图片上传",buttonUpload:"上传"},copyCode:{text:"复制代码",successTips:"已复制！",failTips:"复制失败！"},mermaid:{flow:"流程图",sequence:"时序图",gantt:"甘特图",class:"类图",state:"状态图",pie:"饼图",relationship:"关系图",journey:"旅程图"},katex:{inline:"行内公式",block:"块级公式"},footer:{markdownTotal:"字数",scrollAuto:"同步滚动"}},"en-US":{toolbarTips:{bold:"bold",underline:"underline",italic:"italic",strikeThrough:"strikeThrough",title:"title",sub:"subscript",sup:"superscript",quote:"quote",unorderedList:"unordered list",orderedList:"ordered list",task:"task list",codeRow:"inline code",code:"block-level code",link:"link",image:"image",table:"table",mermaid:"mermaid",katex:"formula",revoke:"revoke",next:"undo revoke",save:"save",prettier:"prettier",pageFullscreen:"fullscreen in page",fullscreen:"fullscreen",preview:"preview",previewOnly:"preview only",htmlPreview:"html preview",catalog:"catalog",github:"source code"},titleItem:{h1:"Lv1 Heading",h2:"Lv2 Heading",h3:"Lv3 Heading",h4:"Lv4 Heading",h5:"Lv5 Heading",h6:"Lv6 Heading"},imgTitleItem:{link:"Add Image Link",upload:"Upload Images",clip2upload:"Clip Upload"},linkModalTips:{linkTitle:"Add Link",imageTitle:"Add Image",descLabel:"Desc:",descLabelPlaceHolder:"Enter a description...",urlLabel:"Link:",urlLabelPlaceHolder:"Enter a link...",buttonOK:"OK"},clipModalTips:{title:"Crop Image",buttonUpload:"Upload"},copyCode:{text:"Copy",successTips:"Copied!",failTips:"Copy failed!"},mermaid:{flow:"flow",sequence:"sequence",gantt:"gantt",class:"class",state:"state",pie:"pie",relationship:"relationship",journey:"journey"},katex:{inline:"inline",block:"block"},footer:{markdownTotal:"Character Count",scrollAuto:"Scroll Auto"}}},ee={editorExtensions:{highlight:{js:di,css:nn},prettier:{standaloneJs:hl.main,parserMarkdownJs:hl.markdown},cropper:{...fi},iconfont:ci,iconfontClass:ui,screenfull:{js:hi},mermaid:{js:mi},katex:{...gi}},editorExtensionsAttrs:{},editorConfig:{languageUserDefined:{},mermaidTemplate:{},renderDelay:500,zIndex:2e4},codeMirrorExtensions:(e,t)=>t,markdownItConfig:()=>{},markdownItPlugins:e=>e,iconfontType:"svg",mermaidConfig:e=>e,katexConfig:e=>e},Ct=170,$e=({instance:e,ctx:t,props:n={}},l="default")=>{const o=(e==null?void 0:e.$slots[l])||(t==null?void 0:t.slots[l]);return(o?o(e):"")||n[l]},vi={overlay:{type:[String,Object],default:""},visible:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}},relative:{type:String,default:"html"}},lt=K({props:vi,setup(e,t){const n=`${f}-dropdown-hidden`,l=ve({overlayClass:[n],overlayStyle:{},triggerHover:!1,overlayHover:!1}),o=j(),i=j(),a=()=>{var s,c;l.triggerHover=!0;const g=o.value,v=i.value;if(!g||!v)return;const k=g.getBoundingClientRect(),w=g.offsetTop,p=g.offsetLeft,b=k.height,y=k.width,T=g.getRootNode(),C=((s=T.querySelector(e.relative))==null?void 0:s.scrollLeft)||0,S=((c=T.querySelector(e.relative))==null?void 0:c.clientWidth)||0;let A=p-v.offsetWidth/2+y/2-C;A+v.offsetWidth>C+S&&(A=C+S-v.offsetWidth),A<0&&(A=0),l.overlayStyle={...l.overlayStyle,top:w+b+"px",left:A+"px"},e.onChange(!0)},u=()=>{l.overlayHover=!0};H(()=>e.visible,s=>{s?l.overlayClass=l.overlayClass.filter(c=>c!==n):l.overlayClass.push(n)});let r=-1;const h=s=>{o.value===s.target?l.triggerHover=!1:l.overlayHover=!1,clearTimeout(r),r=window.setTimeout(()=>{!l.overlayHover&&!l.triggerHover&&e.onChange(!1)},10)};return te(()=>{o.value.addEventListener("mouseenter",a),o.value.addEventListener("mouseleave",h),i.value.addEventListener("mouseenter",u),i.value.addEventListener("mouseleave",h)}),ut(()=>{o.value.removeEventListener("mouseenter",a),o.value.removeEventListener("mouseleave",h),i.value.removeEventListener("mouseenter",u),i.value.removeEventListener("mouseleave",h)}),()=>{const s=$e({ctx:t}),c=$e({props:e,ctx:t},"overlay"),g=tn(s instanceof Array?s[0]:s,{ref:o,key:"cloned-dropdown-trigger"}),v=m("div",{class:[`${f}-dropdown`,l.overlayClass],style:l.overlayStyle,ref:i},[m("div",{class:`${f}-dropdown-overlay`},[c instanceof Array?c[0]:c])]);return[g,v]}}}),pi={title:{type:String,default:""},visible:{type:Boolean},trigger:{type:[String,Object]},onChange:{type:Function},overlay:{type:[String,Object]},insert:{type:Function},language:{type:String},theme:{type:String},previewTheme:{type:String},default:{type:[String,Object]}},_t=K({name:"DropdownToolbar",props:pi,emits:["onChange"],setup(e,t){const n=O("editorId");return()=>{const l=$e({props:e,ctx:t},"trigger"),o=$e({props:e,ctx:t},"overlay"),i=$e({props:e,ctx:t});return m(lt,{relative:`#${n}-toolbar-wrapper`,visible:e.visible,onChange:a=>{e.onChange instanceof Function?e.onChange(a):t.emit("onChange",a)},overlay:o},{default:()=>[m("div",{class:`${f}-toolbar-item`,title:e.title||""},[l,i])]})}}});_t.install=e=>(e.component(_t.name,_t),e);var bi=Object.defineProperty,yi=(e,t,n)=>t in e?bi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,wi=(e,t,n)=>yi(e,t+"",n);class ki{constructor(){wi(this,"pools",{})}remove(t,n,l){const i=this.pools[t]&&this.pools[t][n];i&&(this.pools[t][n]=i.filter(a=>a!==l))}clear(t){this.pools[t]={}}on(t,n){return this.pools[t]||(this.pools[t]={}),this.pools[t][n.name]||(this.pools[t][n.name]=[]),this.pools[t][n.name].push(n.callback),this.pools[t][n.name].includes(n.callback)}emit(t,n,...l){this.pools[t]||(this.pools[t]={});const i=this.pools[t][n];i&&i.forEach(a=>{try{a(...l)}catch(u){console.error(`${n} monitor event exception！`,u)}})}}const x=new ki,jt="onSave",gn="changeCatalogVisible",Ql="changeFullscreen",gl="pageFullscreenChanged",vl="fullscreenChanged",pl="previewChanged",bl="previewOnlyChanged",yl="htmlPreviewChanged",wl="catalogVisibleChanged",At="buildFinished",Je="errorCatcher",z="replace",Wt="uploadImage",ln="openModals",eo="ctrlZ",to="ctrlShiftZ",vt="catalogChanged",no="pushCatalog",vn="rerender",lo="eventListener",oo="taskStateChanged",kl=(e,t)=>{const n=l=>{const o=e.parentElement||document.body,i=o.offsetWidth,a=o.offsetHeight,{clientWidth:u,clientHeight:r}=document.documentElement,h=l.offsetX,s=l.offsetY,c=v=>{let k=v.x+document.body.scrollLeft-document.body.clientLeft-h,w=v.y+document.body.scrollTop-document.body.clientTop-s;k=k<1?1:k<u-i-1?k:u-i-1,w=w<1?1:w<r-a-1?w:r-a-1,t?t(k,w):(o.style.left=`${k}px`,o.style.top=`${w}px`)};document.addEventListener("mousemove",c);const g=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",g)};document.addEventListener("mouseup",g)};return e.addEventListener("mousedown",n),()=>{e.removeEventListener("mousedown",n)}},ye=(e,t,n="")=>{var l;const o=document.getElementById(t.id);if(o)n!==""&&(Reflect.get(window,n)?(l=t.onload)==null||l.call(o,new Event("load")):t.onload&&o.addEventListener("load",t.onload));else{const i={...t};i.onload=null;const a=Ti(e,i);t.onload&&a.addEventListener("load",t.onload),document.head.appendChild(a)}},Ci=(e,t)=>{const n=document.getElementById(t.id);n==null||n.remove(),ye(e,t)},Ti=(e,t)=>{const n=document.createElement(e);return Object.keys(t).forEach(l=>{t[l]!==void 0&&(n[l]=t[l])}),n},Cl=(()=>{const e=n=>{if(!n)return;const l=n.firstChild;let o=1,i=0,a=0,u=!1,r,h,s,c=1;const g=()=>{l.style.transform=`translate(${i}px, ${a}px) scale(${o})`};n.addEventListener("touchstart",v=>{v.touches.length===1?(u=!0,r=v.touches[0].clientX-i,h=v.touches[0].clientY-a):v.touches.length===2&&(s=Math.hypot(v.touches[0].clientX-v.touches[1].clientX,v.touches[0].clientY-v.touches[1].clientY),c=o)},{passive:!1}),n.addEventListener("touchmove",v=>{if(v.preventDefault(),u&&v.touches.length===1)i=v.touches[0].clientX-r,a=v.touches[0].clientY-h,g();else if(v.touches.length===2){const w=Math.hypot(v.touches[0].clientX-v.touches[1].clientX,v.touches[0].clientY-v.touches[1].clientY)/s,p=o;o=c*(1+(w-1));const b=(v.touches[0].clientX+v.touches[1].clientX)/2,y=(v.touches[0].clientY+v.touches[1].clientY)/2,T=l.getBoundingClientRect(),C=(b-T.left)/p,S=(y-T.top)/p;i-=C*(o-p),a-=S*(o-p),g()}},{passive:!1}),n.addEventListener("touchend",()=>{u=!1}),n.addEventListener("wheel",v=>{v.preventDefault();const k=.02,w=o;v.deltaY<0?o+=k:o=Math.max(.1,o-k);const p=l.getBoundingClientRect(),b=v.clientX-p.left,y=v.clientY-p.top;i-=b/w*(o-w),a-=y/w*(o-w),g()},{passive:!1}),n.addEventListener("mousedown",v=>{u=!0,r=v.clientX-i,h=v.clientY-a}),n.addEventListener("mousemove",v=>{u&&(i=v.clientX-r,a=v.clientY-h,g())}),n.addEventListener("mouseup",()=>{u=!1}),n.addEventListener("mouseleave",()=>{u=!1})};return n=>{n.forEach(l=>{e(l)})}})(),$i=(e,t="image.png")=>{const n=e.split(","),l=n[0].match(/:(.*?);/);if(l){const o=l[1],i=atob(n[1]);let a=i.length;const u=new Uint8Array(a);for(;a--;)u[a]=i.charCodeAt(a);return new File([u],t,{type:o})}return null},Si=(e,t)=>{if(!e)return e;const n=t.split(`
`),l=['<span rn-wrapper aria-hidden="true">'];return n.forEach(()=>{l.push("<span></span>")}),l.push("</span>"),`<span class="${f}-code-block">${e}</span>${l.join("")}`},xi=(e,t)=>{if(!e||!t)return 0;const n=e==null?void 0:e.getBoundingClientRect();if(t===document.documentElement)return n.top-t.clientTop;const l=t==null?void 0:t.getBoundingClientRect();return n.top-l.top},_i=(()=>{let e=0;return t=>t+ ++e})(),Tl=(()=>{let e=0;return()=>++e})(),Ai=K({props:{name:{type:String,default:""}},setup(e){return()=>m("svg",{class:`${f}-icon`,"aria-hidden":"true"},[m("use",{"xlink:href":`#${f}-icon-${e.name}`},null)])}}),P=K({props:{name:{type:String,default:""}},setup(e){const t=O("customIcon");return()=>{const n=t.value[e.name];return typeof n=="object"?typeof n.component=="object"?Bo(n.component,n.props):m("span",{innerHTML:n.component},null):m(Ai,{name:e.name},null)}}}),Ei={title:{type:String,default:""},visible:{type:Boolean,default:!1},width:{type:String,default:"auto"},height:{type:String,default:"auto"},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function,default:()=>{}},class:{type:String},style:{type:[Object,String],default:()=>({})},showMask:{type:Boolean,default:!0}},it=K({name:"MdModal",props:Ei,emits:["onClose"],setup(e,t){const n=O("theme"),l=O("rootRef"),o=j(e.visible),i=j([`${f}-modal`]),a=j(),u=j(),r=j(),h=Ze();let s=()=>{};const c=ve({maskStyle:{zIndex:-1},modalStyle:{zIndex:-1},initPos:{left:"0px",top:"0px"},historyPos:{left:"0px",top:"0px"}}),g=fe(()=>e.isFullscreen?{width:"100%",height:"100%"}:{width:e.width,height:e.height});H(()=>e.isFullscreen,w=>{w?s():Pe(()=>{s=kl(u.value,(p,b)=>{c.initPos.left=p+"px",c.initPos.top=b+"px"})})}),H(()=>e.visible,w=>{w?(c.maskStyle.zIndex=ee.editorConfig.zIndex+Tl(),c.modalStyle.zIndex=ee.editorConfig.zIndex+Tl(),i.value.push("zoom-in"),o.value=w,Pe(()=>{const p=a.value.offsetWidth/2,b=a.value.offsetHeight/2,y=document.documentElement.clientWidth/2,T=document.documentElement.clientHeight/2;c.initPos.left=y-p+"px",c.initPos.top=T-b+"px",e.isFullscreen||(s=kl(u.value,(C,S)=>{c.initPos.left=C+"px",c.initPos.top=S+"px"}))}),setTimeout(()=>{i.value=i.value.filter(p=>p!=="zoom-in")},140)):(i.value.push("zoom-out"),s(),setTimeout(()=>{i.value=i.value.filter(p=>p!=="zoom-out"),o.value=w},130))});const v=fe(()=>({display:o.value?"block":"none"})),k=fe(()=>typeof e.style=="string"?[e.style,v.value].join("; "):e.style instanceof Object?{...v.value,...e.style}:v.value);return te(()=>{var w;const p=(w=l.value)==null?void 0:w.getRootNode();r.value=p instanceof Document?document.body:p}),()=>{const w=$e({ctx:t}),p=$e({props:e,ctx:t},"title");return r.value?m(Do,{to:r.value},{default:()=>[m("div",{ref:h,class:`${f}-modal-container`,"data-theme":n.value},[m("div",{class:e.class,style:k.value},[e.showMask&&m("div",{class:`${f}-modal-mask`,style:c.maskStyle,onClick:()=>{e.onClose?e.onClose():t.emit("onClose")}},null),m("div",{class:i.value,style:{...c.modalStyle,...c.initPos,...g.value},ref:a},[m("div",{class:`${f}-modal-header`,ref:u},[p||""]),m("div",{class:`${f}-modal-body`},[w]),m("div",{class:`${f}-modal-func`},[e.showAdjust&&m("div",{class:`${f}-modal-adjust`,onClick:b=>{b.stopPropagation(),e.isFullscreen?c.initPos=c.historyPos:(c.historyPos=c.initPos,c.initPos={left:"0",top:"0"}),e.onAdjust(!e.isFullscreen)}},[m(P,{name:e.isFullscreen?"suoxiao":"fangda"},null)]),m("div",{class:`${f}-modal-close`,onClick:b=>{b.stopPropagation(),e.onClose?e.onClose():t.emit("onClose")}},[m(P,{name:"close"},null)])])])])])]}):""}}});it.install=e=>(e.component(it.name,it),e);const Ii=`.${f}-preview > [data-line]`,ft=(e,t)=>+getComputedStyle(e).getPropertyValue(t).replace("px",""),Li=(e,t)=>{const n=mn(()=>{e.removeEventListener("scroll",l),e.addEventListener("scroll",l),t.removeEventListener("scroll",l),t.addEventListener("scroll",l)},50),l=o=>{const i=e.clientHeight,a=t.clientHeight,u=e.scrollHeight,r=t.scrollHeight,h=(u-i)/(r-a);o.target===e?(t.removeEventListener("scroll",l),t.scrollTo({top:e.scrollTop/h}),n()):(e.removeEventListener("scroll",l),e.scrollTo({top:t.scrollTop*h}),n())};return[()=>{n().finally(()=>{e.dispatchEvent(new Event("scroll"))})},()=>{e.removeEventListener("scroll",l),t.removeEventListener("scroll",l)}]},Fi=(e,t,n)=>{const{view:l}=n,o=Oo(),i=b=>l.lineBlockAt(l.state.doc.line(b+1).from).top,a=b=>l.lineBlockAt(l.state.doc.line(b+1).from).bottom;let u=[],r=[],h=[];const s=()=>{u=[],r=Array.from(t.querySelectorAll(Ii)),h=r.map(S=>Number(S.dataset.line));const b=[...h],{lines:y}=l.state.doc;let T=b.shift()||0,C=b.shift()||y;for(let S=0;S<y;S++)S===C&&(T=S,C=b.shift()||y),u.push({start:T,end:C-1})},c=(b,y)=>{let T=1;for(let C=r.length-1;C-1>=0;C--){const S=r[C],A=r[C-1];if(S.offsetTop+S.offsetHeight>y&&A.offsetTop<y){T=Number(A.dataset.line);break}}for(let C=u.length-1;C>=0;C--){const S=a(u[C].end),A=i(u[C].start);if(S>b&&A<=b){T=T<u[C].start?T:u[C].start;break}}return T};let g=0,v=0;const k=()=>{var b,y,T;if(v!==0)return!1;g++;const{scrollDOM:C,contentHeight:S}=l;let A=ft(t,"padding-top");const M=l.lineBlockAtHeight(C.scrollTop),{number:R}=l.state.doc.lineAt(M.from),L=u[R-1];if(!L)return!1;let N=1;const V=t.querySelector(`[data-line="${L.start}"]`)||((b=t.firstElementChild)==null?void 0:b.firstElementChild),W=t.querySelector(`[data-line="${L.end+1}"]`)||((y=t.lastElementChild)==null?void 0:y.lastElementChild),ne=C.scrollHeight-C.clientHeight,J=t.scrollHeight-t.clientHeight;let se=i(L.start),pe=a(L.end),Se=V.offsetTop,Q=W.offsetTop-Se;se===0&&(Se=0,V===W?(A=0,pe=S-C.offsetHeight,Q=J):Q=W.offsetTop),N=(C.scrollTop-se)/(pe-se);const ie=W==((T=t.lastElementChild)==null?void 0:T.lastElementChild)?W.offsetTop+W.clientHeight:W.offsetTop;if(pe>=ne||ie>J){const be=c(ne,J);se=i(be),N=(C.scrollTop-se)/(ne-se);const he=t.querySelector(`[data-line="${be}"]`);se>0&&he&&(Se=he.offsetTop),Q=J-Se+ft(t,"padding-top")}const xe=Se-A+Q*N;o(t,xe,()=>{g--})},w=()=>{var b,y,T,C,S,A;if(g!==0)return;v++;const{scrollDOM:M}=l,R=t.scrollTop,L=t.scrollHeight,N=M.scrollHeight-M.clientHeight,V=t.scrollHeight-t.clientHeight;let W=(b=t.firstElementChild)==null?void 0:b.firstElementChild,ne=(y=t.firstElementChild)==null?void 0:y.lastElementChild;if(h.length>0){let he=Math.ceil(h[h.length-1]*(R/L)),Z=h.findLastIndex(ce=>ce<=he);Z=Z===-1?0:Z,he=h[Z];for(let ce=Z;ce>=0&&ce<h.length;)if(r[ce].offsetTop>R){if(ce-1>=0){ce--;continue}he=-1,Z=ce;break}else{if(ce+1<h.length&&r[ce+1].offsetTop<R){ce++;continue}he=h[ce],Z=ce;break}switch(Z){case-1:{W=(T=t.firstElementChild)==null?void 0:T.firstElementChild,ne=r[Z];break}case h.length-1:{W=r[Z],ne=(C=t.firstElementChild)==null?void 0:C.lastElementChild;break}default:W=r[Z],ne=r[Z+1===r.length?Z:Z+1]}}let J=W===((S=t.firstElementChild)==null?void 0:S.firstElementChild)?0:W.offsetTop-ft(W,"margin-top"),se=ne.offsetTop,pe=0;const{start:Se,end:Q}=u[Number(W.dataset.line||0)];let ie=i(Se);const xe=i(Q+1===l.state.doc.lines?Q:Q+1);let be=0;if(xe>N||ne.offsetTop+ne.offsetHeight>V){const he=c(N,V),Z=t.querySelector(`[data-line="${he}"]`);J=Z?Z.offsetTop-ft(Z,"margin-top"):J,ie=i(he),pe=(R-J)/(V-J),be=N-ie}else W===((A=t.firstElementChild)==null?void 0:A.firstElementChild)?(W===ne&&(se=ne.offsetTop+ne.offsetHeight+ +getComputedStyle(ne).marginBottom.replace("px","")),be=xe,pe=Math.max(R/se,0)):(pe=Math.max((R-J)/(se-J),0),be=xe-ie);o(e,ie+be*pe,()=>{v--})},p=b=>{var y;const{scrollDOM:T,contentHeight:C}=l,S=T.clientHeight;if(C<=S||t.firstElementChild.clientHeight<=t.clientHeight||l.state.doc.lines<=((y=u[u.length-1])==null?void 0:y.end))return!1;b.target===e?k():w()};return[()=>{s(),e.addEventListener("scroll",p),t.addEventListener("scroll",p),e.dispatchEvent(new Event("scroll"))},()=>{e.removeEventListener("scroll",p),t.removeEventListener("scroll",p)}]},Oi={tocItem:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:()=>{}},onClick:{type:Function,default:()=>{}},scrollElementOffsetTop:{type:Number,default:0}},io=K({props:Oi,setup(e){const t=O("scrollElementRef"),n=O("roorNodeRef");return()=>{const{tocItem:l,mdHeadingId:o,onClick:i,scrollElementOffsetTop:a}=e;return m("div",{class:[`${f}-catalog-link`,l.active&&`${f}-catalog-active`],onClick:u=>{i(u,l),u.stopPropagation();const r=o(l.text,l.level,l.index),h=n.value.getElementById(r),s=t.value;if(h&&s){let c=h.offsetParent,g=h.offsetTop;if(s.contains(c))for(;c&&s!=c;)g+=c==null?void 0:c.offsetTop,c=c==null?void 0:c.offsetParent;const v=h.previousElementSibling;let k=0;v||(k=ft(h,"margin-top")),s==null||s.scrollTo({top:g-a-k,behavior:"smooth"})}}},[m("span",{title:l.text},[l.text]),m("div",{class:`${f}-catalog-wrapper`},[l.children&&l.children.map(u=>m(io,{mdHeadingId:o,key:`${l.text}-link-${u.level}-${u.text}`,tocItem:u,onClick:i,scrollElementOffsetTop:a},null))])])}}}),Hi={editorId:{type:String},class:{type:String,default:""},mdHeadingId:{type:Function,default:e=>e},scrollElement:{type:[String,Object]},theme:{type:String,default:"light"},offsetTop:{type:Number,default:20},scrollElementOffsetTop:{type:Number,default:0},onClick:{type:Function},onActive:{type:Function},isScrollElementInShadow:{type:Boolean,default:!1}},pt=K({name:"MdCatalog",props:Hi,emits:["onClick","onActive"],setup(e,t){const n=e.editorId,l=`#${n}-preview-wrapper`,o=ve({list:[],show:!1,scrollElement:e.scrollElement||l}),i=Ze(),a=j(),u=j(),r=j(),h=j();_e("scrollElementRef",u),_e("roorNodeRef",h);const s=fe(()=>{const w=[];return o.list.forEach((p,b)=>{const{text:y,level:T}=p,C={level:T,text:y,index:b+1,active:i.value===p};if(w.length===0)w.push(C);else{let S=w[w.length-1];if(C.level>S.level)for(let A=S.level+1;A<=6;A++){const{children:M}=S;if(!M){S.children=[C];break}if(S=M[M.length-1],C.level<=S.level){M.push(C);break}}else w.push(C)}}),w}),c=()=>{var w;if(o.scrollElement instanceof HTMLElement)return o.scrollElement;let p=document;return(o.scrollElement===l||e.isScrollElementInShadow)&&(p=(w=a.value)==null?void 0:w.getRootNode()),p.querySelector(o.scrollElement)},g=w=>{if(w.length===0)return o.list=[],!1;const{activeHead:p}=w.reduce((b,y,T)=>{var C;const S=(C=h.value)==null?void 0:C.getElementById(e.mdHeadingId(y.text,y.level,T+1));if(S instanceof HTMLElement){const A=xi(S,u.value);if(A<e.offsetTop&&A>b.minTop)return{activeHead:y,minTop:A}}return b},{activeHead:w[0],minTop:Number.MIN_SAFE_INTEGER});i.value=p,o.list=w},v=()=>{g(o.list)},k=w=>{var p,b;const y=c();u.value=y,r.value=y===document.documentElement?document:y,(p=r.value)==null||p.removeEventListener("scroll",v),g(w),(b=r.value)==null||b.addEventListener("scroll",v)};return H(()=>i.value,w=>{const p=w?{...w}:void 0;e.onActive?e.onActive(p):t.emit("onActive",p)}),te(()=>{h.value=a.value.getRootNode(),x.on(n,{name:vt,callback:k}),x.emit(n,no)}),ut(()=>{var w;x.remove(n,vt,k),(w=r.value)==null||w.removeEventListener("scroll",v)}),()=>m("div",{class:[`${f}-catalog`,e.theme==="dark"&&`${f}-catalog-dark`,e.class||""],ref:a},[s.value.map(w=>m(io,{mdHeadingId:e.mdHeadingId,tocItem:w,key:`link-${w.level}-${w.text}`,onClick:(p,b)=>{e.onClick?e.onClick(p,b):t.emit("onClick",p,b)},scrollElementOffsetTop:e.scrollElementOffsetTop},null))])}});pt.install=e=>(e.component(pt.name,pt),e);const et=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ao=new Set,on=typeof Xt=="object"&&Xt?Xt:{},ro=(e,t,n,l)=>{typeof on.emitWarning=="function"?on.emitWarning(e,t,n,l):console.error(`[${n}] ${t}: ${e}`)};let Nt=globalThis.AbortController,$l=globalThis.AbortSignal;var Gl;if(typeof Nt>"u"){$l=class{constructor(){X(this,"onabort");X(this,"_onabort",[]);X(this,"reason");X(this,"aborted",!1)}addEventListener(l,o){this._onabort.push(o)}},Nt=class{constructor(){X(this,"signal",new $l);t()}abort(l){var o,i;if(!this.signal.aborted){this.signal.reason=l,this.signal.aborted=!0;for(const a of this.signal._onabort)a(l);(i=(o=this.signal).onabort)==null||i.call(o,l)}}};let e=((Gl=on.env)==null?void 0:Gl.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const t=()=>{e&&(e=!1,ro("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const Ri=e=>!ao.has(e),We=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),so=e=>We(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Et:null:null;class Et extends Array{constructor(t){super(t),this.fill(0)}}var at;const Xe=class Xe{constructor(t,n){X(this,"heap");X(this,"length");if(!d(Xe,at))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(t),this.length=0}static create(t){const n=so(t);if(!n)return[];I(Xe,at,!0);const l=new Xe(t,n);return I(Xe,at,!1),l}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}};at=new WeakMap,D(Xe,at,!1);let an=Xe;var ql,Xl,Ee,we,Ie,Le,rt,st,oe,Fe,le,G,F,me,ke,de,ae,Oe,re,He,Re,Ce,Me,qe,ge,_,sn,Ke,De,yt,Te,co,Ye,ct,wt,ze,Ve,cn,It,Lt,U,un,ht,Ue,dn;const yn=class yn{constructor(t){D(this,_);D(this,Ee);D(this,we);D(this,Ie);D(this,Le);D(this,rt);D(this,st);X(this,"ttl");X(this,"ttlResolution");X(this,"ttlAutopurge");X(this,"updateAgeOnGet");X(this,"updateAgeOnHas");X(this,"allowStale");X(this,"noDisposeOnSet");X(this,"noUpdateTTL");X(this,"maxEntrySize");X(this,"sizeCalculation");X(this,"noDeleteOnFetchRejection");X(this,"noDeleteOnStaleGet");X(this,"allowStaleOnFetchAbort");X(this,"allowStaleOnFetchRejection");X(this,"ignoreFetchAbort");D(this,oe);D(this,Fe);D(this,le);D(this,G);D(this,F);D(this,me);D(this,ke);D(this,de);D(this,ae);D(this,Oe);D(this,re);D(this,He);D(this,Re);D(this,Ce);D(this,Me);D(this,qe);D(this,ge);D(this,Ke,()=>{});D(this,De,()=>{});D(this,yt,()=>{});D(this,Te,()=>!1);D(this,Ye,t=>{});D(this,ct,(t,n,l)=>{});D(this,wt,(t,n,l,o)=>{if(l||o)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});X(this,ql,"LRUCache");const{max:n=0,ttl:l,ttlResolution:o=1,ttlAutopurge:i,updateAgeOnGet:a,updateAgeOnHas:u,allowStale:r,dispose:h,disposeAfter:s,noDisposeOnSet:c,noUpdateTTL:g,maxSize:v=0,maxEntrySize:k=0,sizeCalculation:w,fetchMethod:p,memoMethod:b,noDeleteOnFetchRejection:y,noDeleteOnStaleGet:T,allowStaleOnFetchRejection:C,allowStaleOnFetchAbort:S,ignoreFetchAbort:A}=t;if(n!==0&&!We(n))throw new TypeError("max option must be a nonnegative integer");const M=n?so(n):Array;if(!M)throw new Error("invalid max value: "+n);if(I(this,Ee,n),I(this,we,v),this.maxEntrySize=k||d(this,we),this.sizeCalculation=w,this.sizeCalculation){if(!d(this,we)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(b!==void 0&&typeof b!="function")throw new TypeError("memoMethod must be a function if defined");if(I(this,st,b),p!==void 0&&typeof p!="function")throw new TypeError("fetchMethod must be a function if specified");if(I(this,rt,p),I(this,qe,!!p),I(this,le,new Map),I(this,G,new Array(n).fill(void 0)),I(this,F,new Array(n).fill(void 0)),I(this,me,new M(n)),I(this,ke,new M(n)),I(this,de,0),I(this,ae,0),I(this,Oe,an.create(n)),I(this,oe,0),I(this,Fe,0),typeof h=="function"&&I(this,Ie,h),typeof s=="function"?(I(this,Le,s),I(this,re,[])):(I(this,Le,void 0),I(this,re,void 0)),I(this,Me,!!d(this,Ie)),I(this,ge,!!d(this,Le)),this.noDisposeOnSet=!!c,this.noUpdateTTL=!!g,this.noDeleteOnFetchRejection=!!y,this.allowStaleOnFetchRejection=!!C,this.allowStaleOnFetchAbort=!!S,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(d(this,we)!==0&&!We(d(this,we)))throw new TypeError("maxSize must be a positive integer if specified");if(!We(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");E(this,_,co).call(this)}if(this.allowStale=!!r,this.noDeleteOnStaleGet=!!T,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!u,this.ttlResolution=We(o)||o===0?o:1,this.ttlAutopurge=!!i,this.ttl=l||0,this.ttl){if(!We(this.ttl))throw new TypeError("ttl must be a positive integer if specified");E(this,_,sn).call(this)}if(d(this,Ee)===0&&this.ttl===0&&d(this,we)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!d(this,Ee)&&!d(this,we)){const R="LRU_CACHE_UNBOUNDED";Ri(R)&&(ao.add(R),ro("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",R,yn))}}static unsafeExposeInternals(t){return{starts:d(t,Re),ttls:d(t,Ce),sizes:d(t,He),keyMap:d(t,le),keyList:d(t,G),valList:d(t,F),next:d(t,me),prev:d(t,ke),get head(){return d(t,de)},get tail(){return d(t,ae)},free:d(t,Oe),isBackgroundFetch:n=>{var l;return E(l=t,_,U).call(l,n)},backgroundFetch:(n,l,o,i)=>{var a;return E(a=t,_,Lt).call(a,n,l,o,i)},moveToTail:n=>{var l;return E(l=t,_,ht).call(l,n)},indexes:n=>{var l;return E(l=t,_,ze).call(l,n)},rindexes:n=>{var l;return E(l=t,_,Ve).call(l,n)},isStale:n=>{var l;return d(l=t,Te).call(l,n)}}}get max(){return d(this,Ee)}get maxSize(){return d(this,we)}get calculatedSize(){return d(this,Fe)}get size(){return d(this,oe)}get fetchMethod(){return d(this,rt)}get memoMethod(){return d(this,st)}get dispose(){return d(this,Ie)}get disposeAfter(){return d(this,Le)}getRemainingTTL(t){return d(this,le).has(t)?1/0:0}*entries(){for(const t of E(this,_,ze).call(this))d(this,F)[t]!==void 0&&d(this,G)[t]!==void 0&&!E(this,_,U).call(this,d(this,F)[t])&&(yield[d(this,G)[t],d(this,F)[t]])}*rentries(){for(const t of E(this,_,Ve).call(this))d(this,F)[t]!==void 0&&d(this,G)[t]!==void 0&&!E(this,_,U).call(this,d(this,F)[t])&&(yield[d(this,G)[t],d(this,F)[t]])}*keys(){for(const t of E(this,_,ze).call(this)){const n=d(this,G)[t];n!==void 0&&!E(this,_,U).call(this,d(this,F)[t])&&(yield n)}}*rkeys(){for(const t of E(this,_,Ve).call(this)){const n=d(this,G)[t];n!==void 0&&!E(this,_,U).call(this,d(this,F)[t])&&(yield n)}}*values(){for(const t of E(this,_,ze).call(this))d(this,F)[t]!==void 0&&!E(this,_,U).call(this,d(this,F)[t])&&(yield d(this,F)[t])}*rvalues(){for(const t of E(this,_,Ve).call(this))d(this,F)[t]!==void 0&&!E(this,_,U).call(this,d(this,F)[t])&&(yield d(this,F)[t])}[(Xl=Symbol.iterator,ql=Symbol.toStringTag,Xl)](){return this.entries()}find(t,n={}){for(const l of E(this,_,ze).call(this)){const o=d(this,F)[l],i=E(this,_,U).call(this,o)?o.__staleWhileFetching:o;if(i!==void 0&&t(i,d(this,G)[l],this))return this.get(d(this,G)[l],n)}}forEach(t,n=this){for(const l of E(this,_,ze).call(this)){const o=d(this,F)[l],i=E(this,_,U).call(this,o)?o.__staleWhileFetching:o;i!==void 0&&t.call(n,i,d(this,G)[l],this)}}rforEach(t,n=this){for(const l of E(this,_,Ve).call(this)){const o=d(this,F)[l],i=E(this,_,U).call(this,o)?o.__staleWhileFetching:o;i!==void 0&&t.call(n,i,d(this,G)[l],this)}}purgeStale(){let t=!1;for(const n of E(this,_,Ve).call(this,{allowStale:!0}))d(this,Te).call(this,n)&&(E(this,_,Ue).call(this,d(this,G)[n],"expire"),t=!0);return t}info(t){const n=d(this,le).get(t);if(n===void 0)return;const l=d(this,F)[n],o=E(this,_,U).call(this,l)?l.__staleWhileFetching:l;if(o===void 0)return;const i={value:o};if(d(this,Ce)&&d(this,Re)){const a=d(this,Ce)[n],u=d(this,Re)[n];if(a&&u){const r=a-(et.now()-u);i.ttl=r,i.start=Date.now()}}return d(this,He)&&(i.size=d(this,He)[n]),i}dump(){const t=[];for(const n of E(this,_,ze).call(this,{allowStale:!0})){const l=d(this,G)[n],o=d(this,F)[n],i=E(this,_,U).call(this,o)?o.__staleWhileFetching:o;if(i===void 0||l===void 0)continue;const a={value:i};if(d(this,Ce)&&d(this,Re)){a.ttl=d(this,Ce)[n];const u=et.now()-d(this,Re)[n];a.start=Math.floor(Date.now()-u)}d(this,He)&&(a.size=d(this,He)[n]),t.unshift([l,a])}return t}load(t){this.clear();for(const[n,l]of t){if(l.start){const o=Date.now()-l.start;l.start=et.now()-o}this.set(n,l.value,l)}}set(t,n,l={}){var g,v,k,w,p;if(n===void 0)return this.delete(t),this;const{ttl:o=this.ttl,start:i,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:u=this.sizeCalculation,status:r}=l;let{noUpdateTTL:h=this.noUpdateTTL}=l;const s=d(this,wt).call(this,t,n,l.size||0,u);if(this.maxEntrySize&&s>this.maxEntrySize)return r&&(r.set="miss",r.maxEntrySizeExceeded=!0),E(this,_,Ue).call(this,t,"set"),this;let c=d(this,oe)===0?void 0:d(this,le).get(t);if(c===void 0)c=d(this,oe)===0?d(this,ae):d(this,Oe).length!==0?d(this,Oe).pop():d(this,oe)===d(this,Ee)?E(this,_,It).call(this,!1):d(this,oe),d(this,G)[c]=t,d(this,F)[c]=n,d(this,le).set(t,c),d(this,me)[d(this,ae)]=c,d(this,ke)[c]=d(this,ae),I(this,ae,c),kt(this,oe)._++,d(this,ct).call(this,c,s,r),r&&(r.set="add"),h=!1;else{E(this,_,ht).call(this,c);const b=d(this,F)[c];if(n!==b){if(d(this,qe)&&E(this,_,U).call(this,b)){b.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:y}=b;y!==void 0&&!a&&(d(this,Me)&&((g=d(this,Ie))==null||g.call(this,y,t,"set")),d(this,ge)&&((v=d(this,re))==null||v.push([y,t,"set"])))}else a||(d(this,Me)&&((k=d(this,Ie))==null||k.call(this,b,t,"set")),d(this,ge)&&((w=d(this,re))==null||w.push([b,t,"set"])));if(d(this,Ye).call(this,c),d(this,ct).call(this,c,s,r),d(this,F)[c]=n,r){r.set="replace";const y=b&&E(this,_,U).call(this,b)?b.__staleWhileFetching:b;y!==void 0&&(r.oldValue=y)}}else r&&(r.set="update")}if(o!==0&&!d(this,Ce)&&E(this,_,sn).call(this),d(this,Ce)&&(h||d(this,yt).call(this,c,o,i),r&&d(this,De).call(this,r,c)),!a&&d(this,ge)&&d(this,re)){const b=d(this,re);let y;for(;y=b==null?void 0:b.shift();)(p=d(this,Le))==null||p.call(this,...y)}return this}pop(){var t;try{for(;d(this,oe);){const n=d(this,F)[d(this,de)];if(E(this,_,It).call(this,!0),E(this,_,U).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(d(this,ge)&&d(this,re)){const n=d(this,re);let l;for(;l=n==null?void 0:n.shift();)(t=d(this,Le))==null||t.call(this,...l)}}}has(t,n={}){const{updateAgeOnHas:l=this.updateAgeOnHas,status:o}=n,i=d(this,le).get(t);if(i!==void 0){const a=d(this,F)[i];if(E(this,_,U).call(this,a)&&a.__staleWhileFetching===void 0)return!1;if(d(this,Te).call(this,i))o&&(o.has="stale",d(this,De).call(this,o,i));else return l&&d(this,Ke).call(this,i),o&&(o.has="hit",d(this,De).call(this,o,i)),!0}else o&&(o.has="miss");return!1}peek(t,n={}){const{allowStale:l=this.allowStale}=n,o=d(this,le).get(t);if(o===void 0||!l&&d(this,Te).call(this,o))return;const i=d(this,F)[o];return E(this,_,U).call(this,i)?i.__staleWhileFetching:i}async fetch(t,n={}){const{allowStale:l=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:u=this.noDisposeOnSet,size:r=0,sizeCalculation:h=this.sizeCalculation,noUpdateTTL:s=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:g=this.allowStaleOnFetchRejection,ignoreFetchAbort:v=this.ignoreFetchAbort,allowStaleOnFetchAbort:k=this.allowStaleOnFetchAbort,context:w,forceRefresh:p=!1,status:b,signal:y}=n;if(!d(this,qe))return b&&(b.fetch="get"),this.get(t,{allowStale:l,updateAgeOnGet:o,noDeleteOnStaleGet:i,status:b});const T={allowStale:l,updateAgeOnGet:o,noDeleteOnStaleGet:i,ttl:a,noDisposeOnSet:u,size:r,sizeCalculation:h,noUpdateTTL:s,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:g,allowStaleOnFetchAbort:k,ignoreFetchAbort:v,status:b,signal:y};let C=d(this,le).get(t);if(C===void 0){b&&(b.fetch="miss");const S=E(this,_,Lt).call(this,t,C,T,w);return S.__returned=S}else{const S=d(this,F)[C];if(E(this,_,U).call(this,S)){const N=l&&S.__staleWhileFetching!==void 0;return b&&(b.fetch="inflight",N&&(b.returnedStale=!0)),N?S.__staleWhileFetching:S.__returned=S}const A=d(this,Te).call(this,C);if(!p&&!A)return b&&(b.fetch="hit"),E(this,_,ht).call(this,C),o&&d(this,Ke).call(this,C),b&&d(this,De).call(this,b,C),S;const M=E(this,_,Lt).call(this,t,C,T,w),L=M.__staleWhileFetching!==void 0&&l;return b&&(b.fetch=A?"stale":"refresh",L&&A&&(b.returnedStale=!0)),L?M.__staleWhileFetching:M.__returned=M}}async forceFetch(t,n={}){const l=await this.fetch(t,n);if(l===void 0)throw new Error("fetch() returned undefined");return l}memo(t,n={}){const l=d(this,st);if(!l)throw new Error("no memoMethod provided to constructor");const{context:o,forceRefresh:i,...a}=n,u=this.get(t,a);if(!i&&u!==void 0)return u;const r=l(t,u,{options:a,context:o});return this.set(t,r,a),r}get(t,n={}){const{allowStale:l=this.allowStale,updateAgeOnGet:o=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,status:a}=n,u=d(this,le).get(t);if(u!==void 0){const r=d(this,F)[u],h=E(this,_,U).call(this,r);return a&&d(this,De).call(this,a,u),d(this,Te).call(this,u)?(a&&(a.get="stale"),h?(a&&l&&r.__staleWhileFetching!==void 0&&(a.returnedStale=!0),l?r.__staleWhileFetching:void 0):(i||E(this,_,Ue).call(this,t,"expire"),a&&l&&(a.returnedStale=!0),l?r:void 0)):(a&&(a.get="hit"),h?r.__staleWhileFetching:(E(this,_,ht).call(this,u),o&&d(this,Ke).call(this,u),r))}else a&&(a.get="miss")}delete(t){return E(this,_,Ue).call(this,t,"delete")}clear(){return E(this,_,dn).call(this,"delete")}};Ee=new WeakMap,we=new WeakMap,Ie=new WeakMap,Le=new WeakMap,rt=new WeakMap,st=new WeakMap,oe=new WeakMap,Fe=new WeakMap,le=new WeakMap,G=new WeakMap,F=new WeakMap,me=new WeakMap,ke=new WeakMap,de=new WeakMap,ae=new WeakMap,Oe=new WeakMap,re=new WeakMap,He=new WeakMap,Re=new WeakMap,Ce=new WeakMap,Me=new WeakMap,qe=new WeakMap,ge=new WeakMap,_=new WeakSet,sn=function(){const t=new Et(d(this,Ee)),n=new Et(d(this,Ee));I(this,Ce,t),I(this,Re,n),I(this,yt,(i,a,u=et.now())=>{if(n[i]=a!==0?u:0,t[i]=a,a!==0&&this.ttlAutopurge){const r=setTimeout(()=>{d(this,Te).call(this,i)&&E(this,_,Ue).call(this,d(this,G)[i],"expire")},a+1);r.unref&&r.unref()}}),I(this,Ke,i=>{n[i]=t[i]!==0?et.now():0}),I(this,De,(i,a)=>{if(t[a]){const u=t[a],r=n[a];if(!u||!r)return;i.ttl=u,i.start=r,i.now=l||o();const h=i.now-r;i.remainingTTL=u-h}});let l=0;const o=()=>{const i=et.now();if(this.ttlResolution>0){l=i;const a=setTimeout(()=>l=0,this.ttlResolution);a.unref&&a.unref()}return i};this.getRemainingTTL=i=>{const a=d(this,le).get(i);if(a===void 0)return 0;const u=t[a],r=n[a];if(!u||!r)return 1/0;const h=(l||o())-r;return u-h},I(this,Te,i=>{const a=n[i],u=t[i];return!!u&&!!a&&(l||o())-a>u})},Ke=new WeakMap,De=new WeakMap,yt=new WeakMap,Te=new WeakMap,co=function(){const t=new Et(d(this,Ee));I(this,Fe,0),I(this,He,t),I(this,Ye,n=>{I(this,Fe,d(this,Fe)-t[n]),t[n]=0}),I(this,wt,(n,l,o,i)=>{if(E(this,_,U).call(this,l))return 0;if(!We(o))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(o=i(l,n),!We(o))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return o}),I(this,ct,(n,l,o)=>{if(t[n]=l,d(this,we)){const i=d(this,we)-t[n];for(;d(this,Fe)>i;)E(this,_,It).call(this,!0)}I(this,Fe,d(this,Fe)+t[n]),o&&(o.entrySize=l,o.totalCalculatedSize=d(this,Fe))})},Ye=new WeakMap,ct=new WeakMap,wt=new WeakMap,ze=function*({allowStale:t=this.allowStale}={}){if(d(this,oe))for(let n=d(this,ae);!(!E(this,_,cn).call(this,n)||((t||!d(this,Te).call(this,n))&&(yield n),n===d(this,de)));)n=d(this,ke)[n]},Ve=function*({allowStale:t=this.allowStale}={}){if(d(this,oe))for(let n=d(this,de);!(!E(this,_,cn).call(this,n)||((t||!d(this,Te).call(this,n))&&(yield n),n===d(this,ae)));)n=d(this,me)[n]},cn=function(t){return t!==void 0&&d(this,le).get(d(this,G)[t])===t},It=function(t){var i,a;const n=d(this,de),l=d(this,G)[n],o=d(this,F)[n];return d(this,qe)&&E(this,_,U).call(this,o)?o.__abortController.abort(new Error("evicted")):(d(this,Me)||d(this,ge))&&(d(this,Me)&&((i=d(this,Ie))==null||i.call(this,o,l,"evict")),d(this,ge)&&((a=d(this,re))==null||a.push([o,l,"evict"]))),d(this,Ye).call(this,n),t&&(d(this,G)[n]=void 0,d(this,F)[n]=void 0,d(this,Oe).push(n)),d(this,oe)===1?(I(this,de,I(this,ae,0)),d(this,Oe).length=0):I(this,de,d(this,me)[n]),d(this,le).delete(l),kt(this,oe)._--,n},Lt=function(t,n,l,o){const i=n===void 0?void 0:d(this,F)[n];if(E(this,_,U).call(this,i))return i;const a=new Nt,{signal:u}=l;u==null||u.addEventListener("abort",()=>a.abort(u.reason),{signal:a.signal});const r={signal:a.signal,options:l,context:o},h=(w,p=!1)=>{const{aborted:b}=a.signal,y=l.ignoreFetchAbort&&w!==void 0;if(l.status&&(b&&!p?(l.status.fetchAborted=!0,l.status.fetchError=a.signal.reason,y&&(l.status.fetchAbortIgnored=!0)):l.status.fetchResolved=!0),b&&!y&&!p)return c(a.signal.reason);const T=v;return d(this,F)[n]===v&&(w===void 0?T.__staleWhileFetching?d(this,F)[n]=T.__staleWhileFetching:E(this,_,Ue).call(this,t,"fetch"):(l.status&&(l.status.fetchUpdated=!0),this.set(t,w,r.options))),w},s=w=>(l.status&&(l.status.fetchRejected=!0,l.status.fetchError=w),c(w)),c=w=>{const{aborted:p}=a.signal,b=p&&l.allowStaleOnFetchAbort,y=b||l.allowStaleOnFetchRejection,T=y||l.noDeleteOnFetchRejection,C=v;if(d(this,F)[n]===v&&(!T||C.__staleWhileFetching===void 0?E(this,_,Ue).call(this,t,"fetch"):b||(d(this,F)[n]=C.__staleWhileFetching)),y)return l.status&&C.__staleWhileFetching!==void 0&&(l.status.returnedStale=!0),C.__staleWhileFetching;if(C.__returned===C)throw w},g=(w,p)=>{var y;const b=(y=d(this,rt))==null?void 0:y.call(this,t,i,r);b&&b instanceof Promise&&b.then(T=>w(T===void 0?void 0:T),p),a.signal.addEventListener("abort",()=>{(!l.ignoreFetchAbort||l.allowStaleOnFetchAbort)&&(w(void 0),l.allowStaleOnFetchAbort&&(w=T=>h(T,!0)))})};l.status&&(l.status.fetchDispatched=!0);const v=new Promise(g).then(h,s),k=Object.assign(v,{__abortController:a,__staleWhileFetching:i,__returned:void 0});return n===void 0?(this.set(t,k,{...r.options,status:void 0}),n=d(this,le).get(t)):d(this,F)[n]=k,k},U=function(t){if(!d(this,qe))return!1;const n=t;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Nt},un=function(t,n){d(this,ke)[n]=t,d(this,me)[t]=n},ht=function(t){t!==d(this,ae)&&(t===d(this,de)?I(this,de,d(this,me)[t]):E(this,_,un).call(this,d(this,ke)[t],d(this,me)[t]),E(this,_,un).call(this,d(this,ae),t),I(this,ae,t))},Ue=function(t,n){var o,i,a,u;let l=!1;if(d(this,oe)!==0){const r=d(this,le).get(t);if(r!==void 0)if(l=!0,d(this,oe)===1)E(this,_,dn).call(this,n);else{d(this,Ye).call(this,r);const h=d(this,F)[r];if(E(this,_,U).call(this,h)?h.__abortController.abort(new Error("deleted")):(d(this,Me)||d(this,ge))&&(d(this,Me)&&((o=d(this,Ie))==null||o.call(this,h,t,n)),d(this,ge)&&((i=d(this,re))==null||i.push([h,t,n]))),d(this,le).delete(t),d(this,G)[r]=void 0,d(this,F)[r]=void 0,r===d(this,ae))I(this,ae,d(this,ke)[r]);else if(r===d(this,de))I(this,de,d(this,me)[r]);else{const s=d(this,ke)[r];d(this,me)[s]=d(this,me)[r];const c=d(this,me)[r];d(this,ke)[c]=d(this,ke)[r]}kt(this,oe)._--,d(this,Oe).push(r)}}if(d(this,ge)&&((a=d(this,re))!=null&&a.length)){const r=d(this,re);let h;for(;h=r==null?void 0:r.shift();)(u=d(this,Le))==null||u.call(this,...h)}return l},dn=function(t){var n,l,o;for(const i of E(this,_,Ve).call(this,{allowStale:!0})){const a=d(this,F)[i];if(E(this,_,U).call(this,a))a.__abortController.abort(new Error("deleted"));else{const u=d(this,G)[i];d(this,Me)&&((n=d(this,Ie))==null||n.call(this,a,u,t)),d(this,ge)&&((l=d(this,re))==null||l.push([a,u,t]))}}if(d(this,le).clear(),d(this,F).fill(void 0),d(this,G).fill(void 0),d(this,Ce)&&d(this,Re)&&(d(this,Ce).fill(0),d(this,Re).fill(0)),d(this,He)&&d(this,He).fill(0),I(this,de,0),I(this,ae,0),d(this,Oe).length=0,I(this,Fe,0),I(this,oe,0),d(this,ge)&&d(this,re)){const i=d(this,re);let a;for(;a=i==null?void 0:i.shift();)(o=d(this,Le))==null||o.call(this,...a)}};let rn=yn;function Mi(e,t){for(var n=0;n<t.length;n++){const l=t[n];if(typeof l!="string"&&!Array.isArray(l)){for(const o in l)if(o!=="default"&&!(o in e)){const i=Object.getOwnPropertyDescriptor(l,o);i&&Object.defineProperty(e,o,i.get?i:{enumerable:!0,get:()=>l[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Ni=(e,t)=>{const n=O("editorId"),{noImgZoomIn:l}=e,o=mn(()=>{const i=document.querySelectorAll(`#${n}-preview img:not(.not-zoom):not(.medium-zoom-image)`);i.length!==0&&li(i,{background:"#00000073"})});te(()=>{!l&&e.setting.preview&&o()}),H([t,Ne(e.setting,"preview")],()=>{!l&&e.setting.preview&&o()})},Pi=(e,t,n)=>{const l=O("editorId"),o=O("rootRef"),i=O("usedLanguageText"),a=()=>{o.value.querySelectorAll(`#${l} .${f}-preview .${f}-code`).forEach(h=>{let s=-1;const c=h.querySelector(`.${f}-copy-button`);c&&(c.onclick=g=>{g.preventDefault(),clearTimeout(s);const k=(h.querySelector("input:checked + pre code")||h.querySelector("pre code")).textContent,w=oi(e.formatCopiedText(k)),{text:p,successTips:b,failTips:y}=i.value.copyCode,T=w?b:y;c.dataset.isIcon?c.dataset.tips=T:c.innerHTML=T,s=window.setTimeout(()=>{c.dataset.isIcon?c.dataset.tips=p:c.innerHTML=p},1500)})})},u=()=>{Pe(a)},r=h=>{h&&Pe(a)};H([t,n],u),H(()=>e.setting.preview,r),H(()=>e.setting.htmlPreview,r),H(()=>i.value,a),te(a)},Di=e=>{const t=O("highlight"),n=Ze(ee.editorExtensions.highlight.instance);return te(()=>{e.noHighlight||n.value||(ye("link",{...t.value.css,rel:"stylesheet",id:`${f}-hlCss`}),ye("script",{...t.value.js,id:`${f}-hljs`,onload(){n.value=window.hljs}},"hljs"))}),H(()=>t.value.css,()=>{e.noHighlight||ee.editorExtensions.highlight.instance||Ci("link",{...t.value.css,rel:"stylesheet",id:`${f}-hlCss`})}),n},Ft=new rn({max:1e3,ttl:6e5}),Bi=e=>{const t=O("theme"),n=O("rootRef"),{editorExtensions:l,editorExtensionsAttrs:o,mermaidConfig:i}=ee,a=Ze(l.mermaid.instance),u=Ze(-1),r=()=>{const s=a.value;!e.noMermaid&&s&&(s.initialize(i({startOnLoad:!1,theme:t.value==="dark"?"dark":"default"})),u.value=u.value+1)};return H(()=>t.value,()=>{Ft.clear(),r()}),te(()=>{var s,c;if(e.noMermaid||a.value)return;const g=l.mermaid.js;/\.mjs/.test(g)?(ye("link",{...(s=o.mermaid)==null?void 0:s.js,rel:"modulepreload",href:g,id:`${f}-mermaid-m`}),import(g).then(v=>{a.value=v.default,r()})):ye("script",{...(c=o.mermaid)==null?void 0:c.js,src:g,id:`${f}-mermaid`,onload(){a.value=window.mermaid,r()}},"mermaid")}),{mermaidRef:a,reRenderRef:u,replaceMermaid:async()=>{if(!e.noMermaid&&a.value){const s=n.value.querySelectorAll(`div.${f}-mermaid`),c=document.createElement("div"),g=document.body.offsetWidth>1366?document.body.offsetWidth:1366,v=document.body.offsetHeight>768?document.body.offsetHeight:768;c.style.width=g+"px",c.style.height=v+"px",c.style.position="fixed",c.style.zIndex="-10000",c.style.top="-10000";let k=s.length;k>0&&document.body.appendChild(c),await Promise.allSettled(Array.from(s).map(w=>(async b=>{var y;let T=Ft.get(b.innerText);if(!T){const C=en();let S={svg:""};try{S=await a.value.render(C,b.innerText,c),T=await e.sanitizeMermaid(S.svg);const A=document.createElement("p");A.className=`${f}-mermaid`,A.setAttribute("data-processed",""),A.innerHTML=T,(y=A.children[0])==null||y.removeAttribute("height"),Ft.set(b.innerText,A.innerHTML),b.dataset.line!==void 0&&(A.dataset.line=b.dataset.line),b.replaceWith(A)}catch{}--k===0&&c.remove()}})(w)))}}}},ji=e=>{const t=Ze(ee.editorExtensions.katex.instance);return te(()=>{if(e.noKatex||t.value)return;const{editorExtensions:n}=ee;ye("script",{src:n.katex.js,id:`${f}-katex`,onload(){t.value=window.katex}},"katex"),ye("link",{rel:"stylesheet",href:n.katex.css,id:`${f}-katexCss`})}),t},Wi=(e,t)=>{const n=e.renderer.rules.fence.bind(e.renderer.rules);e.renderer.rules.fence=(l,o,i,a,u)=>{const r=l[o],h=r.content.trim();if(r.info==="mermaid"){let s;l[o].map&&l[o].level===0&&(s=l[o].map[0],l[o].attrSet("data-line",String(s)));const c=Ft.get(h);return c?`<p class="${f}-mermaid" ${s!==void 0?"data-line="+s:""} data-processed>${c}</p>`:`<div class="${f}-mermaid" ${s!==void 0?"data-line="+s:""} data-mermaid-theme=${t.themeRef.value}>${h}</div>`}return n(l,o,i,a,u)}},Pt=(e,t)=>{const n=e.attrs?e.attrs.slice():[];return t.forEach(l=>{const o=e.attrIndex(l[0]);o<0?n.push(l):(n[o]=n[o].slice(),n[o][1]+=` ${l[1]}`)}),n},zi=(e,t)=>{const n=[{open:"$",close:"$"},{open:"\\(",close:"\\)"}];let l,o,i;for(const a of n)if(e.src.startsWith(a.open,e.pos)){const u=e.pos+a.open.length;for(l=u;(l=e.src.indexOf(a.close,l))!==-1;){for(i=l-1;e.src[i]==="\\";)i-=1;if((l-i)%2==1)break;l+=a.close.length}return l===-1?(t||(e.pending+=a.open),e.pos=u,!0):l-u===0?(t||(e.pending+=a.open+a.close),e.pos=u+a.close.length,!0):(t||(o=e.push("math_inline","math",0),o.markup=a.open,o.content=e.src.slice(u,l)),e.pos=l+a.close.length,!0)}return!1},Vi=(e,t,n,l)=>{const o=[{open:"$$",close:"$$"},{open:"\\[",close:"\\]"}];let i,a,u,r,h=!1,s=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];for(const g of o){if(s+g.open.length>c||e.src.slice(s,s+g.open.length)!==g.open)continue;if(s+=g.open.length,i=e.src.slice(s,c),l)return!0;for(i.trim().slice(-g.close.length)===g.close&&(i=i.trim().slice(0,-g.close.length),h=!0),u=t;!h&&(u++,!(u>=n||(s=e.bMarks[u]+e.tShift[u],c=e.eMarks[u],s<c&&e.tShift[u]<e.blkIndent)));)e.src.slice(s,c).trim().slice(-g.close.length)===g.close&&(r=e.src.slice(0,c).lastIndexOf(g.close),a=e.src.slice(s,r),h=!0);e.line=u+1;const v=e.push("math_block","math",0);return v.block=!0,v.content=(i&&i.trim()?i+`
`:"")+e.getLines(t+1,u,e.tShift[t],!0)+(a&&a.trim()?a:""),v.map=[t,e.line],v.markup=g.open,!0}return!1},Ui=(e,{katexRef:t})=>{const n=(o,i,a,u,r)=>{const h=o[i],s={attrs:Pt(h,[["class",`${f}-katex-inline`]])};if(t.value){const c=t.value.renderToString(h.content,ee.katexConfig({throwOnError:!1}));return`<span ${r.renderAttrs(s)} data-processed>${c}</span>`}else return`<span ${r.renderAttrs(s)}>${h.content}</span>`},l=(o,i,a,u,r)=>{const h=o[i],s={attrs:Pt(h,[["class",`${f}-katex-block`]])};if(t.value){const c=t.value.renderToString(h.content,ee.katexConfig({throwOnError:!1,displayMode:!0}));return`<p ${r.renderAttrs(s)} data-processed>${c}</p>`}else return`<p ${r.renderAttrs(s)}>${h.content}</p>`};e.inline.ruler.before("escape","math_inline",zi),e.block.ruler.after("blockquote","math_block",Vi,{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.math_inline=n,e.renderer.rules.math_block=l},Gi=(e,t)=>{t=t||{};const n=3,l=t.marker||"!",o=l.charCodeAt(0),i=l.length;let a="",u="";const r=(s,c,g,v,k)=>{const w=s[c];return w.type==="admonition_open"?s[c].attrPush(["class",`${f}-admonition ${f}-admonition-${w.info}`]):w.type==="admonition_title_open"&&s[c].attrPush(["class",`${f}-admonition-title`]),k.renderToken(s,c,g)},h=s=>{const c=s.trim().split(" ",2);u="",a=c[0],c.length>1&&(u=s.substring(a.length+2))};e.block.ruler.before("code","admonition",(s,c,g,v)=>{let k,w,p,b=!1,y=s.bMarks[c]+s.tShift[c],T=s.eMarks[c];if(o!==s.src.charCodeAt(y))return!1;for(k=y+1;k<=T&&l[(k-y)%i]===s.src[k];k++);const C=Math.floor((k-y)/i);if(C!==n)return!1;k-=(k-y)%i;const S=s.src.slice(y,k),A=s.src.slice(k,T);if(h(A),v)return!0;for(w=c;w++,!(w>=g||(y=s.bMarks[w]+s.tShift[w],T=s.eMarks[w],y<T&&s.sCount[w]<s.blkIndent));)if(o===s.src.charCodeAt(y)&&!(s.sCount[w]-s.blkIndent>=4)){for(k=y+1;k<=T&&l[(k-y)%i]===s.src[k];k++);if(!(Math.floor((k-y)/i)<C)&&(k-=(k-y)%i,k=s.skipSpaces(k),!(k<T))){b=!0;break}}const M=s.parentType,R=s.lineMax;return s.parentType="root",s.lineMax=w,p=s.push("admonition_open","div",1),p.markup=S,p.block=!0,p.info=a,p.map=[c,w],u&&(p=s.push("admonition_title_open","p",1),p.markup=S+" "+a,p.map=[c,w],p=s.push("inline","",0),p.content=u,p.map=[c,s.line-1],p.children=[],p=s.push("admonition_title_close","p",-1),p.markup=S+" "+a),s.md.block.tokenize(s,c+1,w),p=s.push("admonition_close","div",-1),p.markup=s.src.slice(y,k),p.block=!0,s.parentType=M,s.lineMax=R,s.line=w+(b?1:0),!0},{alt:["paragraph","reference","blockquote","list"]}),e.renderer.rules.admonition_open=r,e.renderer.rules.admonition_title_open=r,e.renderer.rules.admonition_title_close=r,e.renderer.rules.admonition_close=r},qi=(e,t)=>{e.renderer.rules.heading_open=(n,l)=>{var o;const i=n[l],a=((o=n[l+1].children)==null?void 0:o.reduce((r,h)=>r+(["text","code_inline","math_inline"].includes(h.type)&&h.content||""),""))||"",u=i.markup.length;return t.headsRef.value.push({text:a,level:u}),i.map&&i.level===0&&i.attrSet("id",t.mdHeadingId(a,u,t.headsRef.value.length)),e.renderer.renderToken(n,l,t)},e.renderer.rules.heading_close=(n,l,o,i,a)=>a.renderToken(n,l,o)},Xi=(e,t)=>{if(typeof t[e]=="string")return t[e];const n=`<i class="${f}-iconfont ${f}-icon-${e}"></i>`;switch(ee.iconfontType){case"svg":return`<svg class="${f}-icon" aria-hidden="true"><use xlink:href="#${f}-icon-${e}"></use></svg>`;default:return n}},Ki=Xi,Yi=(e,t)=>{const n=e.renderer.rules.fence,l=e.utils.unescapeAll,o=/\[(\w*)(?::([\w ]*))?\]/,i=/::(open|close)/,a=c=>c.info?l(c.info).trim():"",u=c=>{const g=a(c),[v=null,k=""]=(o.exec(g)||[]).slice(1);return[v,k]},r=c=>{const g=a(c);return g?g.split(/(\s+)/g)[0]:""},h=c=>{const g=c.info.match(i)||[],v=g[1]==="open"||g[1]!=="close"&&t.codeFoldable&&c.content.trim().split(`
`).length<t.autoFoldThreshold,k=g[1]||t.codeFoldable?"details":"div",w=g[1]||t.codeFoldable?"summary":"div";return{open:v,tagContainer:k,tagHeader:w}},s=(c,g,v,k,w)=>{var p;if(c[g].hidden)return"";const b=(p=t.usedLanguageTextRef.value)==null?void 0:p.copyCode.text,y=t.customIconRef.value.copy||b,T=!!t.customIconRef.value.copy,C=`<span class="${f}-collapse-tips">${Ki("collapse-tips",t.customIconRef.value)}</span>`,[S]=u(c[g]);if(S===null){const{open:Q,tagContainer:ie,tagHeader:xe}=h(c[g]),be=[["class",`${f}-code`]];Q&&be.push(["open",""]);const he={attrs:Pt(c[g],be)};c[g].info=c[g].info.replace(i,"");const Z=n(c,g,v,k,w);return`
        <${ie} ${w.renderAttrs(he)}>
          <${xe} class="${f}-code-head">
            <div class="${f}-code-flag"><span></span><span></span><span></span></div>
            <div class="${f}-code-action">
              <span class="${f}-code-lang">${c[g].info.trim()}</span>
              <span class="${f}-copy-button" data-tips="${b}"${T?" data-is-icon=true":""}>${y}</span>
              ${ie==="details"?C:""}
            </div>
          </${xe}>
          ${Z}
        </${ie}>
      `}let A,M,R,L,N="",V="",W="";const{open:ne,tagContainer:J,tagHeader:se}=h(c[g]),pe=[["class",`${f}-code`]];ne&&pe.push(["open",""]);const Se={attrs:Pt(c[g],pe)};for(let Q=g;Q<c.length&&(A=c[Q],[M,R]=u(A),M===S);Q++){A.info=A.info.replace(o,"").replace(i,""),A.hidden=!0;const ie=`${f}-codetab-${t.editorId}-${g}-${Q-g}`;L=Q-g>0?"":"checked",N+=`
        <li>
          <input
            type="radio"
            id="label-${f}-codetab-label-1-${t.editorId}-${g}-${Q-g}"
            name="${f}-codetab-label-${t.editorId}-${g}"
            class="${ie}"
            ${L}
          >
          <label
            for="label-${f}-codetab-label-1-${t.editorId}-${g}-${Q-g}"
            onclick="this.getRootNode().querySelectorAll('.${ie}').forEach(e => e.click())"
          >
            ${R||r(A)}
          </label>
        </li>`,V+=`
        <div role="tabpanel">
          <input
            type="radio"
            name="${f}-codetab-pre-${t.editorId}-${g}"
            class="${ie}"
            ${L}
            role="presentation">
          ${n(c,Q,v,k,w)}
        </div>`,W+=`
        <input
          type="radio"
          name="${f}-codetab-lang-${t.editorId}-${g}"
          class="${ie}"
          ${L}
          role="presentation">
        <span class=${f}-code-lang role="note">${r(A)}</span>`}return`
      <${J} ${w.renderAttrs(Se)}>
        <${se} class="${f}-code-head">
          <div class="${f}-code-flag">
            <ul class="${f}-codetab-label" role="tablist">${N}</ul>
          </div>
          <div class="${f}-code-action">
            <span class="${f}-codetab-lang">${W}</span>
            <span class="${f}-copy-button" data-tips="${b}"${T?" data-is-icon=true":""}>${y}</span>
            ${J==="details"?C:""}
          </div>
        </${se}>
        ${V}
      </${J}>
    `};e.renderer.rules.fence=s,e.renderer.rules.code_block=s};function Zi(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fn={exports:{}},Y={},hn={exports:{}},Qe={};function uo(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function Ji(e,t,n){}function Qi(e,t,n){}var ea=/javascript\s*\:/img;function ta(e,t){return ea.test(t)?"":t}Qe.whiteList=uo();Qe.getDefaultWhiteList=uo;Qe.onAttr=Ji;Qe.onIgnoreAttr=Qi;Qe.safeAttrValue=ta;var na={indexOf:function(e,t){var n,l;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,l=e.length;n<l;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var l,o;if(Array.prototype.forEach)return e.forEach(t,n);for(l=0,o=e.length;l<o;l++)t.call(n,e[l],l,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},dt=na;function la(e,t){e=dt.trimRight(e),e[e.length-1]!==";"&&(e+=";");var n=e.length,l=!1,o=0,i=0,a="";function u(){if(!l){var s=dt.trim(e.slice(o,i)),c=s.indexOf(":");if(c!==-1){var g=dt.trim(s.slice(0,c)),v=dt.trim(s.slice(c+1));if(g){var k=t(o,a.length,g,v,s);k&&(a+=k+"; ")}}}o=i+1}for(;i<n;i++){var r=e[i];if(r==="/"&&e[i+1]==="*"){var h=e.indexOf("*/",i+2);if(h===-1)break;i=h+1,o=i+1,l=!1}else r==="("?l=!0:r===")"?l=!1:r===";"?l||u():r===`
`&&u()}return dt.trim(a)}var oa=la,Tt=Qe,ia=oa;function Sl(e){return e==null}function aa(e){var t={};for(var n in e)t[n]=e[n];return t}function fo(e){e=aa(e||{}),e.whiteList=e.whiteList||Tt.whiteList,e.onAttr=e.onAttr||Tt.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Tt.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Tt.safeAttrValue,this.options=e}fo.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,l=n.whiteList,o=n.onAttr,i=n.onIgnoreAttr,a=n.safeAttrValue,u=ia(e,function(r,h,s,c,g){var v=l[s],k=!1;if(v===!0?k=v:typeof v=="function"?k=v(c):v instanceof RegExp&&(k=v.test(c)),k!==!0&&(k=!1),c=a(s,c),!!c){var w={position:h,sourcePosition:r,source:g,isWhite:k};if(k){var p=o(s,c,w);return Sl(p)?s+":"+c:p}else{var p=i(s,c,w);if(!Sl(p))return p}}});return u};var ra=fo;(function(e,t){var n=Qe,l=ra;function o(a,u){var r=new l(u);return r.process(a)}t=e.exports=o,t.FilterCSS=l;for(var i in n)t[i]=n[i];typeof window<"u"&&(window.filterCSS=e.exports)})(hn,hn.exports);var pn=hn.exports,bn={indexOf:function(e,t){var n,l;if(Array.prototype.indexOf)return e.indexOf(t);for(n=0,l=e.length;n<l;n++)if(e[n]===t)return n;return-1},forEach:function(e,t,n){var l,o;if(Array.prototype.forEach)return e.forEach(t,n);for(l=0,o=e.length;l<o;l++)t.call(n,e[l],l,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,n=t.exec(e);return n?n.index:-1}},sa=pn.FilterCSS,ca=pn.getDefaultWhiteList,Dt=bn;function ho(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height","loading"],ins:["datetime"],kbd:[],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var mo=new sa;function ua(e,t,n){}function da(e,t,n){}function fa(e,t,n){}function ha(e,t,n){}function go(e){return e.replace(ga,"&lt;").replace(va,"&gt;")}function ma(e,t,n,l){if(n=ko(n),t==="href"||t==="src"){if(n=Dt.trim(n),n==="#")return"#";if(!(n.substr(0,7)==="http://"||n.substr(0,8)==="https://"||n.substr(0,7)==="mailto:"||n.substr(0,4)==="tel:"||n.substr(0,11)==="data:image/"||n.substr(0,6)==="ftp://"||n.substr(0,2)==="./"||n.substr(0,3)==="../"||n[0]==="#"||n[0]==="/"))return""}else if(t==="background"){if($t.lastIndex=0,$t.test(n))return""}else if(t==="style"){if(xl.lastIndex=0,xl.test(n)||(_l.lastIndex=0,_l.test(n)&&($t.lastIndex=0,$t.test(n))))return"";l!==!1&&(l=l||mo,n=l.process(n))}return n=Co(n),n}var ga=/</g,va=/>/g,pa=/"/g,ba=/&quot;/g,ya=/&#([a-zA-Z0-9]*);?/gim,wa=/&colon;?/gim,ka=/&newline;?/gim,$t=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a):/gi,xl=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,_l=/u\s*r\s*l\s*\(.*/gi;function vo(e){return e.replace(pa,"&quot;")}function po(e){return e.replace(ba,'"')}function bo(e){return e.replace(ya,function(n,l){return l[0]==="x"||l[0]==="X"?String.fromCharCode(parseInt(l.substr(1),16)):String.fromCharCode(parseInt(l,10))})}function yo(e){return e.replace(wa,":").replace(ka," ")}function wo(e){for(var t="",n=0,l=e.length;n<l;n++)t+=e.charCodeAt(n)<32?" ":e.charAt(n);return Dt.trim(t)}function ko(e){return e=po(e),e=bo(e),e=yo(e),e=wo(e),e}function Co(e){return e=vo(e),e=go(e),e}function Ca(){return""}function Ta(e,t){typeof t!="function"&&(t=function(){});var n=!Array.isArray(e);function l(a){return n?!0:Dt.indexOf(e,a)!==-1}var o=[],i=!1;return{onIgnoreTag:function(a,u,r){if(l(a))if(r.isClosing){var h="[/removed]",s=r.position+h.length;return o.push([i!==!1?i:r.position,s]),i=!1,h}else return i||(i=r.position),"[removed]";else return t(a,u,r)},remove:function(a){var u="",r=0;return Dt.forEach(o,function(h){u+=a.slice(r,h[0]),r=h[1]}),u+=a.slice(r),u}}}function $a(e){for(var t="",n=0;n<e.length;){var l=e.indexOf("<!--",n);if(l===-1){t+=e.slice(n);break}t+=e.slice(n,l);var o=e.indexOf("-->",l);if(o===-1)break;n=o+3}return t}function Sa(e){var t=e.split("");return t=t.filter(function(n){var l=n.charCodeAt(0);return l===127?!1:l<=31?l===10||l===13:!0}),t.join("")}Y.whiteList=ho();Y.getDefaultWhiteList=ho;Y.onTag=ua;Y.onIgnoreTag=da;Y.onTagAttr=fa;Y.onIgnoreTagAttr=ha;Y.safeAttrValue=ma;Y.escapeHtml=go;Y.escapeQuote=vo;Y.unescapeQuote=po;Y.escapeHtmlEntities=bo;Y.escapeDangerHtml5Entities=yo;Y.clearNonPrintableCharacter=wo;Y.friendlyAttrValue=ko;Y.escapeAttrValue=Co;Y.onIgnoreTagStripAll=Ca;Y.StripTagBody=Ta;Y.stripCommentTag=$a;Y.stripBlankChar=Sa;Y.attributeWrapSign='"';Y.cssFilter=mo;Y.getDefaultCSSWhiteList=ca;var zt={},Ge=bn;function xa(e){var t=Ge.spaceIndex(e),n;return t===-1?n=e.slice(1,-1):n=e.slice(1,t+1),n=Ge.trim(n).toLowerCase(),n.slice(0,1)==="/"&&(n=n.slice(1)),n.slice(-1)==="/"&&(n=n.slice(0,-1)),n}function _a(e){return e.slice(0,2)==="</"}function Aa(e,t,n){var l="",o=0,i=!1,a=!1,u=0,r=e.length,h="",s="";e:for(u=0;u<r;u++){var c=e.charAt(u);if(i===!1){if(c==="<"){i=u;continue}}else if(a===!1){if(c==="<"){l+=n(e.slice(o,u)),i=u,o=u;continue}if(c===">"||u===r-1){l+=n(e.slice(o,i)),s=e.slice(i,u+1),h=xa(s),l+=t(i,l.length,h,s,_a(s)),o=u+1,i=!1;continue}if(c==='"'||c==="'")for(var g=1,v=e.charAt(u-g);v.trim()===""||v==="=";){if(v==="="){a=c;continue e}v=e.charAt(u-++g)}}else if(c===a){a=!1;continue}}return o<r&&(l+=n(e.substr(o))),l}var Ea=/[^a-zA-Z0-9\\_:.-]/gim;function Ia(e,t){var n=0,l=0,o=[],i=!1,a=e.length;function u(g,v){if(g=Ge.trim(g),g=g.replace(Ea,"").toLowerCase(),!(g.length<1)){var k=t(g,v||"");k&&o.push(k)}}for(var r=0;r<a;r++){var h=e.charAt(r),s,c;if(i===!1&&h==="="){i=e.slice(n,r),n=r+1,l=e.charAt(n)==='"'||e.charAt(n)==="'"?n:Fa(e,r+1);continue}if(i!==!1&&r===l){if(c=e.indexOf(h,r+1),c===-1)break;s=Ge.trim(e.slice(l+1,c)),u(i,s),i=!1,r=c,n=r+1;continue}if(/\s|\n|\t/.test(h))if(e=e.replace(/\s|\n|\t/g," "),i===!1)if(c=La(e,r),c===-1){s=Ge.trim(e.slice(n,r)),u(s),i=!1,n=r+1;continue}else{r=c-1;continue}else if(c=Oa(e,r-1),c===-1){s=Ge.trim(e.slice(n,r)),s=Al(s),u(i,s),i=!1,n=r+1;continue}else continue}return n<e.length&&(i===!1?u(e.slice(n)):u(i,Al(Ge.trim(e.slice(n))))),Ge.trim(o.join(" "))}function La(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Fa(e,t){for(;t<e.length;t++){var n=e[t];if(n!==" ")return n==="'"||n==='"'?t:-1}}function Oa(e,t){for(;t>0;t--){var n=e[t];if(n!==" ")return n==="="?t:-1}}function Ha(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function Al(e){return Ha(e)?e.substr(1,e.length-2):e}zt.parseTag=Aa;zt.parseAttr=Ia;var Ra=pn.FilterCSS,Ae=Y,To=zt,Ma=To.parseTag,Na=To.parseAttr,Ot=bn;function St(e){return e==null}function Pa(e){var t=Ot.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=Ot.trim(e.slice(t+1,-1));var n=e[e.length-1]==="/";return n&&(e=Ot.trim(e.slice(0,-1))),{html:e,closing:n}}function Da(e){var t={};for(var n in e)t[n]=e[n];return t}function Ba(e){var t={};for(var n in e)Array.isArray(e[n])?t[n.toLowerCase()]=e[n].map(function(l){return l.toLowerCase()}):t[n.toLowerCase()]=e[n];return t}function $o(e){e=Da(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Ae.onIgnoreTagStripAll),e.whiteList||e.allowList?e.whiteList=Ba(e.whiteList||e.allowList):e.whiteList=Ae.whiteList,this.attributeWrapSign=e.singleQuotedAttributeValue===!0?"'":Ae.attributeWrapSign,e.onTag=e.onTag||Ae.onTag,e.onTagAttr=e.onTagAttr||Ae.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Ae.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Ae.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Ae.safeAttrValue,e.escapeHtml=e.escapeHtml||Ae.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new Ra(e.css))}$o.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,n=t.options,l=n.whiteList,o=n.onTag,i=n.onIgnoreTag,a=n.onTagAttr,u=n.onIgnoreTagAttr,r=n.safeAttrValue,h=n.escapeHtml,s=t.attributeWrapSign,c=t.cssFilter;n.stripBlankChar&&(e=Ae.stripBlankChar(e)),n.allowCommentTag||(e=Ae.stripCommentTag(e));var g=!1;n.stripIgnoreTagBody&&(g=Ae.StripTagBody(n.stripIgnoreTagBody,i),i=g.onIgnoreTag);var v=Ma(e,function(k,w,p,b,y){var T={sourcePosition:k,position:w,isClosing:y,isWhite:Object.prototype.hasOwnProperty.call(l,p)},C=o(p,b,T);if(!St(C))return C;if(T.isWhite){if(T.isClosing)return"</"+p+">";var S=Pa(b),A=l[p],M=Na(S.html,function(R,L){var N=Ot.indexOf(A,R)!==-1,V=a(p,R,L,N);return St(V)?N?(L=r(p,R,L,c),L?R+"="+s+L+s:R):(V=u(p,R,L,N),St(V)?void 0:V):V});return b="<"+p,M&&(b+=" "+M),S.closing&&(b+=" /"),b+=">",b}else return C=i(p,b,T),St(C)?h(b):C},h);return g&&(v=g.remove(v)),v};var ja=$o;(function(e,t){var n=Y,l=zt,o=ja;function i(u,r){var h=new o(r);return h.process(u)}t=e.exports=i,t.filterXSS=i,t.FilterXSS=o,function(){for(var u in n)t[u]=n[u];for(var r in l)t[r]=l[r]}(),typeof window<"u"&&(window.filterXSS=e.exports);function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(fn,fn.exports);var bt=fn.exports;const Wa=Zi(bt),za=Mi({__proto__:null,default:Wa},[bt]),El={img:["class"],input:["class","disabled","type","checked"],iframe:["class","width","height","src","title","border","frameborder","framespacing","allow","allowfullscreen"]},Va=(e,t)=>{const{extendedWhiteList:n={},xss:l={}}=t;let o;if(typeof l=="function")o=new bt.FilterXSS(l(za));else{const i=bt.getDefaultWhiteList();[...Object.keys(n),...Object.keys(El)].forEach(u=>{const r=i[u]||[],h=El[u]||[],s=n[u]||[];i[u]=[...new Set([...r,...h,...s])]}),o=new bt.FilterXSS({whiteList:i,...l})}e.core.ruler.after("linkify","xss",i=>{for(let a=0;a<i.tokens.length;a++){const u=i.tokens[a];switch(u.type){case"html_block":{u.content=o.process(u.content);break}case"inline":{(u.children||[]).forEach(h=>{h.type==="html_inline"&&(h.content=o.process(h.content))});break}}}})},Il=(e,t,n)=>{const l=e.attrIndex(t),o=[t,n];l<0?e.attrPush(o):(e.attrs=e.attrs||[],e.attrs[l]=o)},Ua=e=>e.type==="inline",Ga=e=>e.type==="paragraph_open",qa=e=>e.type==="list_item_open",Xa=e=>e.content.indexOf("[ ] ")===0||e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0,Ka=(e,t)=>Ua(e[t])&&Ga(e[t-1])&&qa(e[t-2])&&Xa(e[t]),Ya=(e,t)=>{const n=e[t].level-1;for(let l=t-1;l>=0;l--)if(e[l].level===n)return l;return-1},Za=e=>{const t=new e("html_inline","",0);return t.content="<label>",t},Ja=e=>{const t=new e("html_inline","",0);return t.content="</label>",t},Qa=(e,t,n)=>{const l=new n("html_inline","",0);return l.content='<label class="task-list-item-label" for="'+t+'">'+e+"</label>",l.attrs=[{for:t}],l},er=(e,t,n)=>{const l=new t("html_inline","",0),o=n.enabled?" ":' disabled="" ';return e.content.indexOf("[ ] ")===0?l.content='<input class="task-list-item-checkbox"'+o+'type="checkbox">':(e.content.indexOf("[x] ")===0||e.content.indexOf("[X] ")===0)&&(l.content='<input class="task-list-item-checkbox" checked=""'+o+'type="checkbox">'),l},tr=(e,t,n)=>{if(e.children=e.children||[],e.children.unshift(er(e,t,n)),e.children[1].content=e.children[1].content.slice(3),e.content=e.content.slice(3),n.label)if(n.labelAfter){e.children.pop();const l="task-item-"+Math.ceil(Math.random()*(1e4*1e3)-1e3);e.children[0].content=e.children[0].content.slice(0,-1)+' id="'+l+'">',e.children.push(Qa(e.content,l,t))}else e.children.unshift(Za(t)),e.children.push(Ja(t))},nr=(e,t={})=>{e.core.ruler.after("inline","github-task-lists",n=>{const l=n.tokens;for(let o=2;o<l.length;o++)Ka(l,o)&&(tr(l[o],n.Token,t),Il(l[o-2],"class","task-list-item"+(t.enabled?" enabled":" ")),Il(l[Ya(l,o-2)],"class","contains-task-list"))})},lr=e=>{e.core.ruler.push("init-line-number",t=>(t.tokens.forEach(n=>{n.map&&(n.attrs||(n.attrs=[]),n.attrs.push(["data-line",n.map[0].toString()]))}),!0))},or=(e,t)=>{const{editorConfig:n,markdownItConfig:l,markdownItPlugins:o}=ee,i=O("editorId"),a=O("language"),u=O("usedLanguageText"),r=O("showCodeRowNumber"),h=O("theme"),s=O("customIcon"),c=O("rootRef"),g=j([]),v=Di(e),k=ji(e),{reRenderRef:w,replaceMermaid:p}=Bi(e),b=ii({html:!0,breaks:!0,linkify:!0});l(b,{editorId:i});const y=[{type:"image",plugin:ai,options:{figcaption:!0,classes:"md-zoom"}},{type:"admonition",plugin:Gi,options:{}},{type:"taskList",plugin:nr,options:{}},{type:"heading",plugin:qi,options:{mdHeadingId:e.mdHeadingId,headsRef:g}},{type:"code",plugin:Yi,options:{editorId:i,usedLanguageTextRef:u,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold,customIconRef:s}},{type:"xss",plugin:Va,options:{}},{type:"sub",plugin:ri,options:{}},{type:"sup",plugin:si,options:{}}];e.noKatex||y.push({type:"katex",plugin:Ui,options:{katexRef:k}}),e.noMermaid||y.push({type:"mermaid",plugin:Wi,options:{themeRef:h}}),o(y,{editorId:i}).forEach(L=>{b.use(L.plugin,L.options)});const T=b.options.highlight;b.set({highlight:(L,N,V)=>{if(T){const J=T(L,N,V);if(J)return J}let W;!e.noHighlight&&v.value?v.value.getLanguage(N)?W=v.value.highlight(L,{language:N,ignoreIllegals:!0}).value:W=v.value.highlightAuto(L).value:W=b.utils.escapeHtml(L);const ne=r?Si(W.replace(/^\n+|\n+$/g,""),L.replace(/^\n+|\n+$/g,"")):`<span class="${f}-code-block">${W.replace(/^\n+|\n+$/g,"")}</span>`;return`<pre><code class="language-${N}" language=${N}>${ne}</code></pre>`}}),lr(b);const C=j(`_article-key_${en()}`),S=j(e.sanitize(b.render(e.modelValue))),A=()=>{x.emit(i,At,S.value),e.onHtmlChanged(S.value),e.onGetCatalog(g.value),x.emit(i,vt,g.value),Pe(()=>{p().then(()=>{Cl(c.value.querySelectorAll(`#${i} .${f}-mermaid`))})})};te(A);const M=()=>{g.value=[],S.value=e.sanitize(b.render(e.modelValue)),A()},R=fe(()=>(e.noKatex||k.value)&&(e.noHighlight||v.value));return H([Ne(e,"modelValue"),R,w,a],mn(M,t?0:n.renderDelay)),H(()=>e.setting.preview,()=>{e.setting.preview&&Pe(()=>{p().then(()=>{Cl(c.value.querySelectorAll(`#${i} .${f}-mermaid`))}),x.emit(i,vt,g.value)})}),te(()=>{x.on(i,{name:no,callback(){x.emit(i,vt,g.value)}}),x.on(i,{name:vn,callback:()=>{C.value=`_article-key_${en()}`,M()}})}),{html:S,key:C}},Ll={checked:{regexp:/- \[x\]/,value:"- [ ]"},unChecked:{regexp:/- \[\s\]/,value:"- [x]"}},ir=(e,t)=>{const n=O("editorId"),l=O("rootRef");let o=()=>{};const i=()=>{if(!l.value)return!1;const a=l.value.querySelectorAll(".task-list-item.enabled"),u=r=>{var h;r.preventDefault();const s=r.target.checked?"unChecked":"checked",c=(h=r.target.parentElement)==null?void 0:h.dataset.line;if(!c)return;const g=Number(c),v=e.modelValue.split(`
`),k=v[Number(g)].replace(Ll[s].regexp,Ll[s].value);e.previewOnly?(v[Number(g)]=k,e.onChange(v.join(`
`))):x.emit(n,oo,g+1,k)};a.forEach(r=>{r.addEventListener("click",u)}),o=()=>{a.forEach(r=>{r.removeEventListener("click",u)})}};ut(()=>{o()}),H([t],()=>{o(),Pe(i)},{immediate:!0})},So={modelValue:{type:String,default:""},onChange:{type:Function,default:()=>{}},setting:{type:Object,default:()=>({preview:!0})},onHtmlChanged:{type:Function,default:()=>{}},onGetCatalog:{type:Function,default:()=>{}},mdHeadingId:{type:Function,default:()=>""},noMermaid:{type:Boolean,default:!1},sanitize:{type:Function,default:e=>e},noKatex:{type:Boolean,default:!1},formatCopiedText:{type:Function,default:e=>e},noHighlight:{type:Boolean,default:!1},previewOnly:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean},sanitizeMermaid:{type:Function},codeFoldable:{type:Boolean},autoFoldThreshold:{type:Number}},ar={...So,updateModelValue:{type:Function,default:()=>{}},placeholder:{type:String,default:""},scrollAuto:{type:Boolean},autofocus:{type:Boolean},disabled:{type:Boolean},readonly:{type:Boolean},maxlength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function,default:()=>{}},onFocus:{type:Function,default:()=>{}},noPrettier:{type:Boolean},completions:{type:Array},catalogVisible:{type:Boolean},theme:{type:String,default:"light"},onInput:{type:Function},onDrop:{type:Function,default:()=>{}},inputBoxWitdh:{type:String},onInputBoxWitdhChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},xo=K({name:"ContentPreview",props:So,setup(e){const t=O("editorId"),n=O("previewTheme"),l=O("showCodeRowNumber"),{html:o,key:i}=or(e,e.previewOnly);return Pi(e,o,i),Ni(e,o),ir(e,o),()=>m(Bt,null,[e.setting.preview&&m("div",{id:`${t}-preview-wrapper`,class:`${f}-preview-wrapper`,key:"content-preview-wrapper"},[m("div",{key:i.value,id:`${t}-preview`,class:[`${f}-preview`,`${n==null?void 0:n.value}-theme`,l&&`${f}-scrn`],innerHTML:o.value},null)]),!e.previewOnly&&e.setting.htmlPreview&&m("div",{id:`${t}-html-wrapper`,class:`${f}-preview-wrapper`,key:"html-preview-wrapper"},[m("div",{class:`${f}-html`},[o.value])])])}}),rr=(e,t)=>{const{editorId:n}=e,l=ve({buildFinished:!1,html:""});H(()=>e.modelValue,()=>{l.buildFinished=!1}),te(()=>{x.on(n,{name:At,callback(o){l.buildFinished=!0,l.html=o}}),x.on(n,{name:jt,callback(){const o=new Promise(i=>{if(l.buildFinished)i(l.html);else{const a=u=>{i(u),x.remove(n,At,a)};x.on(n,{name:At,callback:a})}});e.onSave?e.onSave(e.modelValue,o):t.emit("onSave",e.modelValue,o)}})})},_o=(e,t)=>{const{editorId:n}=e,l=ee.editorExtensions.highlight,o=ee.editorExtensionsAttrs.highlight;_e("editorId",n),_e("rootRef",t),_e("theme",fe(()=>e.theme)),_e("language",fe(()=>e.language)),_e("highlight",fe(()=>{const{js:a}=l,u={...nn,...l.css},{js:r,css:h={}}=o||{},s=e.codeStyleReverse&&e.codeStyleReverseList.includes(e.previewTheme)?"dark":e.theme,c=u[e.codeTheme]?u[e.codeTheme][s]:nn.atom[s],g=u[e.codeTheme]&&h[e.codeTheme]?h[e.codeTheme][s]:h.atom?h.atom[s]:{};return{js:{src:a,...r},css:{href:c,...g}}})),_e("showCodeRowNumber",e.showCodeRowNumber);const i=fe(()=>{const a={...ml,...ee.editorConfig.languageUserDefined};return Ho(Ro(ml["en-US"]),a[e.language]||{})});_e("usedLanguageText",i),_e("previewTheme",fe(()=>e.previewTheme)),_e("customIcon",fe(()=>e.customIcon))},sr=(e,t)=>{_o(e,t),_e("tabWidth",e.tabWidth)},Ao=e=>{te(()=>{const{editorExtensions:t,editorExtensionsAttrs:n,iconfontType:l}=ee;e.noIconfont||(l==="svg"?ye("script",{...n.iconfont,src:t.iconfont,id:`${f}-icon`}):ye("link",{...n.iconfontClass,rel:"stylesheet",href:t.iconfontClass,id:`${f}-icon-class`}))})},cr=e=>{const{noPrettier:t,noUploadImg:n}=e,{editorExtensions:l,editorExtensionsAttrs:o}=ee,i=t||l.prettier.prettierInstance,a=t||l.prettier.parserMarkdownInstance,u=n||l.cropper.instance;te(()=>{if(!u){const{js:r={},css:h={}}=o.cropper||{};ye("link",{...h,rel:"stylesheet",href:l.cropper.css,id:`${f}-cropperCss`}),ye("script",{...r,src:l.cropper.js,id:`${f}-cropper`})}if(!i){const{standaloneJs:r={}}=o.prettier||{};ye("script",{...r,src:l.prettier.standaloneJs,id:`${f}-prettier`})}if(!a){const{parserMarkdownJs:r={}}=o.prettier||{};ye("script",{...r,src:l.prettier.parserMarkdownJs,id:`${f}-prettierMD`})}}),Ao(e)},ur=(e,t)=>{const{editorId:n}=e;te(()=>{x.on(n,{name:Je,callback:l=>{e.onError instanceof Function?e.onError(l):t.emit("onError",l)}})})},dr=(e,t)=>{const{editorId:n}=e,l=ve({pageFullscreen:e.pageFullscreen,fullscreen:!1,preview:e.preview,htmlPreview:e.preview?!1:e.htmlPreview,previewOnly:!1}),o=ve({...l}),i=(r,h)=>{const s=h===void 0?!l[r]:h;switch(r){case"preview":{l.htmlPreview=!1,l.previewOnly=!1;break}case"htmlPreview":{l.preview=!1,l.previewOnly=!1;break}case"previewOnly":{s?!l.preview&&!l.htmlPreview&&(l.preview=!0):(o.preview||(l.preview=!1),o.htmlPreview||(l.htmlPreview=!1));break}}o[r]=s,l[r]=s};let a="";const u=()=>{l.pageFullscreen||l.fullscreen?document.body.style.overflow="hidden":document.body.style.overflow=a};return H(()=>[l.pageFullscreen,l.fullscreen],u),te(()=>{x.on(n,{name:Wt,callback(r,h){const s=c=>{x.emit(n,z,"image",{desc:"",urls:c}),h&&h()};e.onUploadImg?e.onUploadImg(r,s):t.emit("onUploadImg",r,s)}}),a=document.body.style.overflow,u()}),[l,i]},fr=e=>{const{editorId:t}=e,n=j(!1);return te(()=>{x.on(t,{name:gn,callback:o=>{o===void 0?n.value=!n.value:n.value=o}})}),fe(()=>!e.toolbarsExclude.includes("catalog")&&e.toolbars.includes("catalog")&&n.value)},hr=(e,t,n,l,o,i)=>{const{editorId:a}=e;H(()=>l.pageFullscreen,r=>{x.emit(a,gl,r)}),H(()=>l.fullscreen,r=>{x.emit(a,vl,r)}),H(()=>l.preview,r=>{x.emit(a,pl,r)}),H(()=>l.previewOnly,r=>{x.emit(a,bl,r)}),H(()=>l.htmlPreview,r=>{x.emit(a,yl,r)}),H(n,r=>{x.emit(a,wl,r)});const u={on(r,h){switch(r){case"pageFullscreen":{x.on(a,{name:gl,callback(s){h(s)}});break}case"fullscreen":{x.on(a,{name:vl,callback(s){h(s)}});break}case"preview":{x.on(a,{name:pl,callback(s){h(s)}});break}case"previewOnly":{x.on(a,{name:bl,callback(s){h(s)}});break}case"htmlPreview":{x.on(a,{name:yl,callback(s){h(s)}});break}case"catalog":{x.on(a,{name:wl,callback(s){h(s)}});break}}},togglePageFullscreen(r){o("pageFullscreen",r)},toggleFullscreen(r){x.emit(a,Ql,r)},togglePreview(r){o("preview",r)},togglePreviewOnly(r){o("previewOnly",r)},toggleHtmlPreview(r){o("htmlPreview",r)},toggleCatalog(r){x.emit(a,gn,r)},triggerSave(){x.emit(a,jt)},insert(r){x.emit(a,z,"universal",{generate:r})},focus(r){var h;(h=i.value)==null||h.focus(r)},rerender(){x.emit(a,vn)},getSelectedText(){var r;return(r=i.value)==null?void 0:r.getSelectedText()},resetHistory(){var r;(r=i.value)==null||r.resetHistory()},domEventHandlers(r){x.emit(a,lo,r)},execCommand(r){x.emit(a,z,r)},getEditorView(){var r;return(r=i.value)==null?void 0:r.getEditorView()}};t.expose(u)},mr=e=>e,Eo={modelValue:{type:String,default:""},onChange:{type:Function},theme:{type:String,default:"light"},class:{type:String,default:""},language:{type:String,default:"zh-CN"},onHtmlChanged:{type:Function},onGetCatalog:{type:Function},editorId:{type:String,default:()=>_i("md-editor-v3_")},showCodeRowNumber:{type:Boolean,default:!0},previewTheme:{type:String,default:"default"},style:{type:Object,default:()=>({})},mdHeadingId:{type:Function,default:mr},sanitize:{type:Function,default:e=>e},noMermaid:{type:Boolean,default:!1},noKatex:{type:Boolean,default:!1},codeTheme:{type:String,default:"atom"},noIconfont:{type:Boolean},formatCopiedText:{type:Function,default:e=>e},codeStyleReverse:{type:Boolean,default:!0},codeStyleReverseList:{type:Array,default:["default","mk-cute"]},noHighlight:{type:Boolean,default:!1},noImgZoomIn:{type:Boolean,default:!1},customIcon:{type:Object,default:{}},sanitizeMermaid:{type:Function,default:e=>Promise.resolve(e)},codeFoldable:{type:Boolean,default:!0},autoFoldThreshold:{type:Number,default:30}},gr={...Eo,onSave:{type:Function},onUploadImg:{type:Function},pageFullscreen:{type:Boolean,default:!1},preview:{type:Boolean,default:!0},htmlPreview:{type:Boolean,default:!1},toolbars:{type:Array,default:Zl},toolbarsExclude:{type:Array,default:[]},noPrettier:{type:Boolean,default:!1},tabWidth:{type:Number,default:2},tableShape:{type:Array},placeholder:{type:String,default:""},defToolbars:{type:[String,Object]},onError:{type:Function},footers:{type:Array,default:Jl},scrollAuto:{type:Boolean,default:!0},defFooters:{type:[String,Object]},noUploadImg:{type:Boolean},autoFocus:{type:Boolean},disabled:{type:Boolean},readOnly:{type:Boolean},maxLength:{type:Number},autoDetectCode:{type:Boolean},onBlur:{type:Function},onFocus:{type:Function},completions:{type:Array},showToolbarName:{type:Boolean,default:!1},onInput:{type:Function},onDrop:{type:Function},inputBoxWitdh:{type:String,default:"50%"},onInputBoxWitdhChange:{type:Function},transformImgUrl:{type:Function,default:e=>e}},Io=["onHtmlChanged","onGetCatalog","onChange","update:modelValue"],vr=[...Io,"onSave","onUploadImg","onError","onBlur","onFocus","onInput","onDrop","onInputBoxWitdhChange"],pr=(e,t)=>{const{editorId:n}=e,l={rerender(){x.emit(n,vn)}};t.expose(l)},Ht=K({name:"MdPreview",props:Eo,emits:Io,setup(e,t){const{editorId:n,noKatex:l,noMermaid:o,noHighlight:i}=e,a=j();return _o(e,a),Ao(e),pr(e,t),ut(()=>{x.clear(n)}),()=>m("div",{id:n,class:[f,e.class,e.theme==="dark"&&`${f}-dark`,`${f}-previewOnly`],style:e.style,ref:a},[m(xo,{modelValue:e.modelValue,onChange:u=>{e.onChange&&e.onChange(u),t.emit("onChange",u),t.emit("update:modelValue",u)},onHtmlChanged:u=>{e.onHtmlChanged?e.onHtmlChanged(u):t.emit("onHtmlChanged",u)},onGetCatalog:u=>{e.onGetCatalog?e.onGetCatalog(u):t.emit("onGetCatalog",u)},mdHeadingId:e.mdHeadingId,noMermaid:o,sanitize:e.sanitize,noKatex:l,formatCopiedText:e.formatCopiedText,noHighlight:i,noImgZoomIn:e.noImgZoomIn,previewOnly:!0,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null)])}});Ht.install=e=>(e.component(Ht.name,Ht),e);const br={title:{type:String,default:""},trigger:{type:[String,Object]},onClick:{type:Function},insert:{type:Function},language:{type:String},theme:{type:String}},Rt=K({name:"NormalToolbar",props:br,emits:["onClick"],setup(e,t){return()=>{const n=$e({props:e,ctx:t},"trigger");return m("div",{class:`${f}-toolbar-item`,title:e.title,onClick:l=>{e.onClick instanceof Function?e.onClick(l):t.emit("onClick",l)}},[n])}}});Rt.install=e=>(e.component(Rt.name,Rt),e);function yr(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!jo(e)}const wr={title:{type:String,default:""},modalTitle:{type:String,default:""},visible:{type:Boolean},width:{type:String,default:"auto"},height:{type:String,default:"auto"},trigger:{type:[String,Object]},onClick:{type:Function},onClose:{type:Function},showAdjust:{type:Boolean,default:!1},isFullscreen:{type:Boolean,default:!1},onAdjust:{type:Function},class:{type:String},style:{type:[Object,String]},showMask:{type:Boolean,default:!0},insert:{type:Function},language:{type:String},theme:{type:String},previewTheme:{type:String}},Mt=K({name:"ModalToolbar",props:wr,emits:["onClick","onClose","onAdjust"],setup(e,t){return()=>{const n=$e({props:e,ctx:t},"trigger"),l=$e({props:e,ctx:t},"default");return m(Bt,null,[m("div",{class:`${f}-toolbar-item`,title:e.title,onClick:()=>{e.onClick instanceof Function?e.onClick():t.emit("onClick")}},[n]),m(it,{style:e.style,class:e.class,width:e.width,height:e.height,title:e.modalTitle,visible:e.visible,showMask:e.showMask,onClose:()=>{e.onClose instanceof Function?e.onClose():t.emit("onClose")},showAdjust:e.showAdjust,isFullscreen:e.isFullscreen,onAdjust:o=>{e.onAdjust instanceof Function?e.onAdjust(o):t.emit("onAdjust",o)}},yr(l)?l:{default:()=>[l]})])}}});Mt.install=e=>(e.component(Mt.name,Mt),e);var kr=Object.defineProperty,Cr=(e,t,n)=>t in e?kr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,je=(e,t,n)=>Cr(e,typeof t!="symbol"?t+"":t,n);const Tr=K({setup(){return()=>m("div",{class:`${f}-divider`},null)}}),$r={noPrettier:{type:Boolean},toolbars:{type:Array,default:()=>[]},toolbarsExclude:{type:Array,default:()=>[]},setting:{type:Object,default:()=>({})},screenfull:{type:Object,default:null},screenfullJs:{type:String,default:""},updateSetting:{type:Function,default:()=>{}},tableShape:{type:Array,default:()=>[6,4]},defToolbars:{type:Object},noUploadImg:{type:Boolean},showToolbarName:{type:Boolean},catalogVisible:{type:Boolean}},Sr=e=>{const t=O("editorId"),{editorExtensions:n,editorExtensionsAttrs:l}=ee;let o=n.screenfull.instance;const i=j(!1),a=h=>{if(!o){x.emit(t,Je,{name:"fullscreen",message:"fullscreen is undefined"});return}o.isEnabled?(i.value=!0,(h===void 0?!o.isFullscreen:h)?o.request():o.exit()):console.error("browser does not support screenfull!")},u=()=>{o&&o.isEnabled&&o.on("change",()=>{(i.value||e.setting.fullscreen)&&(i.value=!1,e.updateSetting("fullscreen"))})},r=()=>{o=window.screenfull,u()};return te(()=>{var h;u(),o||ye("script",{...(h=l.screenfull)==null?void 0:h.js,src:n.screenfull.js,id:`${f}-screenfull`,onload:r},"screenfull")}),te(()=>{x.on(t,{name:Ql,callback:a})}),{fullscreenHandler:a}},xr={tableShape:{type:Array,default:()=>[6,4]},onSelected:{type:Function,default:()=>{}}},_r=K({name:"TableShape",props:xr,setup(e){const t=ve({x:-1,y:-1}),n=fe(()=>JSON.stringify(e.tableShape)),l=()=>{const i=[...JSON.parse(n.value)];return(!i[2]||i[2]<i[0])&&(i[2]=i[0]),(!i[3]||i[3]<i[3])&&(i[3]=i[1]),i},o=j(l());return H([n],()=>{o.value=l()}),()=>m("div",{class:`${f}-table-shape`,onMouseleave:()=>{o.value=l(),t.x=-1,t.y=-1}},[new Array(o.value[1]).fill("").map((i,a)=>m("div",{class:`${f}-table-shape-row`,key:`table-shape-row-${a}`},[new Array(o.value[0]).fill("").map((u,r)=>m("div",{class:`${f}-table-shape-col`,key:`table-shape-col-${r}`,onMouseenter:()=>{t.x=a,t.y=r,r+1===o.value[0]&&r+1<o.value[2]?o.value[0]++:r+2<o.value[0]&&o.value[0]>e.tableShape[0]&&o.value[0]--,a+1===o.value[1]&&a+1<o.value[3]?o.value[1]++:a+2<o.value[1]&&o.value[1]>e.tableShape[1]&&o.value[1]--},onClick:()=>{e.onSelected(t)}},[m("div",{class:[`${f}-table-shape-col-default`,a<=t.x&&r<=t.y&&`${f}-table-shape-col-include`]},null)]))]))])}}),Ar={type:{type:String,default:"link"},visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Er=K({props:Ar,setup(e){const t=O("usedLanguageText"),n=O("editorId"),l=fe(()=>{var i,a;switch(e.type){case"link":return(i=t.value.linkModalTips)==null?void 0:i.linkTitle;case"image":return(a=t.value.linkModalTips)==null?void 0:a.imageTitle;default:return""}}),o=ve({desc:"",url:""});return H(()=>e.visible,i=>{i||setTimeout(()=>{o.desc="",o.url=""},200)}),()=>m(it,{title:l.value,visible:e.visible,onClose:e.onCancel},{default:()=>{var i,a,u,r,h;return[m("div",{class:`${f}-form-item`},[m("label",{class:`${f}-label`,for:`link-desc-${n}`},[(i=t.value.linkModalTips)==null?void 0:i.descLabel]),m("input",{placeholder:(a=t.value.linkModalTips)==null?void 0:a.descLabelPlaceHolder,class:`${f}-input`,id:`link-desc-${n}`,type:"text",value:o.desc,onChange:s=>{o.desc=s.target.value},autocomplete:"off"},null)]),m("div",{class:`${f}-form-item`},[m("label",{class:`${f}-label`,for:`link-url-${n}`},[(u=t.value.linkModalTips)==null?void 0:u.urlLabel]),m("input",{placeholder:(r=t.value.linkModalTips)==null?void 0:r.urlLabelPlaceHolder,class:`${f}-input`,id:`link-url-${n}`,type:"text",value:o.url,onChange:s=>{o.url=s.target.value},autocomplete:"off"},null)]),m("div",{class:`${f}-form-item`},[m("button",{class:[`${f}-btn`,`${f}-btn-row`],type:"button",onClick:()=>{e.onOk(o),o.desc="",o.url=""}},[(h=t.value.linkModalTips)==null?void 0:h.buttonOK])])]}})}}),Ir={visible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Lr=K({props:Ir,setup(e){const t=O("usedLanguageText"),n=O("editorId"),l=O("rootRef");let o=ee.editorExtensions.cropper.instance;const i=j(),a=j(),u=j(),r=ve({cropperInited:!1,imgSelected:!1,imgSrc:"",isFullscreen:!1});let h=null;H(()=>e.visible,()=>{e.visible&&!r.cropperInited&&(o=o||window.Cropper,i.value.onchange=()=>{if(!o){x.emit(n,Je,{name:"Cropper",message:"Cropper is undefined"});return}const c=i.value.files||[];if(r.imgSelected=!0,(c==null?void 0:c.length)>0){const g=new FileReader;g.onload=v=>{r.imgSrc=v.target.result},g.readAsDataURL(c[0])}})}),H(()=>[r.imgSelected],()=>{u.value.style=""}),H([Ne(()=>r.isFullscreen),Ne(()=>r.imgSrc)],()=>{r.imgSrc&&Pe(()=>{h==null||h.destroy(),u.value.style="",a.value&&(h=new o(a.value,{viewMode:2,preview:l.value.getRootNode().querySelector(`.${f}-clip-preview-target`)}))})});const s=()=>{h.clear(),h.destroy(),h=null,i.value.value="",r.imgSelected=!1};return()=>{var c;return m(it,{class:`${f}-modal-clip`,title:(c=t.value.clipModalTips)==null?void 0:c.title,visible:e.visible,onClose:e.onCancel,showAdjust:!0,isFullscreen:r.isFullscreen,onAdjust:g=>{r.isFullscreen=g},width:"668px",height:"421px"},{default:()=>{var g,v,k;return[m("div",{class:`${f}-form-item ${f}-clip`},[m("div",{class:`${f}-clip-main`},[r.imgSelected?m("div",{class:`${f}-clip-cropper`},[m("img",{src:r.imgSrc,ref:a,style:{display:"none"},alt:""},null),m("div",{class:`${f}-clip-delete`,onClick:s},[m(P,{name:"delete"},null)])]):m("div",{class:`${f}-clip-upload`,onClick:()=>{i.value.click()},role:"button",tabindex:"0","aria-label":(g=t.value.imgTitleItem)==null?void 0:g.upload},[m(P,{name:"upload"},null)])]),m("div",{class:`${f}-clip-preview`},[m("div",{class:`${f}-clip-preview-target`,ref:u},null)])]),m("div",{class:`${f}-form-item`},[m("button",{class:`${f}-btn`,type:"button",onClick:()=>{if(h){const w=h.getCroppedCanvas();x.emit(n,Wt,[$i(w.toDataURL("image/png"))],e.onOk),s()}}},[((v=t.value.clipModalTips)==null?void 0:v.buttonUpload)||((k=t.value.linkModalTips)==null?void 0:k.buttonOK)])]),m("input",{ref:i,accept:"image/*",type:"file",multiple:!1,style:{display:"none"},"aria-hidden":"true"},null)]}})}}}),Fr={type:{type:String,default:"link"},linkVisible:{type:Boolean,default:!1},clipVisible:{type:Boolean,default:!1},onCancel:{type:Function,default:()=>{}},onOk:{type:Function,default:()=>{}}},Or=K({props:Fr,setup(e){return()=>m(Bt,null,[m(Er,{type:e.type,visible:e.linkVisible,onOk:e.onOk,onCancel:e.onCancel},null),m(Lr,{visible:e.clipVisible,onOk:e.onOk,onCancel:e.onCancel},null)])}}),Hr=K({name:"MDEditorToolbar",props:$r,setup(e){const t=O("editorId"),n=O("usedLanguageText"),l=O("theme"),o=O("previewTheme"),i=O("language"),{fullscreenHandler:a}=Sr(e),u=`${t}-toolbar-wrapper`,r=j(),h=ve({title:!1,catalog:!1,image:!1,table:!1,mermaid:!1,katex:!1}),s=(b,y)=>{x.emit(t,z,b,y)},c=ve({type:"link",linkVisible:!1,clipVisible:!1}),g=j();te(()=>{x.on(t,{name:ln,callback(b){c.type=b,c.linkVisible=!0}})});const v=fe(()=>{const b=e.toolbars.filter(S=>!e.toolbarsExclude.includes(S)),y=b.indexOf("="),T=y===-1?b:b.slice(0,y+1),C=y===-1?[]:b.slice(y,Number.MAX_SAFE_INTEGER);return[T,C]}),k=j(),w=()=>{x.emit(t,Wt,Array.from(k.value.files||[])),k.value.value=""};te(()=>{k.value.addEventListener("change",w)});const p=b=>{var y,T,C,S,A,M,R,L,N,V,W,ne,J,se,pe,Se,Q,ie,xe,be,he,Z,ce,Vt,wn,kn,Cn,Tn,$n,Sn,xn,_n,An,En,In,Ln,Fn,On,Hn,Rn,Mn,Nn,Pn,Dn,Bn,jn,Wn,zn,Vn,Un,Gn,qn,Xn,Kn,Yn,Zn,Jn,Qn,el,tl,nl,ll,ol,il,al,rl,sl,cl,ul;if(Zl.includes(b))switch(b){case"-":return m(Tr,null,null);case"bold":return m("div",{class:`${f}-toolbar-item`,title:(y=n.value.toolbarTips)==null?void 0:y.bold,onClick:()=>{s("bold")}},[m(P,{name:"bold"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(T=n.value.toolbarTips)==null?void 0:T.bold])]);case"underline":return m("div",{class:`${f}-toolbar-item`,title:(C=n.value.toolbarTips)==null?void 0:C.underline,onClick:()=>{s("underline")}},[m(P,{name:"underline"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(S=n.value.toolbarTips)==null?void 0:S.underline])]);case"italic":return m("div",{class:`${f}-toolbar-item`,title:(A=n.value.toolbarTips)==null?void 0:A.italic,onClick:()=>{s("italic")}},[m(P,{name:"italic"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(M=n.value.toolbarTips)==null?void 0:M.italic])]);case"strikeThrough":return m("div",{class:`${f}-toolbar-item`,title:(R=n.value.toolbarTips)==null?void 0:R.strikeThrough,onClick:()=>{s("strikeThrough")}},[m(P,{name:"strike-through"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(L=n.value.toolbarTips)==null?void 0:L.strikeThrough])]);case"title":return m(lt,{relative:`#${u}`,visible:h.title,onChange:B=>{h.title=B},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{h.title=!1},role:"menu"},[m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{s("h1")},role:"menuitem",tabindex:"0"},[(N=n.value.titleItem)==null?void 0:N.h1]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{s("h2")},role:"menuitem",tabindex:"0"},[(V=n.value.titleItem)==null?void 0:V.h2]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{s("h3")},role:"menuitem",tabindex:"0"},[(W=n.value.titleItem)==null?void 0:W.h3]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{s("h4")},role:"menuitem",tabindex:"0"},[(ne=n.value.titleItem)==null?void 0:ne.h4]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{s("h5")},role:"menuitem",tabindex:"0"},[(J=n.value.titleItem)==null?void 0:J.h5]),m("li",{class:`${f}-menu-item ${f}-menu-item-title`,onClick:()=>{s("h6")},role:"menuitem",tabindex:"0"},[(se=n.value.titleItem)==null?void 0:se.h6])])},{default:()=>{var B,ue;return[m("div",{class:`${f}-toolbar-item`,title:(B=n.value.toolbarTips)==null?void 0:B.title},[m(P,{name:"title"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=n.value.toolbarTips)==null?void 0:ue.title])])]}});case"sub":return m("div",{class:`${f}-toolbar-item`,title:(pe=n.value.toolbarTips)==null?void 0:pe.sub,onClick:()=>{s("sub")}},[m(P,{name:"sub"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Se=n.value.toolbarTips)==null?void 0:Se.sub])]);case"sup":return m("div",{class:`${f}-toolbar-item`,title:(Q=n.value.toolbarTips)==null?void 0:Q.sup,onClick:()=>{s("sup")}},[m(P,{name:"sup"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ie=n.value.toolbarTips)==null?void 0:ie.sup])]);case"quote":return m("div",{class:`${f}-toolbar-item`,title:(xe=n.value.toolbarTips)==null?void 0:xe.quote,onClick:()=>{s("quote")}},[m(P,{name:"quote"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(be=n.value.toolbarTips)==null?void 0:be.quote])]);case"unorderedList":return m("div",{class:`${f}-toolbar-item`,title:(he=n.value.toolbarTips)==null?void 0:he.unorderedList,onClick:()=>{s("unorderedList")}},[m(P,{name:"unordered-list"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Z=n.value.toolbarTips)==null?void 0:Z.unorderedList])]);case"orderedList":return m("div",{class:`${f}-toolbar-item`,title:(ce=n.value.toolbarTips)==null?void 0:ce.orderedList,onClick:()=>{s("orderedList")}},[m(P,{name:"ordered-list"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Vt=n.value.toolbarTips)==null?void 0:Vt.orderedList])]);case"task":return m("div",{class:`${f}-toolbar-item`,title:(wn=n.value.toolbarTips)==null?void 0:wn.task,onClick:()=>{s("task")}},[m(P,{name:"task"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(kn=n.value.toolbarTips)==null?void 0:kn.task])]);case"codeRow":return m("div",{class:`${f}-toolbar-item`,title:(Cn=n.value.toolbarTips)==null?void 0:Cn.codeRow,onClick:()=>{s("codeRow")}},[m(P,{name:"code-row"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Tn=n.value.toolbarTips)==null?void 0:Tn.codeRow])]);case"code":return m("div",{class:`${f}-toolbar-item`,title:($n=n.value.toolbarTips)==null?void 0:$n.code,onClick:()=>{s("code")}},[m(P,{name:"code"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Sn=n.value.toolbarTips)==null?void 0:Sn.code])]);case"link":return m("div",{class:`${f}-toolbar-item`,title:(xn=n.value.toolbarTips)==null?void 0:xn.link,onClick:()=>{c.type="link",c.linkVisible=!0}},[m(P,{name:"link"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(_n=n.value.toolbarTips)==null?void 0:_n.link])]);case"image":return e.noUploadImg?m("div",{class:`${f}-toolbar-item`,title:(An=n.value.toolbarTips)==null?void 0:An.image,onClick:()=>{c.type="image",c.linkVisible=!0}},[m(P,{name:"image"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(En=n.value.toolbarTips)==null?void 0:En.image])]):m(lt,{relative:`#${u}`,visible:h.image,onChange:B=>{h.image=B},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{h.title=!1},role:"menu"},[m("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{c.type="image",c.linkVisible=!0},role:"menuitem",tabindex:"0"},[(In=n.value.imgTitleItem)==null?void 0:In.link]),m("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{k.value.click()},role:"menuitem",tabindex:"0"},[(Ln=n.value.imgTitleItem)==null?void 0:Ln.upload]),m("li",{class:`${f}-menu-item ${f}-menu-item-image`,onClick:()=>{c.clipVisible=!0},role:"menuitem",tabindex:"0"},[(Fn=n.value.imgTitleItem)==null?void 0:Fn.clip2upload])])},{default:()=>{var B,ue;return[m("div",{class:`${f}-toolbar-item`,title:(B=n.value.toolbarTips)==null?void 0:B.image},[m(P,{name:"image"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=n.value.toolbarTips)==null?void 0:ue.image])])]}});case"table":return m(lt,{relative:`#${u}`,visible:h.table,onChange:B=>{h.table=B},key:"bar-table",overlay:m(_r,{tableShape:e.tableShape,onSelected:B=>{s("table",{selectedShape:B})}},null)},{default:()=>{var B,ue;return[m("div",{class:`${f}-toolbar-item`,title:(B=n.value.toolbarTips)==null?void 0:B.table},[m(P,{name:"table"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=n.value.toolbarTips)==null?void 0:ue.table])])]}});case"revoke":return m("div",{class:`${f}-toolbar-item`,title:(On=n.value.toolbarTips)==null?void 0:On.revoke,onClick:()=>{x.emit(t,eo)}},[m(P,{name:"revoke"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Hn=n.value.toolbarTips)==null?void 0:Hn.revoke])]);case"next":return m("div",{class:`${f}-toolbar-item`,title:(Rn=n.value.toolbarTips)==null?void 0:Rn.next,onClick:()=>{x.emit(t,to)}},[m(P,{name:"next"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Mn=n.value.toolbarTips)==null?void 0:Mn.next])]);case"save":return m("div",{class:`${f}-toolbar-item`,title:(Nn=n.value.toolbarTips)==null?void 0:Nn.save,onClick:()=>{x.emit(t,jt)}},[m(P,{name:"baocun"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Pn=n.value.toolbarTips)==null?void 0:Pn.save])]);case"prettier":return e.noPrettier?"":m("div",{class:`${f}-toolbar-item`,title:(Dn=n.value.toolbarTips)==null?void 0:Dn.prettier,onClick:()=>{s("prettier")}},[m(P,{name:"prettier"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Bn=n.value.toolbarTips)==null?void 0:Bn.prettier])]);case"pageFullscreen":return!e.setting.fullscreen&&m("div",{class:[`${f}-toolbar-item`,e.setting.pageFullscreen&&`${f}-toolbar-active`],title:(jn=n.value.toolbarTips)==null?void 0:jn.pageFullscreen,onClick:()=>{e.updateSetting("pageFullscreen")}},[m(P,{name:e.setting.pageFullscreen?"suoxiao":"fangda"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Wn=n.value.toolbarTips)==null?void 0:Wn.pageFullscreen])]);case"fullscreen":return m("div",{class:[`${f}-toolbar-item`,e.setting.fullscreen&&`${f}-toolbar-active`],title:(zn=n.value.toolbarTips)==null?void 0:zn.fullscreen,onClick:()=>{a()}},[m(P,{name:e.setting.fullscreen?"fullscreen-exit":"fullscreen"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Vn=n.value.toolbarTips)==null?void 0:Vn.fullscreen])]);case"preview":return m("div",{class:[`${f}-toolbar-item`,e.setting.preview&&`${f}-toolbar-active`],title:(Un=n.value.toolbarTips)==null?void 0:Un.preview,onClick:()=>{e.updateSetting("preview")}},[m(P,{name:"preview"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Gn=n.value.toolbarTips)==null?void 0:Gn.preview])]);case"previewOnly":return m("div",{class:[`${f}-toolbar-item`,e.setting.previewOnly&&`${f}-toolbar-active`],title:(qn=n.value.toolbarTips)==null?void 0:qn.previewOnly,onClick:()=>{e.updateSetting("previewOnly")}},[m(P,{name:"preview-only"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Xn=n.value.toolbarTips)==null?void 0:Xn.previewOnly])]);case"htmlPreview":return m("div",{class:[`${f}-toolbar-item`,e.setting.htmlPreview&&`${f}-toolbar-active`],title:(Kn=n.value.toolbarTips)==null?void 0:Kn.htmlPreview,onClick:()=>{e.updateSetting("htmlPreview")}},[m(P,{name:"coding"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Yn=n.value.toolbarTips)==null?void 0:Yn.htmlPreview])]);case"catalog":return m("div",{class:[`${f}-toolbar-item`,e.catalogVisible&&`${f}-toolbar-active`],title:(Zn=n.value.toolbarTips)==null?void 0:Zn.catalog,onClick:()=>{x.emit(t,gn)},key:"bar-catalog"},[m(P,{name:"catalog"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(Jn=n.value.toolbarTips)==null?void 0:Jn.catalog])]);case"github":return m("div",{class:`${f}-toolbar-item`,title:(Qn=n.value.toolbarTips)==null?void 0:Qn.github,onClick:()=>No("https://github.com/imzbf/md-editor-v3")},[m(P,{name:"github"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(el=n.value.toolbarTips)==null?void 0:el.github])]);case"mermaid":return m(lt,{relative:`#${u}`,visible:h.mermaid,onChange:B=>{h.mermaid=B},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{h.mermaid=!1},role:"menu"},[m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("flow")},role:"menuitem",tabindex:"0"},[(tl=n.value.mermaid)==null?void 0:tl.flow]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("sequence")},role:"menuitem",tabindex:"0"},[(nl=n.value.mermaid)==null?void 0:nl.sequence]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("gantt")},role:"menuitem",tabindex:"0"},[(ll=n.value.mermaid)==null?void 0:ll.gantt]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("class")},role:"menuitem",tabindex:"0"},[(ol=n.value.mermaid)==null?void 0:ol.class]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("state")},role:"menuitem",tabindex:"0"},[(il=n.value.mermaid)==null?void 0:il.state]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("pie")},role:"menuitem",tabindex:"0"},[(al=n.value.mermaid)==null?void 0:al.pie]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("relationship")},role:"menuitem",tabindex:"0"},[(rl=n.value.mermaid)==null?void 0:rl.relationship]),m("li",{class:`${f}-menu-item ${f}-menu-item-mermaid`,onClick:()=>{s("journey")},role:"menuitem",tabindex:"0"},[(sl=n.value.mermaid)==null?void 0:sl.journey])]),key:"bar-mermaid"},{default:()=>{var B,ue;return[m("div",{class:`${f}-toolbar-item`,title:(B=n.value.toolbarTips)==null?void 0:B.mermaid},[m(P,{name:"mermaid"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=n.value.toolbarTips)==null?void 0:ue.mermaid])])]}});case"katex":return m(lt,{relative:`#${u}`,visible:h.katex,onChange:B=>{h.katex=B},overlay:m("ul",{class:`${f}-menu`,onClick:()=>{h.katex=!1},role:"menu"},[m("li",{class:`${f}-menu-item ${f}-menu-item-katex`,onClick:()=>{s("katexInline")},role:"menuitem",tabindex:"0"},[(cl=n.value.katex)==null?void 0:cl.inline]),m("li",{class:`${f}-menu-item ${f}-menu-item-katex`,onClick:()=>{s("katexBlock")},role:"menuitem",tabindex:"0"},[(ul=n.value.katex)==null?void 0:ul.block])]),key:"bar-katex"},{default:()=>{var B,ue;return[m("div",{class:`${f}-toolbar-item`,title:(B=n.value.toolbarTips)==null?void 0:B.katex},[m(P,{name:"formula"},null),e.showToolbarName&&m("div",{class:`${f}-toolbar-item-name`},[(ue=n.value.toolbarTips)==null?void 0:ue.katex])])]}})}else if(e.defToolbars instanceof Array){const B=e.defToolbars[b];return B?tn(B,{theme:l.value,previewTheme:o.value,language:i.value,insert(Ut){x.emit(t,z,"universal",{generate:Ut})}}):""}else if(e.defToolbars&&e.defToolbars.children instanceof Array){const B=e.defToolbars.children[b];return B?tn(B,{theme:l.value,previewTheme:o.value,language:i.value,insert(Ut){x.emit(t,z,"universal",{generate:Ut})}}):""}else return""};return H(()=>e.toolbars,()=>{Pe(()=>{r.value&&Mo(r.value)})},{immediate:!0}),()=>{var b;const y=v.value[0].map(C=>p(C)),T=v.value[1].map(C=>p(C));return m(Bt,null,[e.toolbars.length>0&&m("div",{class:`${f}-toolbar-wrapper`,ref:r,id:u},[m("div",{class:[`${f}-toolbar`,e.showToolbarName&&`${f}-stn`]},[m("div",{class:`${f}-toolbar-left`,ref:g},[y]),m("div",{class:`${f}-toolbar-right`},[T])])]),m("label",{for:`${u}_label`,style:{display:"none"},"aria-label":(b=n.value.imgTitleItem)==null?void 0:b.upload},null),m("input",{id:`${u}_label`,ref:k,accept:"image/*",type:"file",multiple:!0,style:{display:"none"}},null),m(Or,{linkVisible:c.linkVisible,clipVisible:c.clipVisible,type:c.type,onCancel:()=>{c.linkVisible=!1,c.clipVisible=!1},onOk:C=>{C&&s(c.type,{desc:C.desc,url:C.url,transform:c.type==="image"}),c.linkVisible=!1,c.clipVisible=!1}},null)])}}}),Rr=(e,t,n)=>{const l=O("editorId");let o=()=>{},i=()=>{};const a=()=>{var u;o();const r=(u=n.value)==null?void 0:u.view.contentDOM.getRootNode(),h=r.querySelector(`#${l} .cm-scroller`),s=r.querySelector(`[id="${l}-preview-wrapper"]`),c=r.querySelector(`[id="${l}-html-wrapper"]`);(s||c)&&([i,o]=(s?Fi:Li)(h,s||c,n.value),e.scrollAuto&&i())};H([t,Ne(e.setting,"preview"),Ne(e.setting,"htmlPreview"),Ne(e.setting,"fullscreen"),Ne(e.setting,"pageFullscreen")],()=>{Pe(a)}),H(()=>e.scrollAuto,u=>{u?i():o()}),H(()=>e.setting.previewOnly,u=>{u?o():i()}),te(a)},Kt=async(e,t,n)=>{var l;let o="",i=0,a=0,u=!0,r=!1;const h=t.getSelectedText(),s=ee.editorConfig.mermaidTemplate;if(/^h[1-6]{1}$/.test(e)){const c=e.replace(/^h(\d)/,(g,v)=>new Array(Number(v)).fill("#",0,v).join(""));o=`${c} ${h}`,i=c.length+1}else if(e==="prettier"){const c=window.prettier||ee.editorExtensions.prettier.prettierInstance,g=[((l=window.prettierPlugins)==null?void 0:l.markdown)||ee.editorExtensions.prettier.parserMarkdownInstance];!c||g[0]===void 0?(x.emit(n.editorId,Je,{name:"prettier",message:"prettier is undefined"}),o=t.getValue()):o=await c.format(t.getValue(),{parser:"markdown",plugins:g}),u=!1,r=!0}else switch(e){case"bold":{o=`**${h}**`,i=2,a=-2;break}case"underline":{o=`<u>${h}</u>`,i=3,a=-4;break}case"italic":{o=`*${h}*`,i=1,a=-1;break}case"strikeThrough":{o=`~~${h}~~`,i=2,a=-2;break}case"sub":{o=`~${h}~`,i=1,a=-1;break}case"sup":{o=`^${h}^`,i=1,a=-1;break}case"codeRow":{o="`"+h+"`",i=1,a=-1;break}case"quote":{o=`> ${h}`,i=2;break}case"orderedList":{o=`1. ${h}`,i=3;break}case"unorderedList":{o=`- ${h}`,i=2;break}case"task":{o=`- [ ] ${h}`,i=6;break}case"code":{const c=n.text||h||"",g=n.mode||"language";o=`\`\`\`${g}
${c}
\`\`\`
`,i=3,a=3+g.length-o.length;break}case"table":{o="|";const{selectedShape:c={x:1,y:1}}=n,{x:g,y:v}=c;for(let k=0;k<=v;k++)o+=" col |";o+=`
|`;for(let k=0;k<=v;k++)o+=" - |";for(let k=0;k<=g;k++){o+=`
|`;for(let w=0;w<=v;w++)o+=" content |"}i=2,a=5-o.length;break}case"link":{const{desc:c,url:g}=n;o=`[${c}](${g})`,u=!1;break}case"image":{const{desc:c,url:g,urls:v}=n;v instanceof Array?o=v.reduce((k,w)=>{const{url:p="",alt:b="",title:y=""}=typeof w=="object"?w:{url:w};return k+`![${b}](${p}${y?" '"+y+"'":""})
`},""):o=`![${c}](${g})
`,u=!1;break}case"flow":{o=`\`\`\`mermaid
${(s==null?void 0:s.flow)||`flowchart TD 
  Start --> Stop`}
\`\`\`
`,i=11,a=-5;break}case"sequence":{o=`\`\`\`mermaid
${(s==null?void 0:s.sequence)||`sequenceDiagram
  A->>B: hello!
  B-->>A: hi!
  A-)B: bye!`}
\`\`\`
`,i=11,a=-5;break}case"gantt":{o=`\`\`\`mermaid
${(s==null?void 0:s.gantt)||`gantt
title A Gantt Diagram
dateFormat  YYYY-MM-DD
section Section
A task  :a1, 2014-01-01, 30d
Another task  :after a1, 20d`}
\`\`\`
`,i=11,a=-5;break}case"class":{o=`\`\`\`mermaid
${(s==null?void 0:s.class)||`classDiagram
  class Animal
  Vehicle <|-- Car`}
\`\`\`
`,i=11,a=-5;break}case"state":{o=`\`\`\`mermaid
${(s==null?void 0:s.state)||`stateDiagram-v2
  s1 --> s2`}
\`\`\`
`,i=11,a=-5;break}case"pie":{o=`\`\`\`mermaid
${(s==null?void 0:s.pie)||`pie title Pets adopted by volunteers
  "Dogs" : 386
  "Cats" : 85
  "Rats" : 15`}
\`\`\`
`,i=11,a=-5;break}case"relationship":{o=`\`\`\`mermaid
${(s==null?void 0:s.relationship)||`erDiagram
  CAR ||--o{ NAMED-DRIVER : allows
  PERSON ||--o{ NAMED-DRIVER : is`}
\`\`\`
`,i=11,a=-5;break}case"journey":{o=`\`\`\`mermaid
${(s==null?void 0:s.journey)||`journey
  title My working day
  section Go to work
    Make tea: 5: Me
    Go upstairs: 3: Me
    Do work: 1: Me, Cat
  section Go home
    Go downstairs: 5: Me
    Sit down: 5: Me`}
\`\`\`
`,i=11,a=-5;break}case"katexInline":{o="$$",i=1,a=-1;break}case"katexBlock":{o=`$$

$$
`,i=3,a=-4;break}case"universal":{const{generate:c}=n,g=c(h);o=g.targetValue,u=g.select??!0,i=g.deviationStart||0,a=g.deviationEnd||0}}return{text:o,options:{select:u,deviationStart:i,deviationEnd:a,replaceAll:r}}},Mr="#e5c07b",Fl="var(--md-color)",Nr="#56b6c2",Pr="#ffffff",mt="var(--md-color)",Ol="#e5c07b",Dr="#e5c07b",Br="var(--md-color)",Hl="#d19a66",jr="#c678dd",Wr="#21252b",zr="#2c313a",Rl="var(--md-bk-color)",Yt="var(--md-bk-color)",Vr="#ceedfa33",Ml="#528bff",Ur=Be.theme({"&":{color:mt,backgroundColor:Rl},".cm-content":{caretColor:Ml},".cm-cursor, .cm-dropCursor":{borderLeftColor:Ml},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Vr},".cm-panels":{backgroundColor:Wr,color:mt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Rl,color:mt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:zr},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Yt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Yt,borderBottomColor:Yt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:mt}}},{dark:!0}),Gr=Kl.define([{tag:$.keyword,color:jr},{tag:[$.name,$.deleted,$.character,$.propertyName,$.macroName],color:Fl},{tag:[$.function($.variableName),$.labelName],color:Dr},{tag:[$.color,$.constant($.name),$.standard($.name)],color:Hl},{tag:[$.definition($.name),$.separator],color:mt},{tag:[$.typeName,$.className,$.number,$.changed,$.annotation,$.modifier,$.self,$.namespace],color:Mr},{tag:[$.operator,$.operatorKeyword,$.url,$.escape,$.regexp,$.link,$.special($.string)],color:Nr},{tag:[$.meta,$.comment],color:Ol},{tag:$.strong,fontWeight:"bold"},{tag:$.emphasis,fontStyle:"italic"},{tag:$.strikethrough,textDecoration:"line-through"},{tag:$.link,color:Ol,textDecoration:"underline"},{tag:$.heading,fontWeight:"bold",color:Fl},{tag:[$.atom,$.bool,$.special($.variableName)],color:Hl},{tag:[$.processingInstruction,$.string,$.inserted],color:Br},{tag:$.invalid,color:Pr}]),Nl=[Ur,Yl(Gr)],qr="#e5c07b",Pl="#3f4a54",Xr="#56b6c2",Kr="#fff",gt="#3f4a54",Dl="#2d8cf0",Yr="#2d8cf0",Zr="#3f4a54",Bl="#d19a66",Jr="#c678dd",Qr="#f6f6f6",es="#ceedfa33",jl="var(--md-bk-color)",Zt="var(--md-bk-color)",ts="#bad5fa",Wl="#3f4a54",ns=Be.theme({"&":{color:gt,backgroundColor:jl},".cm-content":{caretColor:Wl},".cm-cursor, .cm-dropCursor":{borderLeftColor:Wl},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:ts},".cm-panels":{backgroundColor:Qr,color:gt},".cm-panels.cm-panels-top":{borderBottom:"1px solid var(--md-border-color)"},".cm-panels.cm-panels-bottom":{borderTop:"1px solid var(--md-border-color)"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#ceedfa33"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:jl,color:gt,borderRight:"1px solid",borderColor:"var(--md-border-color)"},".cm-activeLineGutter":{backgroundColor:es},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"1px solid var(--md-border-color)",backgroundColor:Zt},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Zt,borderBottomColor:Zt},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{color:gt}}}),ls=Kl.define([{tag:$.keyword,color:Jr},{tag:[$.name,$.deleted,$.character,$.propertyName,$.macroName],color:Pl},{tag:[$.function($.variableName),$.labelName],color:Yr},{tag:[$.color,$.constant($.name),$.standard($.name)],color:Bl},{tag:[$.definition($.name),$.separator],color:gt},{tag:[$.typeName,$.className,$.number,$.changed,$.annotation,$.modifier,$.self,$.namespace],color:qr},{tag:[$.operator,$.operatorKeyword,$.url,$.escape,$.regexp,$.link,$.special($.string)],color:Xr},{tag:[$.meta,$.comment],color:Dl},{tag:$.strong,fontWeight:"bold"},{tag:$.emphasis,fontStyle:"italic"},{tag:$.strikethrough,textDecoration:"line-through"},{tag:$.link,color:Dl,textDecoration:"underline"},{tag:$.heading,fontWeight:"bold",color:Pl},{tag:[$.atom,$.bool,$.special($.variableName)],color:Bl},{tag:[$.processingInstruction,$.string,$.inserted],color:Zr},{tag:$.invalid,color:Kr}]),zl=[ns,Yl(ls)],xt=(e,t,n,l,o)=>(i,a,u,r)=>{const h=`${e}${t}`.slice(r-u);i.dispatch(i.state.replaceSelection(`${h}${n}${l}`));const s=u+a.label.length+(o==="title"?n.length:0);i.dispatch({selection:ot.create([ot.range(u+a.label.length+(o==="title"?1:-t.length),s),ot.cursor(s)],1)}),i.focus()},Vl=e=>(t,n,l,o)=>{const i=e.slice(o-l);t.dispatch(t.state.replaceSelection(`${i} `))},Ul=e=>{const t=n=>{const l=n.matchBefore(/^#+|^-\s*\[*\s*\]*|`+|\[|!\[*|^\|\s?\|?|\$\$?|!+\s*\w*/);return l===null||l.from==l.to&&n.explicit?null:{from:l.from,options:[...["h2","h3","h4","h5","h6"].map((o,i)=>{const a=new Array(i+2).fill("#").join("");return{label:a,type:"text",apply:Vl(a)}}),...["unchecked","checked"].map(o=>{const i=o==="checked"?"- [x]":"- [ ]";return{label:i,type:"text",apply:Vl(i)}}),...[["`",""],["```","language"],["```mermaid\n",""]].map(o=>({label:`${o[0]}${o[1]}`,type:"text",apply:xt(o[0],o[1],"",o[0]==="`"?"`":"\n```","type")})),{label:"[]()",type:"text"},{label:"![]()",type:"text"},{label:"| |",type:"text",detail:"table",apply:`| col | col | col |
| - | - | - |
| content | content | content |
| content | content | content |`},{label:"$",type:"text",apply:xt("$","","","$","type")},{label:"$$",type:"text",apply:xt("$$","",`
`,`
$$`,"title")},...["note","abstract","info","tip","success","question","warning","failure","danger","bug","example","quote","hint","caution","error","attention"].map(o=>({label:`!!! ${o}`,type:"text",apply:xt("!!!",` ${o}`," Title",`

!!!`,"title")}))]}};return qo({override:e?[t,...e]:[t]})},tt=e=>{const t=new nt;return l=>(t.get(e.state)?e.dispatch({effects:t.reconfigure(l)}):e.dispatch({effects:ei.appendConfig.of(t.of(l))}),!0)};class os{constructor(t){je(this,"view"),je(this,"maxLength",Number.MAX_SAFE_INTEGER),je(this,"toggleTabSize"),je(this,"togglePlaceholder"),je(this,"setExtensions"),je(this,"toggleDisabled"),je(this,"toggleReadOnly"),je(this,"toggleMaxlength"),this.view=t,this.toggleTabSize=tt(this.view),this.togglePlaceholder=tt(this.view),this.setExtensions=tt(this.view),this.toggleDisabled=tt(this.view),this.toggleReadOnly=tt(this.view),this.toggleMaxlength=tt(this.view)}getValue(){return this.view.state.doc.toString()}setValue(t,n=0,l=this.view.state.doc.length){this.view.dispatch({changes:{from:n,to:l,insert:t}})}getSelectedText(){const{from:t,to:n}=this.view.state.selection.main;return this.view.state.sliceDoc(t,n)}replaceSelectedText(t,n={select:!0,deviationStart:0,deviationEnd:0,replaceAll:!1},l){try{if(n.replaceAll){if(this.setValue(t),t.length>this.maxLength)throw new Error("The input text is too long");return}if(this.view.state.doc.length-this.getSelectedText().length+t.length>this.maxLength)throw new Error("The input text is too long");const{from:o}=this.view.state.selection.main;if(this.view.dispatch(this.view.state.replaceSelection(t)),n.select){const i=o+t.length+n.deviationEnd;this.view.dispatch({selection:{anchor:o+n.deviationStart,head:i}})}this.view.focus()}catch(o){if(o.message==="The input text is too long")x.emit(l,Je,{name:"overlength",message:o.message,data:t});else throw o}}setTabSize(t){this.toggleTabSize([qt.tabSize.of(t),Xo.of(" ".repeat(t))])}setPlaceholder(t){this.togglePlaceholder(Ko(t))}focus(t){if(this.view.focus(),!t)return;let n=0,l=0,o=0;switch(t){case"start":break;case"end":{n=l=o=this.getValue().length;break}default:n=t.rangeAnchor||t.cursorPos,l=t.rangeHead||t.cursorPos,o=t.cursorPos}this.view.dispatch({scrollIntoView:!0,selection:ot.create([ot.range(n,l),ot.cursor(o)],1)})}setDisabled(t){this.toggleDisabled([Be.editable.of(!t)])}setReadOnly(t){this.toggleReadOnly([qt.readOnly.of(t)])}setMaxLength(t){this.maxLength=t,this.toggleMaxlength([qt.changeFilter.of(n=>n.newDoc.length<=t)])}}const is=(e,t)=>{const n=O("editorId"),l=i=>{i instanceof Promise?i.then(a=>{x.emit(n,z,"universal",{generate(){return{targetValue:a}}})}).catch(a=>{console.error(a)}):x.emit(n,z,"universal",{generate(){return{targetValue:i}}})};return i=>{var a,u,r;if(!i.clipboardData)return;if(i.clipboardData.files.length>0){const{files:w}=i.clipboardData;x.emit(n,Wt,Array.from(w).filter(p=>/image\/.*/.test(p.type))),i.preventDefault();return}const h=i.clipboardData.getData("text/plain"),s=((a=t.value)==null?void 0:a.view.state.selection.main.to)||0,c=((u=t.value)==null?void 0:u.view.state.doc.lineAt(s).from)||0,g=((r=t.value)==null?void 0:r.view.state.doc.sliceString(c,s))||"",v=/!\[.*\]\(\s*$/.test(g),k=/!\[.*\]\((.*)\s?.*\)/.test(h);if(v){const w=e.transformImgUrl(h);l(w),i.preventDefault();return}else if(k){const w=h.match(new RegExp(`(?<=!\\[.*\\]\\()([^)\\s]+)(?=\\s?["']?.*["']?\\))`,"g"));w?Promise.all(w.map(p=>e.transformImgUrl(p))).then(p=>{l(p.reduce((b,y,T)=>b.replace(w[T],y),h))}):l(h),i.preventDefault();return}if(e.autoDetectCode&&i.clipboardData.types.includes("vscode-editor-data")){const w=JSON.parse(i.clipboardData.getData("vscode-editor-data"));x.emit(n,z,"code",{mode:w.mode,text:i.clipboardData.getData("text/plain")}),i.preventDefault();return}e.maxlength&&h.length+e.modelValue.length>e.maxlength&&x.emit(n,Je,{name:"overlength",message:"The input text is too long",data:h})}},as=(e,t)=>[{key:"Ctrl-b",mac:"Cmd-b",run:()=>(x.emit(e,z,"bold"),!0)},{key:"Ctrl-d",mac:"Cmd-d",run:ni,preventDefault:!0},{key:"Ctrl-s",mac:"Cmd-s",run:C=>(x.emit(e,jt,C.state.doc.toString()),!0),shift:()=>(x.emit(e,z,"strikeThrough"),!0)},{key:"Ctrl-u",mac:"Cmd-u",preventDefault:!0,run:()=>(x.emit(e,z,"underline"),!0),shift:()=>(x.emit(e,z,"unorderedList"),!0)},{key:"Ctrl-i",mac:"Cmd-i",preventDefault:!0,run:()=>(x.emit(e,z,"italic"),!0),shift:()=>(x.emit(e,ln,"image"),!0)},{key:"Ctrl-1",mac:"Cmd-1",run:()=>(x.emit(e,z,"h1"),!0)},{key:"Ctrl-2",mac:"Cmd-2",run:()=>(x.emit(e,z,"h2"),!0)},{key:"Ctrl-3",mac:"Cmd-3",run:()=>(x.emit(e,z,"h3"),!0)},{key:"Ctrl-4",mac:"Cmd-4",run:()=>(x.emit(e,z,"h4"),!0)},{key:"Ctrl-5",mac:"Cmd-5",run:()=>(x.emit(e,z,"h5"),!0)},{key:"Ctrl-6",mac:"Cmd-6",run:()=>(x.emit(e,z,"h6"),!0)},{key:"Ctrl-ArrowUp",mac:"Cmd-ArrowUp",run:()=>(x.emit(e,z,"sup"),!0)},{key:"Ctrl-ArrowDown",mac:"Cmd-ArrowDown",run:()=>(x.emit(e,z,"sub"),!0)},{key:"Ctrl-o",mac:"Cmd-o",run:()=>(x.emit(e,z,"orderedList"),!0)},{key:"Ctrl-c",mac:"Cmd-c",shift:()=>(x.emit(e,z,"code"),!0),any(C,S){return(S.ctrlKey||S.metaKey)&&S.altKey&&S.code==="KeyC"?(x.emit(e,z,"codeRow"),!0):!1}},{key:"Ctrl-l",mac:"Cmd-l",run:()=>(x.emit(e,ln,"link"),!0)},{key:"Ctrl-f",mac:"Cmd-f",shift:()=>t.noPrettier?!1:(x.emit(e,z,"prettier"),!0)},{any:(C,S)=>(S.ctrlKey||S.metaKey)&&S.altKey&&S.shiftKey&&S.code==="KeyT"?(x.emit(e,z,"table"),!0):!1},...ti];Be.EDIT_CONTEXT=!1;const rs=e=>{const t=O("tabWidth"),n=O("editorId"),l=O("theme"),o=j(),i=Ze(),a=j(!1),u=new nt,r=new nt,h=new nt,s=new nt,c=new nt,g=as(n,e),v=()=>[...g,...Yo,...Zo,Jo],w={paste:is(e,i),blur:e.onBlur,focus:e.onFocus,drop:e.onDrop,compositionstart:()=>{a.value=!0},compositionend:(y,T)=>{a.value=!1,e.updateModelValue(T.state.doc.toString())},input:y=>{e.onInput&&e.onInput(y);const{data:T}=y;e.maxlength&&e.modelValue.length+T.length>e.maxlength&&x.emit(n,Je,{name:"overlength",message:"The input text is too long",data:T})}},p=[Wo.of(v()),s.of(fl()),u.of(zo({codeLanguages:Qo})),Be.lineWrapping,Be.updateListener.of(y=>{y.docChanged&&(e.onChange(y.state.doc.toString()),a.value||e.updateModelValue(y.state.doc.toString()))}),c.of(Be.domEventHandlers(w)),Vo()],b=()=>{const y=[...p,r.of(l.value==="light"?zl:Nl),h.of(Ul(e.completions))];return ee.codeMirrorExtensions(l.value,y,v(),{editorId:n})};return te(()=>{const y=new Be({doc:e.modelValue,parent:o.value,extensions:[b()]}),T=new os(y);i.value=T,setTimeout(()=>{T.setTabSize(t),T.setDisabled(e.disabled),T.setReadOnly(e.readonly),e.placeholder&&T.setPlaceholder(e.placeholder),typeof e.maxlength=="number"&&T.setMaxLength(e.maxlength),e.autofocus&&y.focus()},0),x.on(n,{name:eo,callback(){Uo(y)}}),x.on(n,{name:to,callback(){Go(y)}}),x.on(n,{name:z,async callback(C,S={}){var A,M;if(C==="image"&&S.transform){const R=e.transformImgUrl(S.url);if(R instanceof Promise)R.then(async L=>{var N;const{text:V,options:W}=await Kt(C,i.value,{...S,url:L});(N=i.value)==null||N.replaceSelectedText(V,W,n)}).catch(L=>{console.error(L)});else{const{text:L,options:N}=await Kt(C,i.value,{...S,url:R});(A=i.value)==null||A.replaceSelectedText(L,N,n)}}else{const{text:R,options:L}=await Kt(C,i.value,S);(M=i.value)==null||M.replaceSelectedText(R,L,n)}}}),x.on(n,{name:lo,callback:Po(C=>{var S;const A={...w},M=Object.keys(w);for(const R in C){const L=R;M.includes(L)?A[L]=(N,V)=>{C[L](N,V),N.defaultPrevented||w[L](N,V)}:A[L]=C[L]}(S=i.value)==null||S.view.dispatch({effects:c.reconfigure(Be.domEventHandlers(A))})})}),x.on(n,{name:oo,callback:(C,S)=>{const A=y.state.doc.line(C);y.dispatch(y.state.update({changes:{from:A.from,to:A.to,insert:S}}))}})}),H(l,()=>{var y;(y=i.value)==null||y.view.dispatch({effects:r.reconfigure(l.value==="light"?zl:Nl)})},{deep:!0}),H(()=>e.completions,()=>{var y;(y=i.value)==null||y.view.dispatch({effects:h.reconfigure(Ul(e.completions))})},{deep:!0}),H(()=>e.modelValue,()=>{var y,T;((y=i.value)==null?void 0:y.getValue())!==e.modelValue&&((T=i.value)==null||T.setValue(e.modelValue))}),H(()=>e.placeholder,()=>{var y;(y=i.value)==null||y.setPlaceholder(e.placeholder)}),H(()=>e.disabled,()=>{var y;(y=i.value)==null||y.setDisabled(e.disabled)}),H(()=>e.readonly,()=>{var y;(y=i.value)==null||y.setDisabled(e.readonly)}),H(()=>e.maxlength,()=>{var y;e.maxlength&&((y=i.value)==null||y.setMaxLength(e.maxlength))}),{inputWrapperRef:o,codeMirrorUt:i,resetHistory(){var y,T;(y=i.value)==null||y.view.dispatch({effects:s.reconfigure([])}),(T=i.value)==null||T.view.dispatch({effects:s.reconfigure(fl())})}}},ss=(e,t,n)=>{const l=ve({resizedWidth:e.inputBoxWitdh}),o=ve({width:e.inputBoxWitdh}),i=ve({left:e.inputBoxWitdh,display:"initial"}),a=j(e.setting.preview||e.setting.htmlPreview),u=s=>{var c,g,v;const k=((c=t.value)==null?void 0:c.offsetWidth)||0,w=((g=t.value)==null?void 0:g.getBoundingClientRect().x)||0;let p=s.x-w;p<Ct?p=Ct:p>k-Ct&&(p=k-Ct);const b=`${p}px`;o.width=b,i.left=b,l.resizedWidth=b,(v=e.onInputBoxWitdhChange)==null||v.call(e,b)},r=()=>{document.addEventListener("mousemove",u)},h=()=>{document.removeEventListener("mousemove",u)};return H([n],()=>{var s,c;(s=n.value)==null||s.addEventListener("mousedown",r),(c=n.value)==null||c.addEventListener("mouseup",h)},{immediate:!0}),ut(()=>{var s,c;(s=n.value)==null||s.removeEventListener("mousedown",r),(c=n.value)==null||c.removeEventListener("mouseup",h)}),H(()=>e.inputBoxWitdh,s=>{s&&(l.resizedWidth=s,o.width=s,i.left=s)}),H([Ne(e.setting,"htmlPreview"),Ne(e.setting,"preview"),Ne(e.setting,"previewOnly")],()=>{e.setting.previewOnly?(o.width="0%",i.display="none",a.value=!0):!e.setting.htmlPreview&&!e.setting.preview?(o.width="100%",i.display="none",a.value=!1):(o.width=l.resizedWidth,i.display="initial",a.value=!0)},{immediate:!0}),{inputWrapperStyle:o,resizeOperateStyle:i,showPreviewWrapper:a}},cs=K({name:"MDEditorContent",props:ar,setup(e,t){const n=O("editorId"),l=j(""),o=j(),i=j(),{inputWrapperRef:a,codeMirrorUt:u,resetHistory:r}=rs(e),{inputWrapperStyle:h,resizeOperateStyle:s,showPreviewWrapper:c}=ss(e,o,i);return Rr(e,l,u),t.expose({getSelectedText(){var g;return(g=u.value)==null?void 0:g.getSelectedText()},focus(g){var v;(v=u.value)==null||v.focus(g)},resetHistory:r,getEditorView(){var g;return(g=u.value)==null?void 0:g.view}}),()=>m("div",{class:`${f}-content${c.value?" has-preview":""}`,ref:o},[m("div",{class:`${f}-input-wrapper`,style:h,ref:a},null),(e.setting.htmlPreview||e.setting.preview)&&m("div",{class:`${f}-resize-operate`,style:s,ref:i},null),c.value&&m(xo,{modelValue:e.modelValue,onChange:e.onChange,setting:e.setting,onHtmlChanged:g=>{l.value=g,e.onHtmlChanged(g)},onGetCatalog:e.onGetCatalog,mdHeadingId:e.mdHeadingId,noMermaid:e.noMermaid,sanitize:e.sanitize,noKatex:e.noKatex,formatCopiedText:e.formatCopiedText,noHighlight:e.noHighlight,noImgZoomIn:e.noImgZoomIn,sanitizeMermaid:e.sanitizeMermaid,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.catalogVisible&&m(pt,{theme:e.theme,class:`${f}-catalog-editor`,editorId:n,mdHeadingId:e.mdHeadingId,key:"internal-catalog",scrollElementOffsetTop:2},null)])}}),us=K({props:{modelValue:{type:String,default:""}},setup(e){const t=O("usedLanguageText");return()=>{var n,l;return m("div",{class:`${f}-footer-item`},[m("label",{class:`${f}-footer-label`},[`${(n=t.value.footer)==null?void 0:n.markdownTotal}:`]),m("span",null,[((l=e.modelValue)==null?void 0:l.length)||0])])}}}),ds={checked:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}}},fs=K({props:ds,setup(e){return()=>m("div",{class:[`${f}-checkbox`,e.checked&&`${f}-checkbox-checked`],onClick:()=>{e.onChange(!e.checked)}},null)}}),hs={scrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}}},ms=K({props:hs,setup(e){const t=O("usedLanguageText");return()=>{var n;return m("div",{class:`${f}-footer-item`},[m("label",{class:`${f}-footer-label`,onClick:()=>{e.onScrollAutoChange(!e.scrollAuto)}},[(n=t.value.footer)==null?void 0:n.scrollAuto]),m(fs,{checked:e.scrollAuto,onChange:e.onScrollAutoChange},null)])}}}),gs={modelValue:{type:String,default:""},footers:{type:Array,default:[]},scrollAuto:{type:Boolean},noScrollAuto:{type:Boolean},onScrollAutoChange:{type:Function,default:()=>{}},defFooters:{type:Object}},vs=K({name:"MDEditorFooter",props:gs,setup(e){const t=fe(()=>{const l=e.footers.indexOf("="),o=l===-1?e.footers:e.footers.slice(0,l),i=l===-1?[]:e.footers.slice(l,Number.MAX_SAFE_INTEGER);return[o,i]}),n=l=>{if(Jl.includes(l))switch(l){case"markdownTotal":return m(us,{modelValue:e.modelValue},null);case"scrollSwitch":return!e.noScrollAuto&&m(ms,{scrollAuto:e.scrollAuto,onScrollAutoChange:e.onScrollAutoChange},null)}else return e.defFooters instanceof Array?e.defFooters[l]||"":e.defFooters&&e.defFooters.children instanceof Array&&e.defFooters.children[l]||""};return()=>{const l=t.value[0].map(i=>n(i)),o=t.value[1].map(i=>n(i));return m("div",{class:`${f}-footer`},[m("div",{class:`${f}-footer-left`},[l]),m("div",{class:`${f}-footer-right`},[o])])}}}),Jt=K({name:"MdEditorV3",props:gr,emits:vr,setup(e,t){const{editorId:n,noKatex:l,noMermaid:o,noPrettier:i,noUploadImg:a,noHighlight:u}=e,r=ve({scrollAuto:e.scrollAuto}),h=j(),s=j();rr(e,t),sr(e,h),cr(e),ur(e,t);const[c,g]=dr(e,t),v=fr(e);return ut(()=>{x.clear(n)}),hr(e,t,v,c,g,s),()=>{const k=$e({props:e,ctx:t},"defToolbars"),w=$e({props:e,ctx:t},"defFooters");return m("div",{id:n,class:[f,e.class,e.theme==="dark"&&`${f}-dark`,c.fullscreen||c.pageFullscreen?`${f}-fullscreen`:""],style:e.style,ref:h},[e.toolbars.length>0&&m(Hr,{noPrettier:i,toolbars:e.toolbars,toolbarsExclude:e.toolbarsExclude,setting:c,updateSetting:g,tableShape:e.tableShape,defToolbars:k,noUploadImg:a,showToolbarName:e.showToolbarName,catalogVisible:v.value},null),m(cs,{ref:s,modelValue:e.modelValue,setting:c,mdHeadingId:e.mdHeadingId,noMermaid:o,noPrettier:i,sanitize:e.sanitize,placeholder:e.placeholder,noKatex:l,scrollAuto:r.scrollAuto,formatCopiedText:e.formatCopiedText,autofocus:e.autoFocus,disabled:e.disabled,readonly:e.readOnly,maxlength:e.maxLength,autoDetectCode:e.autoDetectCode,noHighlight:u,updateModelValue:p=>{t.emit("update:modelValue",p)},onChange:p=>{e.onChange&&e.onChange(p),t.emit("onChange",p)},onHtmlChanged:p=>{e.onHtmlChanged&&e.onHtmlChanged(p),t.emit("onHtmlChanged",p)},onGetCatalog:p=>{e.onGetCatalog&&e.onGetCatalog(p),t.emit("onGetCatalog",p)},onBlur:p=>{e.onBlur&&e.onBlur(p),t.emit("onBlur",p)},onFocus:p=>{e.onFocus&&e.onFocus(p),t.emit("onFocus",p)},onInput:p=>{e.onInput&&e.onInput(p),t.emit("onInput",p)},completions:e.completions,catalogVisible:v.value,theme:e.theme,noImgZoomIn:e.noImgZoomIn,onDrop:p=>{e.onDrop&&e.onDrop(p),t.emit("onDrop",p)},inputBoxWitdh:e.inputBoxWitdh,onInputBoxWitdhChange:p=>{e.onInputBoxWitdhChange&&e.onInputBoxWitdhChange(p),t.emit("onInputBoxWitdhChange",p)},sanitizeMermaid:e.sanitizeMermaid,transformImgUrl:e.transformImgUrl,codeFoldable:e.codeFoldable,autoFoldThreshold:e.autoFoldThreshold},null),e.footers.length>0&&m(vs,{modelValue:e.modelValue,footers:e.footers,defFooters:w,noScrollAuto:!c.preview&&!c.htmlPreview||c.previewOnly,scrollAuto:r.scrollAuto,onScrollAutoChange:p=>r.scrollAuto=p},null)])}}});Jt.install=e=>(e.component(Jt.name,Jt),e.use(Rt).use(_t).use(Mt).use(pt).use(Ht),e);const ps={onClick:{type:Function}},Qt=K({name:"NormalFooterToolbar",props:ps,emits:["onClick"],setup(e,t){return()=>{const n=$e({props:e,ctx:t});return m("div",{class:`${f}-footer-item`,onClick:l=>{e.onClick instanceof Function?e.onClick(l):t.emit("onClick",l)}},[n])}}});Qt.install=e=>(e.component(Qt.name,Qt),e);export{Jt as E,Ht as M};
