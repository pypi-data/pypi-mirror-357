(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[710],{9387:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/integrations",function(){return t(22406)}])},22406:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var i,o,l,r,a=t(24246),s=t(4454),c=t(27378),d=t(7617),u=t(62165),x=t(18225),h=t(77213),p=t(58754),g=t(14207),j=t(8133),C=t(66250),m=t(15987),f=t(75595),v=e=>{let{integrationType:n,onConfigure:t,onCancel:i}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{integration:null==n?void 0:n.placeholder,onConfigureClick:t}),null==n?void 0:n.overview,(0,a.jsxs)(s.kCb,{children:[(0,a.jsx)(s.LZC,{}),(0,a.jsx)(s.wpx,{onClick:i,children:"Cancel"})]})]})},_=t(25980);(i=l||(l={})).ALL="All",i.DATABASE="Database",i.DATA_CATALOG="Data Catalog",i.DATA_WAREHOUSE="Data Warehouse",i.IDENTITY_PROVIDER="Identity Provider",i.WEBSITE="Website",i.MANUAL="Manual";var y=e=>{var n;let{flags:t}=(0,u.Vb)(),i=Object.values(l).filter(e=>("Identity Provider"!==e||t.oktaMonitor)&&("Manual"!==e||t.alphaNewManualIntegration)),[o,r]=(0,c.useState)(0),a=i[o],[s,d]=(0,c.useState)(!1),x="All"!==a,h=null!==(n=null==e?void 0:e.filter(e=>!x||e.category===a))&&void 0!==n?n:[];return{tabs:i,tabIndex:o,anyFiltersApplied:x,isFiltering:s,onChangeFilter:e=>{d(!0),r(e),setTimeout(()=>d(!1),100)},filteredTypes:h}},b=e=>{let{onCancel:n,onDetailClick:t,onConfigureClick:i}=e,{tabIndex:o,onChangeFilter:l,isFiltering:r,filteredTypes:c,tabs:u}=y(C.FO),{flags:{oktaMonitor:h,alphaNewManualIntegration:p}}=(0,_.Vb)();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.mQc,{index:o,onChange:l,mb:4,children:(0,a.jsx)(s.tdY,{children:u.map(e=>(0,a.jsx)(d.q,{label:e},e))})}),r?(0,a.jsx)(x.Z,{}):(0,a.jsx)(s.kCb,{direction:"column",children:c.map(e=>(h||"okta"!==e.placeholder.connection_type)&&(p||"manual_webhook"!==e.placeholder.connection_type)?(0,a.jsx)(f.Z,{integration:e.placeholder,onConfigureClick:()=>i(e),otherButtons:(0,a.jsx)(s.wpx,{onClick:()=>t(e),children:"Details"})},e.placeholder.key):null)}),(0,a.jsxs)(s.kCb,{children:[(0,a.jsx)(s.LZC,{}),(0,a.jsx)(s.wpx,{onClick:n,children:"Cancel"})]})]})},A=t(64176);(o=r||(r={})).LIST_VIEW="list-view",o.DETAIL="detail",o.FORM="form";var k=e=>{let{isOpen:n,onClose:t}=e,[i,o]=(0,c.useState)("list-view"),[l,r]=(0,c.useState)(),s=(0,A.Z)(null==l?void 0:l.placeholder.connection_type),{description:d}=(0,C.ZP)(null==l?void 0:l.placeholder.connection_type),u=()=>{o("list-view"),r(void 0),t()},x=l?"".concat(l.placeholder.name," Integration"):"Add integration";return(0,a.jsxs)(j.Z,{size:"2xl",isOpen:n,onClose:u,title:x,children:["list-view"===i&&(0,a.jsx)(b,{onCancel:u,onDetailClick:e=>{o("detail"),r(e)},onConfigureClick:e=>{o("form"),r(e)}}),"detail"===i&&(0,a.jsx)(v,{integrationType:l,onConfigure:()=>o("form"),onCancel:u}),"form"===i&&(0,a.jsx)(m.Z,{connectionOption:s,onCancel:u,description:d})]})},w=t(86677),T=t(77830),I=t(29379),N=e=>{let{isFiltered:n,onOpenAddModal:t}=e;return(0,a.jsxs)(s.kCb,{direction:"column",alignItems:"center","data-testid":"empty-state",children:[(0,a.jsx)(s.xvT,{color:"gray.700",fontWeight:"semibold",fontSize:"md",children:"No integrations"}),(0,a.jsx)(s.xvT,{color:"gray.700",fontSize:"sm",marginTop:"8px",children:n?"No integrations match your filters":"You have not configured any integrations"}),(0,a.jsx)(s.xvT,{color:"gray.700",fontSize:"sm",children:'Click "Add integration" to connect and configure systems now.'}),(0,a.jsx)(s.wpx,{type:"primary",onClick:t,className:"mt-4",children:"Add integration"})]})},O=e=>{let{integrations:n,isFiltered:t,onOpenAddModal:i}=e,o=(0,w.useRouter)();return(0,a.jsx)(s.xuv,{marginTop:"24px",children:n.length?n.map(e=>{var n;let t=!(null===(n=(0,C.ZP)(e.connection_type).enabledFeatures)||void 0===n?void 0:n.includes(I.j.WITHOUT_CONNECTION));return(0,a.jsx)(f.Z,{integration:e,showTestNotice:t,configureButtonLabel:"Manage",onConfigureClick:()=>o.push("".concat(T.KH,"/").concat(e.key))},e.key)}):(0,a.jsx)(N,{onOpenAddModal:i,isFiltered:t})})},Z=t(40774),E=t(61317),S=()=>{let[e,n]=(0,c.useState)(1),[t,i]=(0,c.useState)(50),{flags:o}=(0,u.Vb)(),l=(0,c.useMemo)(()=>C.jq.filter(e=>e!==E.Rj.MANUAL_WEBHOOK||o.alphaNewManualIntegration),[o.alphaNewManualIntegration]),{data:r,isLoading:j}=(0,g.AZ)({connection_type:l,size:t,page:e}),{items:m,total:f}=null!=r?r:{},{onOpen:v,isOpen:_,onClose:b}=(0,s.qY0)(),{tabIndex:A,onChangeFilter:w,anyFiltersApplied:T,isFiltering:I,filteredTypes:N,tabs:S}=y(null==m?void 0:m.map(e=>(0,C.ZP)(e.connection_type))),M=(0,c.useMemo)(()=>{var e;return null!==(e=null==m?void 0:m.filter(e=>N.some(n=>n.placeholder.connection_type===e.connection_type)))&&void 0!==e?e:[]},[m,N]);return(0,a.jsxs)(h.Z,{title:"Integrations",children:[(0,a.jsx)(p.Z,{heading:"Integrations",breadcrumbItems:[{title:"All integrations"}],children:(0,a.jsx)(Z.Z,{})}),(0,a.jsxs)(s.xuv,{"data-testid":"integration-tabs",display:"flex",children:[(0,a.jsx)(s.mQc,{index:A,onChange:e=>{n(1),w(e)},w:"full",children:(0,a.jsx)(s.tdY,{children:S.map(e=>(0,a.jsx)(d.q,{label:e},e))})}),(0,a.jsx)(s.xuv,{borderBottom:"2px solid",borderColor:"gray.200",height:"fit-content",pr:"2",pb:"2",children:(0,a.jsx)(s.wpx,{onClick:v,"data-testid":"add-integration-btn",icon:(0,a.jsx)(s.xPt,{}),iconPosition:"end",children:"Add Integration"})})]}),j||I?(0,a.jsx)(x.Z,{}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(O,{integrations:M,onOpenAddModal:v,isFiltered:T}),!!f&&f>10&&(0,a.jsx)(s.B7X,{"data-testid":"pagination-controls",size:"small",total:f,pageSize:t,current:e,onChange:(e,t)=>{n(e),i(t)},showSizeChanger:!0})]}),(0,a.jsx)(k,{isOpen:_,onClose:b})]})}}},function(e){e.O(0,[8033,6060,2858,2866,9278,3662,641,7553,4481,6202,9033,2888,9774,179],function(){return e(e.s=9387)}),_N_E=e.O()}]);