(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6556],{80396:function(e,t,a){var n=a(79867),i=a(78859);e.exports=function(e,t,a,o){return i(e,t,a(n(e,t)),o)}},62079:function(e,t,a){var n=a(31137);e.exports=function(e){return"function"==typeof e?e:n}},30454:function(e,t,a){var n=a(40699);e.exports=function(e){return n(e,5)}},90271:function(e,t,a){var n=a(80396),i=a(62079);e.exports=function(e,t,a){return null==e?e:n(e,t,i(a))}},59972:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[datasetId]/[collectionName]",function(){return a(47355)}])},12627:function(e,t,a){"use strict";var n=a(24246),i=a(79283),o=a(34929);t.Z=e=>{let{selectedTaxonomies:t,showDisabled:a=!1,...l}=e,{getDataCategoryDisplayNameProps:s,getDataCategories:r}=(0,o.Z)(),d=(a?r():r().filter(e=>e.active)).filter(e=>!t.includes(e.fides_key)).map(e=>{let{name:t,primaryName:a}=s(e.fides_key);return{value:e.fides_key,name:t,primaryName:a,description:e.description||""}});return(0,n.jsx)(i.l,{options:d,...l})}},79283:function(e,t,a){"use strict";a.d(t,{l:function(){return r}});var n=a(24246),i=a(4454),o=a(72707),l=a.n(o);let s=e=>{let{data:t}=e;return(0,n.jsxs)(i.jqI,{gap:12,title:"".concat(t.primaryName||"").concat(t.primaryName?": ":"").concat(t.name," - ").concat(t.description),children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("strong",{children:t.primaryName||t.name}),t.primaryName&&": ".concat(t.name)]}),(0,n.jsx)("em",{children:t.description})]})},r=e=>{let{options:t,...a}=e,o=null==t?void 0:t.map(e=>({...e,className:l().option}));return(0,n.jsx)(i.WPr,{options:o,autoFocus:!0,variant:"borderless",optionRender:s,dropdownStyle:{minWidth:"500px"},className:"w-full p-0","data-testid":"taxonomy-select",...a})}},34929:function(e,t,a){"use strict";var n=a(24246),i=a(64925),o=a.n(i),l=a(27378),s=a(16134),r=a(30002),d=a(28079),c=a(57072);let u=()=>{let{isLoading:e}=(0,d.fd)(),t=(0,s.C)(d.U3),{isLoading:a}=(0,c.MO)(),n=(0,s.C)(c.qb),{isLoading:i}=(0,r.te)();return{dataUses:t,dataSubjects:(0,s.C)(r.ZL),dataCategories:n,isLoading:e||a||i}};t.Z=()=>{let{dataUses:e,dataCategories:t,dataSubjects:a,isLoading:i}=u(),s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.split(".").slice(0,t).join(".")},r=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=t(e);if(!n)return{};let i=t(s(e,a)),o=!!n.parent_key;return{name:n.name||void 0,primaryName:o&&(null==i?void 0:i.name)!==n.name&&(null==i?void 0:i.name)||void 0}},d=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,{name:i,primaryName:o}=r(e,t,a);return i?o?(0,n.jsxs)(l.Fragment,{children:[(0,n.jsxs)("strong",{children:[o,":"]})," ",i]},e):(0,n.jsx)("strong",{children:i},e):e},c=t=>o()(e,{fides_key:t}),m=e=>o()(t,{fides_key:e}),f=e=>o()(a,{fides_key:e});return{getDataUses:()=>e,getDataUseByKey:c,getDataUseDisplayName:e=>d(e,c,1),getDataUseDisplayNameProps:e=>r(e,c,1),getDataCategories:()=>t,getDataCategoryByKey:m,getDataCategoryDisplayName:e=>d(e,m,2),getDataCategoryDisplayNameProps:e=>r(e,m,2),getDataSubjects:()=>a,getDataSubjectByKey:f,getDataSubjectDisplayName:e=>{let t=f(e);return t?t.name:e},getPrimaryKey:s,isLoading:i}}},66112:function(e,t,a){"use strict";var n=a(24246),i=a(4454),o=a(27378),l=a(12627),s=a(34929),r=a(26183);t.Z=e=>{let{selectedTaxonomies:t,onAddTaxonomy:a,onRemoveTaxonomy:d}=e,[c,u]=(0,o.useState)(!1),{getDataCategoryDisplayName:m}=(0,s.Z)();return(0,n.jsxs)(r.Z,{children:[t.map(e=>(0,n.jsx)(i.j8w,{"data-testid":"classification-".concat(e),color:"white",closable:!0,onClose:()=>d(e),closeButtonLabel:"Remove category",children:m(e)},e)),(0,n.jsx)(i.j8w,{onClick:()=>u(!0),"data-testid":"add-category-btn",addable:!0,"aria-label":"Add category"}),c&&(0,n.jsx)(i.xuv,{className:"select-wrapper",position:"absolute",zIndex:10,top:"0",left:"0",width:"100%",height:"max",bgColor:"#fff",children:(0,n.jsx)(l.Z,{selectedTaxonomies:t,onChange:e=>{u(!1),a(e)},onBlur:()=>u(!1),open:c})})]})}},26183:function(e,t,a){"use strict";var n=a(24246);a(27378),t.Z=e=>{let{children:t,className:a,...i}=e;return(0,n.jsx)("div",{className:"relative flex w-full flex-wrap items-center gap-2 overflow-x-auto py-2 ".concat(a||""),...i,children:t})}},76252:function(e,t,a){"use strict";var n=a(24246),i=a(4454),o=a(30454),l=a.n(o),s=a(47215),r=a.n(s),d=a(90271),c=a.n(d),u=a(79806),m=a(20386),f=a(63927),p=a(69435);t.Z=e=>{let{field:t,isOpen:a,onClose:o,dataset:s,collectionName:d,subfields:x}=e,[g]=(0,m.TG)(),{isOpen:v,onOpen:h,onClose:j}=(0,i.qY0)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.ZP,{isOpen:a,onClose:o,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,n.jsx)(u.zR,{title:"Field Name: ".concat(null==t?void 0:t.name)}),footer:(0,n.jsx)(u.Gn,{onClose:o,onDelete:h,formId:f.e}),children:(0,n.jsx)(f.Z,{values:t,onSubmit:e=>{let a=(0,p.Fk)({dataset:s,collectionName:d,subfields:x?[...x,(null==t?void 0:t.name)||""]:[(null==t?void 0:t.name)||""]}),n={...t,...e},i=l()(s);r()(i,a,n),g(i),o()},dataType:"field"})}),(0,n.jsx)(i.cVQ,{isOpen:v,onClose:j,onConfirm:()=>{let e=(0,p.Fk)({dataset:s,collectionName:d,subfields:x}),a=l()(s);c()(a,e,e=>({...e,fields:e.fields.filter(e=>e.name!==(null==t?void 0:t.name))})),g(a),o(),j()},title:"Delete Field",message:(0,n.jsxs)(i.xvT,{children:["You are about to permanently delete the field named"," ",(0,n.jsx)(i.xvT,{color:"complimentary.500",as:"span",fontWeight:"bold",children:null==t?void 0:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})}},47355:function(e,t,a){"use strict";a.r(t);var n=a(24246),i=a(92222),o=a(59003),l=a(4454),s=a(86677),r=a(27378),d=a(77213),c=a(77830),u=a(58754),m=a(14481),f=a(66112),p=a(69828),x=a(41966),g=a(76252),v=a(69435);let h=(0,i.Cl)(),j=()=>(0,n.jsx)(l.gCW,{mt:6,p:10,spacing:4,borderRadius:"base",maxW:"70%","data-testid":"no-results-notice",alignSelf:"center",margin:"auto",textAlign:"center",children:(0,n.jsx)(l.gCW,{children:(0,n.jsx)(l.xvT,{fontSize:"md",fontWeight:"600",children:"No fields found."})})});t.default=()=>{let e=(0,s.useRouter)(),[t]=(0,x.TG)(),a=decodeURIComponent(e.query.datasetId),y=decodeURIComponent(e.query.collectionName),{isLoading:b,data:C}=(0,x.oM)(a),w=(0,r.useMemo)(()=>(null==C?void 0:C.collections)||[],[C]),_=w.find(e=>e.name===y),N=(0,r.useMemo)(()=>(null==_?void 0:_.fields)||[],[_]),[R,k]=(0,r.useState)(),D=(0,r.useCallback)(e=>{let{dataCategory:a,field:n}=e,i=n.data_categories||[],o={...n,data_categories:[...i,a]},l=w.indexOf(_),s=_.fields.indexOf(n);t((0,v._n)(C,o,l,s))},[_,w,C,t]),Z=(0,r.useCallback)(e=>{var a;let{dataCategory:n,field:i}=e,o={...i,data_categories:null===(a=i.data_categories)||void 0===a?void 0:a.filter(e=>e!==n)},l=w.indexOf(_),s=_.fields.indexOf(i);t((0,v._n)(C,o,l,s))},[_,w,C,t]),I=(0,r.useCallback)(t=>{e.push({pathname:c.y1,query:{datasetId:encodeURIComponent(a),collectionName:encodeURIComponent(y),subfieldNames:encodeURIComponent(t.name)}})},[a,e,y]),T=(0,r.useMemo)(()=>[h.accessor(e=>e.name,{id:"name",cell:e=>{var t;let a=e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0;return(0,n.jsx)(m.G3,{fontWeight:a?"semibold":"normal",value:e.getValue()})},header:e=>(0,n.jsx)(m.Rr,{value:"Field Name",...e}),size:180}),h.accessor(e=>{var t;return null===(t=e.fides_meta)||void 0===t?void 0:t.data_type},{id:"type",cell:e=>e.getValue()?(0,n.jsx)(m.A4,{value:e.getValue()}):(0,n.jsx)(m.G3,{value:void 0}),header:e=>(0,n.jsx)(m.Rr,{value:"Type",...e}),size:80}),h.accessor(e=>e.description,{id:"description",cell:e=>(0,n.jsx)(m.G3,{value:e.getValue(),cellProps:e}),header:e=>(0,n.jsx)(m.Rr,{value:"Description",...e}),size:300,meta:{showHeaderMenu:!0}}),h.accessor(e=>e.data_categories,{id:"data_categories",cell:e=>{var t;let a=e.row.original;return!(e.row.original.fields&&(null===(t=e.row.original.fields)||void 0===t?void 0:t.length)>0)&&(0,n.jsx)(f.Z,{selectedTaxonomies:e.getValue()||[],onAddTaxonomy:e=>D({dataCategory:e,field:a}),onRemoveTaxonomy:e=>Z({dataCategory:e,field:a})})},header:e=>(0,n.jsx)(m.Rr,{value:"Data categories",...e}),size:300,meta:{disableRowClick:!0}}),h.display({id:"actions",header:"Actions",cell:e=>{let{row:t}=e,a=t.original;return(0,n.jsx)(l.Ugi,{spacing:0,"data-testid":"field-".concat(a.name),children:(0,n.jsx)(l.wpx,{size:"small",icon:(0,n.jsx)(l.dY8,{}),onClick:()=>{z(a),M(!0)},children:"Edit"})})},meta:{disableRowClick:!0}})],[D,Z]),S=(0,r.useMemo)(()=>R?N.filter(e=>e.name.toLowerCase().includes(R.toLowerCase())):N,[N,R]),O=(0,o.b7)({getCoreRowModel:(0,i.sC)(),getFilteredRowModel:(0,i.vL)(),getSortedRowModel:(0,i.tj)(),columns:T,data:S,columnResizeMode:"onChange"}),[F,M]=(0,r.useState)(!1),[U,z]=(0,r.useState)(),L=(0,r.useMemo)(()=>[{title:"All datasets",href:c.$m},{title:a,href:{pathname:c.o5,query:{datasetId:a}},icon:p.Y[1]},{title:y,icon:p.Y[2]}],[a,y]);return(0,n.jsxs)(d.Z,{title:"Dataset - ".concat(a),children:[(0,n.jsx)(u.Z,{heading:"Datasets",breadcrumbItems:L}),b?(0,n.jsx)(m.I4,{rowHeight:36,numRows:15}):(0,n.jsxs)(l.xuv,{"data-testid":"fields-table",children:[(0,n.jsx)(m.Q$,{children:(0,n.jsx)(m.HO,{globalFilter:R,setGlobalFilter:k,placeholder:"Search",testid:"fields-search"})}),(0,n.jsx)(m.ZK,{tableInstance:O,emptyTableNotice:(0,n.jsx)(j,{}),onRowClick:I,getRowIsClickable:e=>{var t;return!!(e.fields&&(null===(t=e.fields)||void 0===t?void 0:t.length)>0)}}),(0,n.jsx)(g.Z,{isOpen:F,onClose:()=>{M(!1),z(void 0)},field:U,dataset:C,collectionName:y})]})]})}},72707:function(e){e.exports={option:"TaxonomySelect_option__vY6v2"}}},function(e){e.O(0,[8033,6060,2858,2866,9278,8702,7553,4481,5487,2888,9774,179],function(){return e(e.s=59972)}),_N_E=e.O()}]);