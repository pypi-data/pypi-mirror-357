"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7980],{58754:function(e,t,i){var l=i(24246),n=i(4454),r=i(70788);t.Z=e=>{let{heading:t,breadcrumbItems:i,isSticky:s=!0,children:a,rightContent:o,style:d,...u}=e;return(0,l.jsxs)("div",{...u,style:s?{position:"sticky",top:"-24px",paddingTop:"24px",paddingBottom:"24px",paddingLeft:"40px",marginLeft:"-40px",paddingRight:"40px",marginRight:"-40px",marginTop:"-24px",left:0,zIndex:20,backgroundColor:"white",...d}:{paddingBottom:"24px",...d},children:[(0,l.jsxs)(n.jqI,{justify:"space-between",children:["string"==typeof t?(0,l.jsx)(n.lQT,{className:i||a?"pb-4":void 0,level:1,"data-testid":"page-heading",children:t}):t,o&&(0,l.jsx)("div",{"data-testid":"page-header-right-content",children:o})]}),!!i&&(0,l.jsx)(r.m,{className:a?"pb-4":void 0,items:i,"data-testid":"page-breadcrumb"}),a]})}},94799:function(e,t,i){i.d(t,{k:function(){return r}});var l=i(76649);let n=e=>(0,l.Ln)({id:"string"},e),r=e=>(null!=e?e:[]).filter(n)},30320:function(e,t,i){i.d(t,{m:function(){return o}});var l=i(27378),n=i(25980),r=i(14047),s=i(32885),a=i(94799);let o=e=>{let{resourceFidesKey:t,resourceType:i}=e,{errorAlert:o}=(0,r.V)(),{plus:d}=(0,n.hz)(),u=(0,l.useMemo)(()=>null!=t?t:"",[]),c=(0,s.YU)(!0,{skip:!d}),p=(0,s.VN)(i,{skip:!d}),{data:x,isLoading:m,error:f,isError:h}=(0,s.PV)(null!=t?t:"",{skip:""!==u&&!(d&&u)}),[g]=(0,s._D)(),v=c.isLoading||p.isLoading||m,_=(0,l.useMemo)(()=>new Map((0,a.k)(c.data).map(e=>{var t;return[e.id,{...e,options:(null!==(t=e.allowed_values)&&void 0!==t?t:[]).map(e=>({value:e,label:e}))}]})),[c.data]),j=(0,l.useMemo)(()=>{var e;return null===(e=p.data)||void 0===e?void 0:e.filter(e=>e.active)},[p.data]),C=(0,l.useMemo)(()=>new Map((0,a.k)(j).map(e=>[e.id,e])),[j]),b=(0,l.useMemo)(()=>h&&(null==f?void 0:f.status)===404?new Map:new Map((0,a.k)(x).map(e=>[e.custom_field_definition_id,e])),[x,h,f]),T=(0,l.useMemo)(()=>{let e=[...C.keys()];return e.sort(),e},[C]),y=(0,l.useMemo)(()=>{let e={};return j&&b&&j.forEach(t=>{let i=b.get(t.id||"");i&&(t.allow_list_id&&"string[]"===t.field_type?e[i.custom_field_definition_id]=i.value:e[i.custom_field_definition_id]=i.value.toString())}),e},[j,b]),A=(0,l.useCallback)(async e=>{if(!d)return;let l="fides_key"in e&&""!==e.fides_key?e.fides_key:t;if(!l)return;let{customFieldValues:n}=e;if(!n||0===Object.keys(n).length)return;let r=[],s=[];T.forEach(e=>{let t=b.get(e),i=n[e];void 0===i||""===i||Array.isArray(i)&&0===i.length?(null==t?void 0:t.id)&&s.push(t.id):r.push({custom_field_definition_id:e,resource_id:l,id:null==t?void 0:t.id,value:i})});try{await g({resource_type:i,resource_id:l,upsert:r,delete:s})}catch(e){o("One or more custom fields have failed to save, please try again."),console.error(e)}},[d,b,o,t,T,g,i]);return{customFieldValues:y,definitionIdToCustomField:b,idToAllowListWithOptions:_,idToCustomFieldDefinition:C,isEnabled:d,isLoading:v,sortedCustomFieldDefinitionIds:T,upsertCustomFields:A}}},95346:function(e,t,i){i.d(t,{uc:function(){return g},Hn:function(){return o},Uv:function(){return s},C7:function(){return d},mZ:function(){return h.m}});var l,n,r,s,a=i(61317);(l=r||(r={}))[l.CREATE_CUSTOM_FIELDS=0]="CREATE_CUSTOM_FIELDS",l[l.CREATE_CUSTOM_LISTS=1]="CREATE_CUSTOM_LISTS",l[l.CHOOSE_FROM_LIBRARY=2]="CHOOSE_FROM_LIBRARY",a.AL.STRING,a.AL.STRING_,(n=s||(s={})).SINGLE_SELECT="singleSelect",n.MULTIPLE_SELECT="multipleSelect",n.OPEN_TEXT="openText";let o=[{label:"Single select",value:"singleSelect"},{label:"Multiple select",value:"multipleSelect"},{label:"Open Text",value:"openText"}],d=[{label:"taxonomy:".concat(a.P6.DATA_CATEGORY),value:a.P6.DATA_CATEGORY},{label:"taxonomy:".concat(a.P6.DATA_SUBJECT),value:a.P6.DATA_SUBJECT},{label:"taxonomy:".concat(a.P6.DATA_USE),value:a.P6.DATA_USE},{label:"".concat(a.P6.SYSTEM,":information"),value:a.P6.SYSTEM},{label:"system:data use",value:a.P6.PRIVACY_DECLARATION}];var u=i(24246),c=i(4454),p=i(34090),x=i(30234),m=i(97181),f=i(40324),h=i(30320);let g=e=>{let{resourceFidesKey:t,resourceType:i}=e,{idToAllowListWithOptions:l,idToCustomFieldDefinition:n,isEnabled:r,isLoading:s,sortedCustomFieldDefinitionIds:o}=(0,h.m)({resourceFidesKey:t,resourceType:i});return r&&0!==o.length?(0,u.jsx)(x.Z,{heading:"Custom fields",children:(0,u.jsx)(c.kCb,{flexDir:"column","data-testid":"custom-fields-list",children:(0,u.jsx)(c.kCb,{flexDir:"column",gap:"24px",children:s?(0,u.jsx)(c.M5Y,{children:(0,u.jsx)(c.$jN,{})}):o.length>0&&(0,u.jsx)(c.kCb,{flexDirection:"column",gap:"12px",paddingBottom:"24px",children:o.map(e=>{let t=n.get(e);if(!t)return null;let i="customFieldValues.".concat(t.id);if(!t.allow_list_id&&t.field_type===a.AL.STRING)return(0,u.jsx)(p.gN,{name:i,children:e=>{let{field:i}=e;return(0,u.jsx)(f.j0,{...i,label:t.name,tooltip:t.description,variant:"stacked"})}},e);let r=l.get(t.allow_list_id);if(!r)return null;let{options:s}=r;return(0,u.jsx)(m.d,{name:i,allowClear:!0,mode:t.field_type!==a.AL.STRING?"multiple":void 0,label:t.name,options:s,tooltip:t.description,layout:"stacked",className:"w-full"},e)})})})})}):null};i(94799)},14047:function(e,t,i){i.d(t,{H:function(){return r},V:function(){return l.V}});var l=i(84306),n=i(812);let r=()=>{let{errorAlert:e}=(0,l.V)();return{handleError:t=>{let i="An unexpected error occurred. Please try again.";(0,n.Ot)(t)?i=t.data.detail:(0,n.tB)(t)&&(i=t.data.detail[0].msg),e(i)}}}},84306:function(e,t,i){i.d(t,{V:function(){return r}});var l=i(24246),n=i(4454);let r=()=>{let e=(0,n.pmc)();return{errorAlert:(t,i,r)=>{let s={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,l.jsxs)(n.bZj,{alignItems:"normal",status:"error","data-testid":"error-alert",children:[(0,l.jsx)(n.zMQ,{}),(0,l.jsxs)(n.xuv,{children:[i&&(0,l.jsx)(n.CdC,{children:i}),(0,l.jsx)(n.XaZ,{children:t})]}),(0,l.jsx)(n.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,s):e(s)},successAlert:(t,i,r)=>{let s={...r,position:(null==r?void 0:r.position)||"top",render:e=>{let{onClose:r}=e;return(0,l.jsxs)(n.bZj,{alignItems:"normal",status:"success",variant:"subtle","data-testid":"success-alert",children:[(0,l.jsx)(n.zMQ,{}),(0,l.jsxs)(n.xuv,{children:[i&&(0,l.jsx)(n.CdC,{children:i}),(0,l.jsx)(n.XaZ,{children:t})]}),(0,l.jsx)(n.PZ7,{onClick:r,position:"relative",right:0,size:"sm",top:-1})]})}};(null==r?void 0:r.id)&&e.isActive(r.id)?e.update(r.id,s):e(s)}}}},70788:function(e,t,i){i.d(t,{m:function(){return d}});var l=i(24246),n=i(4454),r=i(79894),s=i.n(r),a=i(27378);let{Text:o}=n.AntTypography,d=e=>{let{items:t,...i}=e,r=(0,a.useMemo)(()=>null==t?void 0:t.map((e,i)=>{let r=i===t.length-1,a={...e},d=a.onClick&&!a.href;return("string"==typeof a.title&&(a.title=(0,l.jsx)(o,{style:{color:"inherit",maxWidth:r?void 0:400},ellipsis:!r,children:a.title})),d)?a.title=(0,l.jsx)(n.wpx,{type:"text",size:"small",icon:a.icon,onClick:a.onClick,className:"ant-breadcrumb-link -mt-px px-1 text-inherit",children:a.title}):(a.icon&&(a.title=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"anticon align-text-bottom",children:a.icon}),a.title]})),a.href&&a.title&&(a.title=(0,l.jsx)(s(),{href:a.href,className:"ant-breadcrumb-link",children:a.title}),delete a.href)),a}),[t]);return(0,l.jsx)(n.zrq,{items:r,...i})}},30234:function(e,t,i){var l=i(24246),n=i(4454);t.Z=e=>{let{heading:t,HeadingButton:i,children:r}=e;return(0,l.jsx)(n.Kqy,{spacing:4,children:(0,l.jsxs)(n.xuv,{maxWidth:"720px",border:"1px",borderColor:"gray.200",borderRadius:6,overflow:"visible",mt:6,children:[(0,l.jsxs)(n.xuv,{backgroundColor:"gray.50",px:6,py:4,display:"flex",flexDirection:"row",alignItems:"center",borderBottom:"1px",borderColor:"gray.200",borderTopRadius:6,children:[(0,l.jsx)(n.X6q,{as:"h3",size:"xs",children:t}),i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.LZC,{}),(0,l.jsx)(i,{})]}):null]}),(0,l.jsx)(n.Kqy,{spacing:4,px:6,py:6,children:r})]})})}}}]);