# Unit tests


## Coverage report

| Name                                               |    Stmts |     Miss |   Branch |   BrPart |   Cover |   Missing |
|--------------------------------------------------- | -------: | -------: | -------: | -------: | ------: | --------: |
| mcpgateway/\_\_init\_\_.py                         |        8 |        0 |        0 |        0 |    100% |           |
| mcpgateway/admin.py                                |      335 |       33 |        6 |        0 |     89% |168-172, 221-225, 258-259, 286-287, 400-401, 578-580, 651-652, 711-712, 770-778, 997-998, 1153-1154 |
| mcpgateway/cache/\_\_init\_\_.py                   |        3 |        0 |        0 |        0 |    100% |           |
| mcpgateway/cache/resource\_cache.py                |       56 |       27 |       10 |        2 |     47% |57-59, 63-64, 78-88, 102-103, 114, 118, 122-136 |
| mcpgateway/cache/session\_registry.py              |      416 |      304 |      138 |       28 |     26% |37-38, 44-45, 83, 86-93, 97, 99-101, 147-148, 152, 155->exit, 167->175, 171-172, 176-180, 191, 198-203, 207-223, 238, 248-278, 288, 293->297, 297->304, 300-301, 305-310, 313-328, 341, 347, 351-382, 398, 420, 425->exit, 429-506, 510-528, 532-598, 611-616, 623-625, 641-659, 685-761 |
| mcpgateway/cli.py                                  |       29 |        0 |       10 |        1 |     97% |    96->99 |
| mcpgateway/config.py                               |      189 |       59 |       36 |        6 |     62% |100, 103-104, 134, 137-138, 248, 263, 282, 286->exit, 290, 306-328, 348-387 |
| mcpgateway/db.py                                   |      351 |       98 |       32 |        2 |     67% |71, 81->90, 334, 357, 368, 380-384, 395-396, 407-408, 419-420, 431-433, 451, 517-531, 542, 553, 564, 576-579, 590-591, 602-603, 614-615, 626-628, 693-696, 707, 718, 729, 741-744, 755-756, 767-768, 779-780, 791-793, 838, 849, 860, 872-875, 886-887, 898-899, 910-911, 922-924, 1007-1013, 1029-1033, 1049-1055, 1090-1094 |
| mcpgateway/federation/\_\_init\_\_.py              |        4 |        0 |        0 |        0 |    100% |           |
| mcpgateway/federation/discovery.py                 |      176 |       93 |       40 |        6 |     44% |82-86, 123-147, 153-157, 160-164, 168-169, 172-174, 198-200, 226-228, 248, 255-257, 265, 282-297, 301-312, 316-328, 343-363, 367-380, 389-390 |
| mcpgateway/federation/forward.py                   |      122 |       50 |       38 |        9 |     53% |62, 68-73, 99-108, 129, 132, 148-149, 164-182, 209, 213, 218->222, 222->exit, 237, 240-246, 277, 292-305 |
| mcpgateway/federation/manager.py                   |      187 |       99 |       32 |        8 |     44% |84-107, 113-117, 120-124, 173-175, 191, 210-212, 229, 236-237, 254, 261-262, 279, 286-287, 307, 319, 322-323, 332-363, 372-393, 407-431, 445-449 |
| mcpgateway/handlers/\_\_init\_\_.py                |        2 |        0 |        0 |        0 |    100% |           |
| mcpgateway/handlers/sampling.py                    |       87 |       15 |       44 |       13 |     77% |48, 52, 79, 87, 92, 124->130, 125->124, 145, 162, 176, 185-187, 191-192, 208->213, 209->208, 214, 221-222 |
| mcpgateway/main.py                                 |      722 |      413 |       84 |       21 |     41% |189-215, 252-259, 295-296, 301, 307-309, 381-384, 397-400, 431-432, 459, 465-471, 484-495, 515-517, 533-535, 579-583, 607-613, 638-646, 671-677, 696-706, 725-743, 762-784, 810-812, 838-840, 866-868, 902-904, 924-935, 961-971, 996-1000, 1019-1024, 1049-1058, 1080-1083, 1108-1117, 1142, 1170-1177, 1198, 1201-1203, 1230-1236, 1255-1263, 1278-1279, 1307-1316, 1339-1340, 1366-1372, 1397-1398, 1419-1420, 1446-1452, 1468-1475, 1503-1516, 1537-1538, 1559-1570, 1586-1587, 1609-1610, 1626-1628, 1648-1649, 1668-1669, 1687-1689, 1705-1706, 1735-1736, 1738-1739, 1741, 1750-1751, 1753-1754, 1756-1757, 1759-1760, 1765, 1768, 1771, 1776-1780, 1786, 1807-1842, 1861-1878, 1897-1921, 1936-1940, 1958-1963, 1989-2006, 2026-2029, 2048-2051, 2081, 2097-2098, 2126-2141 |
| mcpgateway/schemas.py                              |      457 |       95 |       76 |       11 |     71% |127-130, 321-330, 380-389, 671, 693-695, 712-744, 782, 804-806, 823-855, 903-926, 1052, 1208-1211, 1212->1214, 1214->1216, 1216->1218 |
| mcpgateway/services/\_\_init\_\_.py                |        5 |        0 |        0 |        0 |    100% |           |
| mcpgateway/services/completion\_service.py         |       70 |        6 |       26 |        2 |     92% |44, 48-49, 77, 79, 83 |
| mcpgateway/services/gateway\_service.py            |      389 |      191 |      110 |       18 |     46% |43-45, 79, 114-117, 124, 132-146, 150-160, 246-247, 249-250, 267->270, 296, 299->310, 310->312, 312->314, 314->316, 316->319, 319->327, 324, 327->339, 336-337, 394, 397->429, 403-410, 423, 431-433, 442-453, 507, 541-552, 566-596, 607-626, 634-641, 656-732, 740-741, 748-805, 824-835, 844-854, 863-873, 882-887, 896-901, 910-911 |
| mcpgateway/services/logging\_service.py            |       55 |        5 |       10 |        0 |     92% |39-44, 122-123 |
| mcpgateway/services/prompt\_service.py             |      270 |       86 |       72 |       18 |     63% |60, 93, 97-98, 191-194, 217-218, 243->246, 270-276, 299, 304, 319-320, 341-345, 349->356, 357, 358->360, 360->363, 364-375, 406, 407->417, 413, 418-420, 437-448, 475, 483-490, 503-504, 537-541, 557-565, 567-575, 578->585, 594-604, 613-623, 632-637, 646-651, 660-665, 674-679, 688-689 |
| mcpgateway/services/resource\_service.py           |      302 |      196 |       84 |        7 |     30% |70, 99, 104-105, 117-142, 172, 177, 206-207, 230->233, 254-259, 276, 286, 308-332, 345-367, 376-391, 409-457, 476-477, 498-503, 519-536, 545-555, 564-574, 583-588, 597-607, 618-640, 654-655, 668-676, 693-715, 729-730, 743-744, 753-764, 773-783, 793-800, 820-825, 838-852, 870-871 |
| mcpgateway/services/root\_service.py               |       69 |        6 |       10 |        0 |     92% |50-51, 83-84, 175-176 |
| mcpgateway/services/server\_service.py             |      234 |       65 |       72 |       23 |     71% |53, 70, 74-75, 87-113, 132, 181->191, 184, 191->201, 194, 197, 201->211, 204, 207, 234-235, 251->253, 309->319, 319->321, 321->323, 323->327, 327->335, 331->329, 335->343, 339->337, 343->350, 347->345, 396, 398->409, 404, 423-425, 460-461, 469-476, 485-502, 511-528, 537-546, 555-564, 573-578, 591-605 |
| mcpgateway/services/tool\_service.py               |      321 |      136 |       84 |       21 |     55% |74, 104, 108-109, 122-150, 167-176, 205-206, 251->253, 271-277, 339, 340->350, 346, 351-353, 503-513, 518, 525, 527-528, 538-595, 624->633, 633->635, 635->637, 637->639, 640, 642, 644, 646, 648, 651-654, 675-686, 695-700, 709-714, 723-728, 736-743, 752-763, 772-777, 786-787, 798-802, 813-817, 825-832, 854-863 |
| mcpgateway/translate.py                            |      158 |       30 |       20 |        4 |     80% |118, 123->exit, 140, 169-201, 281, 298-310 |
| mcpgateway/transports/\_\_init\_\_.py              |        5 |        0 |        0 |        0 |    100% |           |
| mcpgateway/transports/base.py                      |       13 |        0 |        0 |        0 |    100% |           |
| mcpgateway/transports/sse\_transport.py            |       77 |       15 |       10 |        4 |     78% |52->exit, 73-75, 100, 110-113, 157->194, 177, 183-184, 190, 192, 220, 230 |
| mcpgateway/transports/stdio\_transport.py          |       55 |       17 |        8 |        1 |     71% |34-47, 51->54, 74-76, 101-105 |
| mcpgateway/transports/streamablehttp\_transport.py |      142 |       46 |       26 |        4 |     67% |135->132, 153-157, 173-183, 195-212, 227-228, 245-246, 252-253, 266-277, 305->309, 307->309 |
| mcpgateway/transports/websocket\_transport.py      |       71 |       16 |       16 |        5 |     74% |43->46, 50->57, 77-79, 91, 101-103, 118->134, 120-130, 132, 138->exit |
| mcpgateway/types.py                                |      211 |        1 |        2 |        1 |     99% |       532 |
| mcpgateway/utils/create\_jwt\_token.py             |       54 |        0 |       10 |        0 |    100% |           |
| mcpgateway/utils/services\_auth.py                 |       33 |        0 |        6 |        0 |    100% |           |
| mcpgateway/utils/verify\_credentials.py            |       45 |        1 |       12 |        2 |     95% |144, 179->182 |
| mcpgateway/validation/\_\_init\_\_.py              |        2 |        0 |        0 |        0 |    100% |           |
| mcpgateway/validation/jsonrpc.py                   |       58 |        9 |       34 |        9 |     80% |110, 114, 118, 125, 127, 133, 136, 139, 142 |
| mcpgateway/version.py                              |      126 |       89 |       16 |        0 |     26% |42-43, 49-51, 71, 81, 91-101, 114-120, 130-142, 174-210, 247-248, 295-296, 309-329, 342, 382-404 |
| mcpgateway/wrapper.py                              |      217 |       29 |       50 |        9 |     86% |68-69, 131, 209, 251, 292, 327->325, 336-338, 359, 407-408, 422-424, 444-446, 469->467, 478-480, 511-512, 525-527, 557-559 |
|                                          **TOTAL** | **6126** | **2230** | **1224** |  **235** | **60%** |           |
