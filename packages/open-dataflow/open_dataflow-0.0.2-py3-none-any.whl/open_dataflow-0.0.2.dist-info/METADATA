Metadata-Version: 2.4
Name: open-dataflow
Version: 0.0.2
Summary: Placeholder for open-dataflow.
Author-email: Hao Liang <hao.liang@stu.pku.edu.cn>, Xiaochen Ma <xiaochen.ma.cs@gmail.com>
License: Apache-2.0
Project-URL: Github, https://github.com/Open-DataFlow/DataFlow
Project-URL: Documentation, https://open-dataflow.github.io/DataFlow-Doc/
Project-URL: Bug Reports, https://github.com/Open-DataFlow/DataFlow/issues
Keywords: AI,artificial intelligence
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: Intended Audience :: Science/Research
Classifier: Topic :: Scientific/Engineering :: Artificial Intelligence
Classifier: License :: Free For Educational Use
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3 :: Only
Requires-Python: <4,>=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: av==12.3.0
Requires-Dist: datasets==2.21.0
Requires-Dist: decord==0.6.0
Requires-Dist: jsonargparse==4.32.0
Requires-Dist: numpy==1.26.4
Requires-Dist: opencv-python==4.10.0.84
Requires-Dist: scipy==1.13.1
Requires-Dist: torch
Requires-Dist: tqdm==4.66.5
Requires-Dist: transformers==4.52.4
Requires-Dist: colorlog==6.9.0
Requires-Dist: vllm==0.6.3
Requires-Dist: clickhouse_driver==0.2.9
Requires-Dist: aisuite==0.1.11
Requires-Dist: docstring_parser==0.16
Requires-Dist: math_verify==0.7.0
Requires-Dist: word2number==1.1
Requires-Dist: accelerate==1.7.0
Requires-Dist: rapidfuzz==3.13.0
Requires-Dist: tree-sitter==0.21.1
Requires-Dist: tree-sitter-languages==1.10.2
Requires-Dist: semgrep==1.124.0
Requires-Dist: colorlog
Requires-Dist: appdirs
Requires-Dist: modelscope
Dynamic: license-file

# DataFlow

<div align="center">
  <img src="./static/images/Face.jpg">


[![](https://img.shields.io/github/license/Open-DataFlow/DataFlow)](https://github.com/Open-DataFlow/DataFlow/blob/main/LICENSE)
[![](https://img.shields.io/github/stars/Open-DataFlow/DataFlow?style=social)](https://github.com/Open-DataFlow/DataFlow)
[![](https://img.shields.io/github/issues-raw/Open-DataFlow/DataFlow)](https://github.com/Open-DataFlow/DataFlow/issues)
[![](https://img.shields.io/github/last-commit/Open-DataFlow/DataFlow)](https://github.com/Open-DataFlow/DataFlow/commits/main/)
[![](https://img.shields.io/github/contributors/Open-DataFlow/DataFlow)](https://github.com/Open-DataFlow/DataFlow/graphs/contributors)

[ç®€ä½“ä¸­æ–‡](./README.zh-CN.md) | English


**[Features](#Features) â€¢ [Quick Start](#Quick_Start) â€¢ [Documentation](https://open-dataflow.github.io/DataFlow-Doc/) â€¢ [Experiments](#Experiments)**

</div>

## 1 News
- [2025-06-15] ðŸŽ‰ We release the dataflow-agentbot.
- [2025-06-10] ðŸŽ‰ We release the documentation of dataflow!
- [2025-06-01] ðŸŽ‰ Our new data-centric generation and evaluation system is now open-sourced â€” stay tuned for future updates!

## 2 Overview

  <img src="./static/images/dataflow_framework.jpg">

DataFlow is a data preparation system designed toÂ **process, generate and evaluate**Â high-quality data from noisy sources (PDF, plain-text, low-quality QA), thereby improving the performance of large language models (LLMs) in specific domains through targeted training (Pre-training, Supervised Fine-tuing, RL training) or RAG using knowledge base cleaning.Â **DataFlow has been empirically validated to improve domain-oriented LLM's performance in fields such as healthcare, finance, and law.**

Specifically, we constructing diverseÂ `operators`Â leveraging rule-based methods, deep learning models, LLMs, and LLM APIs. These operators are systematically integrated into distinctÂ `pipelines`, collectively forming the comprehensiveÂ `DataflowÂ system`. Additionally, we develop an intelligentÂ `Dataflow-agent`Â capable of dynamically assembling newÂ `pipelines`Â by recombining existingÂ `operators`Â on demand.



<!-- Text: è¾“å…¥æ˜¯çƒ‚æ•°æ® é€šè¿‡å¤§æ¨¡åž‹ è¾“å‡ºQA ï¼ˆä¸»è¦æ˜¯å¼ºåŒ–å­¦ä¹ ï¼‰
NL2SQL: åå‘æž„é€ SQL QA
Reasonningï¼šQuestionå¾ˆçŸ­ï¼Œæž„å»ºé•¿é“¾COT ï¼Œæ˜¯å¦æœ‰categoryï¼Œæ˜¯å¦æœ‰éš¾åº¦ï¼ˆé€šè¿‡å¤§æ¨¡åž‹ï¼‰
Agentic RAG: è¾“å…¥QAï¼Œå‡ºæ¥æ˜¯ QAã€‚æ²¡æœ‰é¢å¤–ä¿¡æ¯è§£å†³ä¸äº†ï¼Œå¿…é¡»è¦å¼•å…¥
Knowlege Base Cleaning: PDFï¼Œè¡¨æ ¼+doc textè¾“å…¥ï¼Œè¾“å‡ºæ˜¯é«˜è´¨é‡çŸ¥è¯†åº“
Dataflow-agent: ç”¨Agentè‡ªåŠ¨åˆæˆpipelineã€‚ç¼–æŽ’å·²æœ‰ç®—å­ã€‚ -->

## 3 Pipelines Functionality
### 3.1 Ready-to-Use PipeLines
Current Pipelines in Dataflow are as follows:
- **Text Pipeline**: Mine question-answer pairs from large-scale plain-text data (mostly crawed from InterNet) for use in SFT and RL training.
  - ![](./static/images/dataflow_text_pipeline.jpg)
  - [[HuggingFaceðŸ¤— demo input & output for **Text Pipeline**]](https://huggingface.co/datasets/Open-Dataflow/dataflow-demo-Text)
- **Reasoning Pipeline**: Enhances existing questionâ€“answer pairs with (1) extended chain-of-thought, (2) category classification, and (3) difficulty estimation.
  - ![](./static/images/dataflow_reasoning_pipeline.jpg)
  - [[HuggingFaceðŸ¤— demo input & output for **Reasoning Pipeline**]](https://huggingface.co/datasets/Open-Dataflow/dataflow-demo-Reasonning)
- **Text2SQL Pipeline**: Translates natural language questions into SQL queries, supplemented with explanations, chain-of-thought reasoning, and contextual schema information.
  - ![](./static/images/dataflow_text2sql_pipeline.jpg)
  - [[HuggingFaceðŸ¤— demo input & output for **Text2SQL Pipeline**]](https://huggingface.co/datasets/Open-Dataflow/dataflow-demo-Text2SQL)
- **Knowlege Base Cleaning Pipeline**: Extract and structure knowledge from unorganized sources like tables, PDFs, and Word documents into usable entries for downstream RAG or QA pair generation.
  - ![](./static/images/dataflow_KnowledgeBaseClean_pipeline.jpg)
- **Agentic RAG Pipeline**: Identify and extract QA pairs from existing QA datasets or knowledge bases that require external knowledge to answer, for use in downstream training of Agnetic RAG tasks.

### 3.2 Flexible Operator PipeLines
In this framework, operators are categorized into Fundamental Operators, Generic Operators, Domain-Specific Operators, and Evaluation Operators, etc., supporting data processing and evaluation functionalities. Please refer to the [documentation](https://open-dataflow.github.io/DataFlow-Doc/) for details.

### 3.3 Agent Guided Pipelines
<!-- Building on top of this, we also provide the -->
- **DataFlow Agent**: Can arrange existing `operators` and automatically construct new pipelines based on task requirements.
  - ![](./static/images/dataflow_agent_pipeline.jpg)
  - [[HuggingFaceðŸ¤— demo input & output for **DataFlow Agent**]](https://huggingface.co/datasets/Open-Dataflow/dataflow-demo-Agent)

<!-- ### 3.1 Text Pipeline
![](./static/images/demo_reasoning.png) -->

## 4 Quick Start
For environment setup and installation, please using the following commandsðŸ‘‡

```shell
conda create -n dataflow python=3.10
conda activate dataflow

git clone https://github.com/Open-DataFlow/DataFlow
cd DataFlow
pip install -e .
```

For **Quick-Start** and **Guide**, please visit or [Documentation](https://open-dataflow.github.io/DataFlow-Doc/).


## 5 Experimental Results
For Detailed Experiments setting, please visit 


### 5.1 Text PipeLine

#### 5.1.1 Pre-training data filter pipeline
The `pre-training data processing pipeline` was applied to randomly sampled data from the RedPajama dataset, resulting in a final data retention rate of 13.65%. The analysis results using `QuratingScorer` are shown in the figure. As can be seen, the filtered pretraining data significantly outperforms the original data across four scoring dimensions: writing style, requirement for expert knowledge, factual content, and educational value. This demonstrates the effectiveness of the DataFlow pretraining data processing.

![alt text](./static/images/text-pretrain.png)

#### 5.1.2 SFT data filter pipeline
We filted 3k record from `alpaca` dataset and compare it with radom selected 3k data from `alpaca` dataset by training it on Qwen2.5-7B. Results are:


![](./static/images/text-sft.png)
### 2. Reasoning Pipeline

We verify our reasoning pipeline by SFT on a Qwen2.5-32B-Instruct with Reasoning Pipeline synsthized data. We generated 1k and 5k SFT data pairs. Results are: 

![alt text](./static/images/reasoning_performance.png)



### 3. Text2SQL PipeLine
We fine-tuned the Qwen2.5-Coder-7B model on the Bird dataset using both Supervised Fine-tuning (SFT) and Reinforcement Learning (RL), with data constructed via the DataFlow-Text2SQL Pipeline. Results are:
![alt text](./static/images/text2sql.png)

<!-- ## Statistics
<a href="https://star-history.com/#Open-DataFlow/DataFlow&Date">
 <picture>
   <source media="(prefers-color-scheme: dark)" srcset="https://api.star-history.com/svg?repos=Open-DataFlow/DataFlow&type=Date&theme=dark" />
   <source media="(prefers-color-scheme: light)" srcset="https://api.star-history.com/svg?repos=Open-DataFlow/DataFlow&type=Date" />
   <img alt="Star History Chart" src="https://api.star-history.com/svg?repos=Open-DataFlow/DataFlow&type=Date" />
 </picture>
</a>
 -->
