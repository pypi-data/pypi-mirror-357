(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7198,9951,8414,9104],{13207:(e,t,r)=>{Promise.resolve().then(r.bind(r,63954))},63954:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(57437),n=r(2265),l=r(76817),s=r(37440),i=r(30597),o=r(55188),c=r(70482),d=r(82321);r(74590);var u=(0,r(58064).$)("0aeb6d65912eb7884fa9dbba1b577158e0b0d792");function f(e){let{artifactId:t,onClose:r}=e,[l,s]=(0,n.useState)(null),[i,f]=(0,n.useState)(!0),[m,h]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=async()=>{try{f(!0),h(null),console.log("Fetching artifact with ID:",t);let e=await u(t);if(console.log("Raw artifact response:",e),e&&(void 0!==e.data||void 0!==e.code||void 0!==e.image))console.log("Setting artifact data to:",e),s(e);else throw console.error("Invalid artifact data structure:",e),Error("Invalid artifact data structure received from server")}catch(e){h(e instanceof Error?e.message:"Failed to load artifact"),console.error("Error fetching artifact:",e)}finally{f(!1)}};t&&e()},[t]),(0,a.jsxs)("div",{className:"h-full flex flex-col bg-background border-l border-border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold",children:["Artifact: ",t]}),(0,a.jsx)(d.z,{variant:"ghost",size:"sm",onClick:r,className:"h-8 w-8 p-0",children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-auto p-4",children:[i&&(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"Loading artifact..."})}),m&&(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("div",{className:"text-red-500",children:m})}),!i&&!m&&l&&(l?(console.log("Artifact data:",l),(0,a.jsx)(c.ArtefactPage,{data:l.data,code:l.code,image:l.image})):(console.log("No artifact data available"),null)),!i&&!m&&!l&&(0,a.jsx)("div",{className:"flex items-center justify-center h-32",children:(0,a.jsx)("div",{className:"text-muted-foreground",children:"No artifact data found"})})]})]})}f.displayName="ArtefactPanel";var m=r(79951),h=r(47611);function p(){let[e,t]=(0,n.useState)(null),{messages:r,input:o,handleInputChange:c,handleSubmit:d,append:u,stop:p,isLoading:g,setMessages:v}=(0,l.RJ)({api:"/api/chat",body:{session_id:Math.random().toString(36).substring(2,15)}});return(0,a.jsx)("div",{className:"h-[90vh] w-full bg-background",children:(0,a.jsxs)("div",{className:"flex h-full",children:[(0,a.jsx)("div",{className:(0,s.cn)("flex h-full flex-col border-r transition-all duration-300",e?"w-1/2 border-border":"w-full border-transparent"),children:(0,a.jsx)("div",{className:"mx-auto flex h-full w-full max-w-4xl flex-col",children:(0,a.jsx)(m.Chat,{className:"grow",messages:r,handleSubmit:d,input:o,handleInputChange:c,isGenerating:g,stop:p,append:u,setMessages:v,transcribeAudio:i.K,suggestions:h.SZ.split(","),onArtifactClick:t})})}),e&&(0,a.jsx)("div",{className:"h-full w-1/2",children:(0,a.jsx)(f,{artifactId:e,onClose:()=>t(null)})})]})})}},89779:(e,t,r)=>{"use strict";r.d(t,{J:()=>a});let a={name:"YAAAF",url:"https://github.com/fractalego/yaaaf",ogImage:"",description:"YAAAF - Yet Another Agents Framework. A simple and extensible framework for building chatbots with LLMs.",links:{github:"https://github.com/fractalego/yaaaf",docs:"https://yaaaf.readthedocs.io/en/latest/"}}},37440:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var a=r(21738),n=r(93507);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m)((0,a.W)(t))}r(89779)},30597:(e,t,r)=>{"use strict";async function a(e){let t=new File([e],"recording.webm",{type:"audio/webm"}),r=new FormData;r.append("audio",t);let a=await fetch("/api/transcribe",{method:"POST",body:r});if(!a.ok)throw Error((await a.json()).error||"Failed to transcribe audio");return(await a.json()).text}r.d(t,{K:()=>a})},58064:(e,t,r)=>{"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return n}});let a=r(74590);function n(e){let{createServerReference:t}=r(6671);return t(e,a.callServer)}},70482:(e,t,r)=>{"use strict";r.d(t,{ArtefactPage:()=>n});var a=r(57437);function n(e){let t=e.data;t=(t=(t=(t=t.replaceAll('class="dataframe"',"")).replaceAll("text-align: right;","text-align: left;")).replaceAll("<table",'<table class="text-left text-sm font-light text-surface dark:text-white"')).replaceAll("<tr",'<tr class="border-b border-neutral-200 dark:border-white/10"');let r="";if(e.image){let a="data:image/png;charset=utf-8;base64,"+e.image;r='\n    <div class="flex">\n         <div class="m-5 align-baseline"><img alt="Image" src='.concat(a,' /></div>\n         <div class="m-5 align-baseline"><pre>').concat(e.code,'</pre></div>\n     </div>\n     <div class="columns-[70vw]">\n        <div class="m-5 align-baseline">').concat(t,"</div>\n     </div>\n    ")}else r='\n     <div class="flex">\n        <div class="m-5 align-baseline"><pre>'.concat(e.code,'</pre></div>\n     </div>\n     <div class="columns-[70vw]">\n        <div class="m-5 align-baseline">').concat(t,"</div>\n     </div>\n    ");return(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:r}})}r(2265),n.displayName="ArtefactPage"},98414:(e,t,r)=>{"use strict";r.r(t),r.d(t,{useAutoScroll:()=>n});var a=r(2265);function n(e){let t=(0,a.useRef)(null),r=(0,a.useRef)(null),[n,l]=(0,a.useState)(!0),s=()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)};return(0,a.useEffect)(()=>{t.current&&(r.current=t.current.scrollTop)},[]),(0,a.useEffect)(()=>{n&&s()},e),{containerRef:t,scrollToBottom:s,handleScroll:()=>{if(t.current){let{scrollTop:e,scrollHeight:a,clientHeight:n}=t.current,s=!!r.current&&e<r.current,i=r.current?r.current-e:0;s&&i>10?l(!1):l(50>Math.abs(a-e-n)),r.current=e}},shouldAutoScroll:n,handleTouchStart:()=>{l(!1)}}}},79951:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Chat:()=>p,ChatContainer:()=>v,ChatForm:()=>x,ChatMessages:()=>g});var a=r(57437),n=r(2265),l=r(28556),s=r(36871),i=r(16343),o=r(37440),c=r(98414),d=r(82321),u=r(49232),f=r(34929),m=r(84343),h=r(89104);function p(e){let{messages:t,handleSubmit:r,input:i,handleInputChange:o,stop:c,isGenerating:p,append:b,suggestions:j,className:w,onRateResponse:y,setMessages:N,transcribeAudio:C,onArtifactClick:A}=e,k=t.at(-1),S=0===t.length,I=(null==k?void 0:k.role)==="user",R=(0,n.useRef)(t);R.current=t;let T=(0,n.useCallback)(()=>{if(null==c||c(),!N)return;let e=[...R.current],t=e.findLast(e=>"assistant"===e.role);if(!t)return;let r=!1,a={...t};if(t.toolInvocations){let e=t.toolInvocations.map(e=>"call"===e.state?(r=!0,{...e,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}):e);r&&(a={...a,toolInvocations:e})}if(t.parts&&t.parts.length>0){let e=t.parts.map(e=>"tool-invocation"===e.type&&e.toolInvocation&&"call"===e.toolInvocation.state?(r=!0,{...e,toolInvocation:{...e.toolInvocation,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}}):e);r&&(a={...a,parts:e})}if(r){let r=e.findIndex(e=>e.id===t.id);-1!==r&&(e[r]=a,N(e))}},[c,N,R]),_=(0,n.useCallback)(e=>({actions:y?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"border-r pr-1",children:(0,a.jsx)(u.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),(0,a.jsx)(d.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>y(e.id,"thumbs-up"),children:(0,a.jsx)(l.Z,{className:"h-4 w-4"})}),(0,a.jsx)(d.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>y(e.id,"thumbs-down"),children:(0,a.jsx)(s.Z,{className:"h-4 w-4"})})]}):(0,a.jsx)(u.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),[y]);return(0,a.jsxs)(v,{className:w,children:[t.length>0?(0,a.jsx)(g,{messages:t,children:(0,a.jsx)(m.MessageList,{messages:t,isTyping:I,messageOptions:_,onArtifactClick:A})}):null,(0,a.jsx)(x,{className:"mt-auto",isPending:p||I,handleSubmit:r,children:e=>{let{files:t,setFiles:r}=e;return(0,a.jsx)(f.MessageInput,{value:i,onChange:o,allowAttachments:!0,files:t,setFiles:r,stop:T,isGenerating:p,transcribeAudio:C})}}),S&&b&&j?(0,a.jsx)(h.PromptSuggestions,{label:"Example queries ...",append:b,suggestions:j}):null]})}function g(e){let{messages:t,children:r}=e,{containerRef:n,scrollToBottom:l,handleScroll:s,shouldAutoScroll:o,handleTouchStart:u}=(0,c.useAutoScroll)([t]);return(0,a.jsxs)("div",{className:"grid grid-cols-1 overflow-y-auto pb-4",ref:n,onScroll:s,onTouchStart:u,children:[(0,a.jsx)("div",{className:"max-w-full [grid-column:1/1] [grid-row:1/1]",children:r}),!o&&(0,a.jsx)("div",{className:"pointer-events-none flex flex-1 items-end justify-end [grid-column:1/1] [grid-row:1/1]",children:(0,a.jsx)("div",{className:"sticky bottom-0 left-0 flex w-full justify-end",children:(0,a.jsx)(d.z,{onClick:l,className:"pointer-events-auto h-8 w-8 rounded-full ease-in-out animate-in fade-in-0 slide-in-from-bottom-1",size:"icon",variant:"ghost",children:(0,a.jsx)(i.Z,{className:"h-4 w-4"})})})})]})}p.displayName="Chat";let v=(0,n.forwardRef)((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,o.cn)("grid max-h-full w-full grid-rows-[1fr_auto]",r),...n})});v.displayName="ChatContainer";let x=(0,n.forwardRef)((e,t)=>{let{children:r,handleSubmit:l,isPending:s,className:i}=e,[o,c]=(0,n.useState)(null);return(0,a.jsx)("form",{ref:t,onSubmit:e=>{if(!o){l(e);return}l(e,{experimental_attachments:function(e){let t=new DataTransfer;for(let r of Array.from(e))t.items.add(r);return t.files}(o)}),c(null)},className:i,children:r({files:o,setFiles:c})})});x.displayName="ChatForm"},84343:(e,t,r)=>{"use strict";r.r(t),r.d(t,{MessageList:()=>s});var a=r(57437),n=r(48250),l=r(43303);function s(e){let{messages:t,showTimeStamps:r=!0,isTyping:s=!1,messageOptions:i,onArtifactClick:o}=e;return(0,a.jsxs)("div",{className:"space-y-4 overflow-visible",children:[t.map((e,t)=>{let l="function"==typeof i?i(e):i;return(0,a.jsx)(n.ChatMessage,{showTimeStamp:r,...e,...l,onArtifactClick:o},t)}),s&&(0,a.jsx)(l.TypingIndicator,{})]})}},89104:(e,t,r)=>{"use strict";r.r(t),r.d(t,{PromptSuggestions:()=>n});var a=r(57437);function n(e){let{label:t,append:r,suggestions:n}=e;return(0,a.jsxs)("div",{className:"space-y-6 pt-20",children:[(0,a.jsx)("h2",{className:"text-center text-2xl font-bold",children:t}),(0,a.jsx)("div",{className:"flex gap-6 text-sm",children:n.map(e=>(0,a.jsx)("button",{onClick:()=>r({role:"user",content:e}),className:"h-max flex-1 rounded-xl border bg-background p-4 hover:bg-muted",children:(0,a.jsx)("p",{children:e})},e))})]})}},43303:(e,t,r)=>{"use strict";r.r(t),r.d(t,{TypingIndicator:()=>l});var a=r(57437),n=r(47774);function l(){return(0,a.jsx)("div",{className:"justify-left flex space-x-1",children:(0,a.jsx)("div",{className:"rounded-lg bg-muted p-3",children:(0,a.jsxs)("div",{className:"flex -space-x-2.5",children:[(0,a.jsx)(n.Z,{className:"h-5 w-5 animate-typing-dot-bounce"}),(0,a.jsx)(n.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:90ms]"}),(0,a.jsx)(n.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:180ms]"})]})})})}},64719:(e,t,r)=>{"use strict";r.d(t,{Fw:()=>y,VY:()=>S,fC:()=>A,p_:()=>p,wy:()=>j,xz:()=>k});var a=r(2265),n=r(73558),l=r(98963),s=r(50436),i=r(79726),o=r(94985),c=r(49484),d=r(19286),u=r(16719),f=r(57437),m="Collapsible",[h,p]=(0,l.b)(m),[g,v]=h(m),x=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,open:n,defaultOpen:l,disabled:i,onOpenChange:o,...d}=e,[h,p]=(0,s.T)({prop:n,defaultProp:null!=l&&l,onChange:o,caller:m});return(0,f.jsx)(g,{scope:r,disabled:i,contentId:(0,u.M)(),open:h,onOpenToggle:a.useCallback(()=>p(e=>!e),[p]),children:(0,f.jsx)(c.WV.div,{"data-state":C(h),"data-disabled":i?"":void 0,...d,ref:t})})});x.displayName=m;var b="CollapsibleTrigger",j=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,...a}=e,l=v(b,r);return(0,f.jsx)(c.WV.button,{type:"button","aria-controls":l.contentId,"aria-expanded":l.open||!1,"data-state":C(l.open),"data-disabled":l.disabled?"":void 0,disabled:l.disabled,...a,ref:t,onClick:(0,n.M)(e.onClick,l.onOpenToggle)})});j.displayName=b;var w="CollapsibleContent",y=a.forwardRef((e,t)=>{let{forceMount:r,...a}=e,n=v(w,e.__scopeCollapsible);return(0,f.jsx)(d.z,{present:r||n.open,children:e=>{let{present:r}=e;return(0,f.jsx)(N,{...a,ref:t,present:r})}})});y.displayName=w;var N=a.forwardRef((e,t)=>{let{__scopeCollapsible:r,present:n,children:l,...s}=e,d=v(w,r),[u,m]=a.useState(n),h=a.useRef(null),p=(0,o.e)(t,h),g=a.useRef(0),x=g.current,b=a.useRef(0),j=b.current,y=d.open||u,N=a.useRef(y),A=a.useRef(void 0);return a.useEffect(()=>{let e=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,i.b)(()=>{let e=h.current;if(e){A.current=A.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();g.current=t.height,b.current=t.width,N.current||(e.style.transitionDuration=A.current.transitionDuration,e.style.animationName=A.current.animationName),m(n)}},[d.open,n]),(0,f.jsx)(c.WV.div,{"data-state":C(d.open),"data-disabled":d.disabled?"":void 0,id:d.contentId,hidden:!y,...s,ref:p,style:{"--radix-collapsible-content-height":x?"".concat(x,"px"):void 0,"--radix-collapsible-content-width":j?"".concat(j,"px"):void 0,...e.style},children:y&&l})});function C(e){return e?"open":"closed"}var A=x,k=j,S=y},16719:(e,t,r)=>{"use strict";r.d(t,{M:()=>o});var a,n=r(2265),l=r(79726),s=(a||(a=r.t(n,2)))[" useId ".trim().toString()]||(()=>void 0),i=0;function o(e){let[t,r]=n.useState(s());return(0,l.b)(()=>{e||r(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},50436:(e,t,r)=>{"use strict";r.d(t,{T:()=>i});var a,n=r(2265),l=r(79726),s=(a||(a=r.t(n,2)))[" useInsertionEffect ".trim().toString()]||l.b;function i({prop:e,defaultProp:t,onChange:r=()=>{},caller:a}){let[l,i,o]=function({defaultProp:e,onChange:t}){let[r,a]=n.useState(e),l=n.useRef(r),i=n.useRef(t);return s(()=>{i.current=t},[t]),n.useEffect(()=>{l.current!==r&&(i.current?.(r),l.current=r)},[r,l]),[r,a,i]}({defaultProp:t,onChange:r}),c=void 0!==e,d=c?e:l;{let t=n.useRef(void 0!==e);n.useEffect(()=>{let e=t.current;if(e!==c){let t=c?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=c},[c,a])}return[d,n.useCallback(t=>{if(c){let r="function"==typeof t?t(e):t;r!==e&&o.current?.(r)}else i(t)},[c,e,i,o])]}Symbol("RADIX:SYNC_STATE")},32222:(e,t,r)=>{"use strict";r.d(t,{j:()=>l});let a=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=function(){for(var e,t,r=0,a="",n=arguments.length;r<n;r++)(e=arguments[r])&&(t=function e(t){var r,a,n="";if("string"==typeof t||"number"==typeof t)n+=t;else if("object"==typeof t){if(Array.isArray(t)){var l=t.length;for(r=0;r<l;r++)t[r]&&(a=e(t[r]))&&(n&&(n+=" "),n+=a)}else for(a in t)t[a]&&(n&&(n+=" "),n+=a)}return n}(e))&&(a&&(a+=" "),a+=t);return a},l=(e,t)=>r=>{var l;if((null==t?void 0:t.variants)==null)return n(e,null==r?void 0:r.class,null==r?void 0:r.className);let{variants:s,defaultVariants:i}=t,o=Object.keys(s).map(e=>{let t=null==r?void 0:r[e],n=null==i?void 0:i[e];if(null===t)return null;let l=a(t)||a(n);return s[e][l]}),c=r&&Object.entries(r).reduce((e,t)=>{let[r,a]=t;return void 0===a||(e[r]=a),e},{});return n(e,o,null==t?void 0:null===(l=t.compoundVariants)||void 0===l?void 0:l.reduce((e,t)=>{let{class:r,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...i,...c}[t]):({...i,...c})[t]===r})?[...e,r,a]:e},[]),null==r?void 0:r.class,null==r?void 0:r.className)}},85666:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=(e,t)=>{let r=(0,a.forwardRef)((r,s)=>{let{color:i="currentColor",size:o=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:u="",children:f,...m}=r;return(0,a.createElement)("svg",{ref:s,...n,width:o,height:o,stroke:i,strokeWidth:d?24*Number(c)/Number(o):c,className:["lucide","lucide-".concat(l(e)),u].join(" "),...m},[...t.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(f)?f:[f]])});return r.displayName="".concat(e),r}},95855:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(85666).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[8218,6496,6129,1197,4500,6916,6817,2088,8250,4929,2971,7023,1744],()=>t(13207)),_N_E=e.O()}]);