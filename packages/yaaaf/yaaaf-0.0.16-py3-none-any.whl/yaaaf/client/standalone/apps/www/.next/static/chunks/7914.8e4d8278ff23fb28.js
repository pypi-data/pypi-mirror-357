"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7914,9951,8414,9104],{30597:(e,t,n)=>{n.d(t,{K:()=>s});async function s(e){let t=new File([e],"recording.webm",{type:"audio/webm"}),n=new FormData;n.append("audio",t);let s=await fetch("/api/transcribe",{method:"POST",body:n});if(!s.ok)throw Error((await s.json()).error||"Failed to transcribe audio");return(await s.json()).text}},77914:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var s=n(57437),a=n(2265),l=n(30597),r=n(79951),o=n(34929);function i(){let[e,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(!1),c=(0,a.useRef)(),u=()=>{c.current&&window.clearTimeout(c.current)},d=(e,t)=>{u();let n=window.setTimeout(e,t);c.current=n};return(0,s.jsx)(r.ChatForm,{className:"w-full max-w-[500px]",isPending:!1,handleSubmit:e=>{var n;null==e||null===(n=e.preventDefault)||void 0===n||n.call(e),t(""),i(!0),d(()=>{i(!1)},2e3)},children:a=>{let{files:r,setFiles:c}=a;return(0,s.jsx)(o.MessageInput,{value:e,onChange:e=>{t(e.target.value)},allowAttachments:!0,files:r,setFiles:c,stop:()=>{i(!1),u()},isGenerating:n,transcribeAudio:l.K})}})}},98414:(e,t,n)=>{n.r(t),n.d(t,{useAutoScroll:()=>a});var s=n(2265);function a(e){let t=(0,s.useRef)(null),n=(0,s.useRef)(null),[a,l]=(0,s.useState)(!0),r=()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)};return(0,s.useEffect)(()=>{t.current&&(n.current=t.current.scrollTop)},[]),(0,s.useEffect)(()=>{a&&r()},e),{containerRef:t,scrollToBottom:r,handleScroll:()=>{if(t.current){let{scrollTop:e,scrollHeight:s,clientHeight:a}=t.current,r=!!n.current&&e<n.current,o=n.current?n.current-e:0;r&&o>10?l(!1):l(50>Math.abs(s-e-a)),n.current=e}},shouldAutoScroll:a,handleTouchStart:()=>{l(!1)}}}},79951:(e,t,n)=>{n.r(t),n.d(t,{Chat:()=>p,ChatContainer:()=>g,ChatForm:()=>j,ChatMessages:()=>x});var s=n(57437),a=n(2265),l=n(28556),r=n(36871),o=n(16343),i=n(37440),c=n(98414),u=n(82321),d=n(49232),m=n(34929),f=n(84343),h=n(89104);function p(e){let{messages:t,handleSubmit:n,input:o,handleInputChange:i,stop:c,isGenerating:p,append:v,suggestions:w,className:b,onRateResponse:N,setMessages:y,transcribeAudio:C,onArtifactClick:S}=e,k=t.at(-1),T=0===t.length,I=(null==k?void 0:k.role)==="user",_=(0,a.useRef)(t);_.current=t;let A=(0,a.useCallback)(()=>{if(null==c||c(),!y)return;let e=[..._.current],t=e.findLast(e=>"assistant"===e.role);if(!t)return;let n=!1,s={...t};if(t.toolInvocations){let e=t.toolInvocations.map(e=>"call"===e.state?(n=!0,{...e,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}):e);n&&(s={...s,toolInvocations:e})}if(t.parts&&t.parts.length>0){let e=t.parts.map(e=>"tool-invocation"===e.type&&e.toolInvocation&&"call"===e.toolInvocation.state?(n=!0,{...e,toolInvocation:{...e.toolInvocation,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}}):e);n&&(s={...s,parts:e})}if(n){let n=e.findIndex(e=>e.id===t.id);-1!==n&&(e[n]=s,y(e))}},[c,y,_]),F=(0,a.useCallback)(e=>({actions:N?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"border-r pr-1",children:(0,s.jsx)(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),(0,s.jsx)(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>N(e.id,"thumbs-up"),children:(0,s.jsx)(l.Z,{className:"h-4 w-4"})}),(0,s.jsx)(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>N(e.id,"thumbs-down"),children:(0,s.jsx)(r.Z,{className:"h-4 w-4"})})]}):(0,s.jsx)(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),[N]);return(0,s.jsxs)(g,{className:b,children:[t.length>0?(0,s.jsx)(x,{messages:t,children:(0,s.jsx)(f.MessageList,{messages:t,isTyping:I,messageOptions:F,onArtifactClick:S})}):null,(0,s.jsx)(j,{className:"mt-auto",isPending:p||I,handleSubmit:n,children:e=>{let{files:t,setFiles:n}=e;return(0,s.jsx)(m.MessageInput,{value:o,onChange:i,allowAttachments:!0,files:t,setFiles:n,stop:A,isGenerating:p,transcribeAudio:C})}}),T&&v&&w?(0,s.jsx)(h.PromptSuggestions,{label:"Example queries ...",append:v,suggestions:w}):null]})}function x(e){let{messages:t,children:n}=e,{containerRef:a,scrollToBottom:l,handleScroll:r,shouldAutoScroll:i,handleTouchStart:d}=(0,c.useAutoScroll)([t]);return(0,s.jsxs)("div",{className:"grid grid-cols-1 overflow-y-auto pb-4",ref:a,onScroll:r,onTouchStart:d,children:[(0,s.jsx)("div",{className:"max-w-full [grid-column:1/1] [grid-row:1/1]",children:n}),!i&&(0,s.jsx)("div",{className:"pointer-events-none flex flex-1 items-end justify-end [grid-column:1/1] [grid-row:1/1]",children:(0,s.jsx)("div",{className:"sticky bottom-0 left-0 flex w-full justify-end",children:(0,s.jsx)(u.z,{onClick:l,className:"pointer-events-auto h-8 w-8 rounded-full ease-in-out animate-in fade-in-0 slide-in-from-bottom-1",size:"icon",variant:"ghost",children:(0,s.jsx)(o.Z,{className:"h-4 w-4"})})})})]})}p.displayName="Chat";let g=(0,a.forwardRef)((e,t)=>{let{className:n,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,i.cn)("grid max-h-full w-full grid-rows-[1fr_auto]",n),...a})});g.displayName="ChatContainer";let j=(0,a.forwardRef)((e,t)=>{let{children:n,handleSubmit:l,isPending:r,className:o}=e,[i,c]=(0,a.useState)(null);return(0,s.jsx)("form",{ref:t,onSubmit:e=>{if(!i){l(e);return}l(e,{experimental_attachments:function(e){let t=new DataTransfer;for(let n of Array.from(e))t.items.add(n);return t.files}(i)}),c(null)},className:o,children:n({files:i,setFiles:c})})});j.displayName="ChatForm"},84343:(e,t,n)=>{n.r(t),n.d(t,{MessageList:()=>r});var s=n(57437),a=n(48250),l=n(43303);function r(e){let{messages:t,showTimeStamps:n=!0,isTyping:r=!1,messageOptions:o,onArtifactClick:i}=e;return(0,s.jsxs)("div",{className:"space-y-4 overflow-visible",children:[t.map((e,t)=>{let l="function"==typeof o?o(e):o;return(0,s.jsx)(a.ChatMessage,{showTimeStamp:n,...e,...l,onArtifactClick:i},t)}),r&&(0,s.jsx)(l.TypingIndicator,{})]})}},89104:(e,t,n)=>{n.r(t),n.d(t,{PromptSuggestions:()=>a});var s=n(57437);function a(e){let{label:t,append:n,suggestions:a}=e;return(0,s.jsxs)("div",{className:"space-y-6 pt-20",children:[(0,s.jsx)("h2",{className:"text-center text-2xl font-bold",children:t}),(0,s.jsx)("div",{className:"flex gap-6 text-sm",children:a.map(e=>(0,s.jsx)("button",{onClick:()=>n({role:"user",content:e}),className:"h-max flex-1 rounded-xl border bg-background p-4 hover:bg-muted",children:(0,s.jsx)("p",{children:e})},e))})]})}},43303:(e,t,n)=>{n.r(t),n.d(t,{TypingIndicator:()=>l});var s=n(57437),a=n(47774);function l(){return(0,s.jsx)("div",{className:"justify-left flex space-x-1",children:(0,s.jsx)("div",{className:"rounded-lg bg-muted p-3",children:(0,s.jsxs)("div",{className:"flex -space-x-2.5",children:[(0,s.jsx)(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce"}),(0,s.jsx)(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:90ms]"}),(0,s.jsx)(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:180ms]"})]})})})}}}]);