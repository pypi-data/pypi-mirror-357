"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8250],{47611:(e,t,a)=>{a.d(t,{SZ:()=>l,ZX:()=>n});let s=a(20357).env.YAAAF_API_PORT||4e3;console.log("Using backend port as YAAAF_API_PORT=".concat(s));let n="<taskcompleted/>",l="who is the president,what is the capital of France,how to cook pasta,what is the weather today,how to learn programming";console.log("Using query suggestions as YAAAF_QUERY_SUGGESTIONS=".concat(l))},48250:(e,t,a)=>{a.r(t),a.d(t,{ChatMessage:()=>N});var s=a(57437),n=a(2265),l=a(32222),r=a(71636),i=a(85712),o=a(78169),c=a(49067),d=a(99118),m=a(76660),x=a(37440),u=a(64719);let p=u.fC,h=u.wy,f=u.Fw;var g=a(97585),j=a(72088),b=a(47611),v=a(7393).Buffer;let w=(0,l.j)("group/message relative break-words rounded-lg p-3 text-sm sm:max-w-[70%]",{variants:{isUser:{true:"bg-primary text-primary-foreground",false:"bg-muted text-foreground"},animation:{none:"",slide:"duration-300 animate-in fade-in-0",scale:"duration-300 animate-in fade-in-0 zoom-in-75",fade:"duration-500 animate-in fade-in-0"}},compoundVariants:[{isUser:!0,animation:"slide",class:"slide-in-from-right"},{isUser:!1,animation:"slide",class:"slide-in-from-left"},{isUser:!0,animation:"scale",class:"origin-bottom-right"},{isUser:!1,animation:"scale",class:"origin-bottom-left"}]}),N=e=>{let{role:t,content:a,createdAt:l,showTimeStamp:r=!1,animation:o="scale",actions:c,experimental_attachments:d,toolInvocations:m,parts:u,onArtifactClick:p}=e;console.log(a);let h=-1==a.indexOf(b.ZX),f=(0,n.useMemo)(()=>null==d?void 0:d.map(e=>{var t;return new File([function(e){let t=e.split(",")[1];return new Uint8Array(v.from(t,"base64"))}(e.url)],null!==(t=e.name)&&void 0!==t?t:"Unknown")}),[d]),N="user"===t,A=null==l?void 0:l.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return N?(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-col",N?"items-end":"items-start"),children:[f?(0,s.jsx)("div",{className:"mb-1 flex flex-wrap gap-2",children:f.map((e,t)=>(0,s.jsx)(g.FilePreview,{file:e},t))}):null,(0,s.jsx)("div",{className:(0,x.cn)(w({isUser:N,animation:o})),children:(0,s.jsx)(j.MarkdownRenderer,{onArtifactClick:p,children:a})}),r&&l?(0,s.jsx)("time",{dateTime:l.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==o&&"duration-500 animate-in fade-in-0"),children:A}):null]}):u&&u.length>0?u.map((e,a)=>{if("text"===e.type){let n=e.text;return n=(n=(n=n.replaceAll("<br/>","\n")).replaceAll("&quot;",'"')).replaceAll("&nbsp;&nbsp;&nbsp;&nbsp;","	"),(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-col",N?"items-end":"items-start"),children:[(0,s.jsxs)("div",{className:(0,x.cn)(w({isUser:N,animation:o})),children:[(0,s.jsx)(j.MarkdownRenderer,{onArtifactClick:p,children:n}),c?(0,s.jsx)("div",{className:"absolute -bottom-4 right-2 flex space-x-1 rounded-lg border bg-background p-1 text-foreground opacity-0 transition-opacity group-hover/message:opacity-100",children:c}):null,"assistant"==t&&h?(0,s.jsx)(i.Z,{className:"mt-5 h-5 w-5 animate-spin"}):null]}),r&&l?(0,s.jsx)("time",{dateTime:l.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==o&&"duration-500 animate-in fade-in-0"),children:A}):null]},"text-".concat(a))}return"reasoning"===e.type?(0,s.jsx)(y,{part:e},"reasoning-".concat(a)):"tool-invocation"===e.type?(0,s.jsx)(k,{toolInvocations:[e.toolInvocation]},"tool-".concat(a)):null}):m&&m.length>0?(0,s.jsx)(k,{toolInvocations:m}):(0,s.jsxs)("div",{className:(0,x.cn)("flex flex-col",N?"items-end":"items-start"),children:[(0,s.jsxs)("div",{className:(0,x.cn)(w({isUser:N,animation:o})),children:[(0,s.jsx)(j.MarkdownRenderer,{onArtifactClick:p,children:a}),c?(0,s.jsx)("div",{className:"absolute -bottom-4 right-2 flex space-x-1 rounded-lg border bg-background p-1 text-foreground opacity-0 transition-opacity group-hover/message:opacity-100",children:c}):null]}),r&&l?(0,s.jsx)("time",{dateTime:l.toISOString(),className:(0,x.cn)("mt-1 block px-1 text-xs opacity-50","none"!==o&&"duration-500 animate-in fade-in-0"),children:A}):null]})},y=e=>{let{part:t}=e,[a,l]=(0,n.useState)(!1);return(0,s.jsx)("div",{className:"mb-2 flex flex-col items-start sm:max-w-[70%]",children:(0,s.jsxs)(p,{open:a,onOpenChange:l,className:"group w-full overflow-hidden rounded-lg border bg-muted/50",children:[(0,s.jsx)("div",{className:"flex items-center p-2",children:(0,s.jsx)(h,{asChild:!0,children:(0,s.jsxs)("button",{className:"flex items-center gap-2 text-sm text-muted-foreground hover:text-foreground",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 transition-transform group-data-[state=open]:rotate-90"}),(0,s.jsx)("span",{children:"Thinking"})]})})}),(0,s.jsx)(f,{forceMount:!0,children:(0,s.jsx)(r.E.div,{initial:!1,animate:a?"open":"closed",variants:{open:{height:"auto",opacity:1},closed:{height:0,opacity:0}},transition:{duration:.3,ease:[.04,.62,.23,.98]},className:"border-t",children:(0,s.jsx)("div",{className:"p-2",children:(0,s.jsx)("div",{className:"whitespace-pre-wrap text-xs",children:t.reasoning})})})})]})})};function k(e){let{toolInvocations:t}=e;return(null==t?void 0:t.length)?(0,s.jsx)("div",{className:"flex flex-col items-start gap-2",children:t.map((e,t)=>{if("result"===e.state&&!0===e.result.__cancelled)return(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Cancelled"," ",(0,s.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]})]})]},t);switch(e.state){case"partial-call":case"call":return(0,s.jsxs)("div",{className:"flex items-center gap-2 rounded-lg border bg-muted/50 px-3 py-2 text-sm text-muted-foreground",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Calling"," ",(0,s.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]}),"..."]}),(0,s.jsx)(i.Z,{className:"h-3 w-3 animate-spin"})]},t);case"result":return(0,s.jsxs)("div",{className:"flex flex-col gap-1.5 rounded-lg border bg-muted/50 px-3 py-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(m.Z,{className:"h-4 w-4"}),(0,s.jsxs)("span",{children:["Result from"," ",(0,s.jsxs)("span",{className:"font-mono",children:["`",e.toolName,"`"]})]})]}),(0,s.jsx)("pre",{className:"overflow-x-auto whitespace-pre-wrap text-foreground",children:JSON.stringify(e.result,null,2)})]},t);default:return null}})}):null}},97585:(e,t,a)=>{a.r(t),a.d(t,{FilePreview:()=>o});var s=a(57437),n=a(2265),l=a(71636),r=a(55188),i=a(27069);let o=n.forwardRef((e,t)=>e.file.type.startsWith("image/")?(0,s.jsx)(c,{...e,ref:t}):e.file.type.startsWith("text/")||e.file.name.endsWith(".txt")||e.file.name.endsWith(".md")?(0,s.jsx)(d,{...e,ref:t}):(0,s.jsx)(m,{...e,ref:t}));o.displayName="FilePreview";let c=n.forwardRef((e,t)=>{let{file:a,onRemove:n}=e;return(0,s.jsxs)(l.E.div,{ref:t,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)("img",{alt:"Attachment ".concat(a.name),className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted object-cover",src:URL.createObjectURL(a)}),(0,s.jsx)("span",{className:"w-full truncate text-muted-foreground",children:a.name})]}),n?(0,s.jsx)("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:n,"aria-label":"Remove attachment",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5"})}):null]})});c.displayName="ImageFilePreview";let d=n.forwardRef((e,t)=>{let{file:a,onRemove:i}=e,[o,c]=n.useState("");return(0,n.useEffect)(()=>{let e=new FileReader;e.onload=e=>{var t;let a=null===(t=e.target)||void 0===t?void 0:t.result;c(a.slice(0,50)+(a.length>50?"...":""))},e.readAsText(a)},[a]),(0,s.jsxs)(l.E.div,{ref:t,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted p-0.5",children:(0,s.jsx)("div",{className:"h-full w-full overflow-hidden text-[6px] leading-none text-muted-foreground",children:o||"Loading..."})}),(0,s.jsx)("span",{className:"w-full truncate text-muted-foreground",children:a.name})]}),i?(0,s.jsx)("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:i,"aria-label":"Remove attachment",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5"})}):null]})});d.displayName="TextFilePreview";let m=n.forwardRef((e,t)=>{let{file:a,onRemove:n}=e;return(0,s.jsxs)(l.E.div,{ref:t,className:"relative flex max-w-[200px] rounded-md border p-1.5 pr-2 text-xs",layout:!0,initial:{opacity:0,y:"100%"},animate:{opacity:1,y:0},exit:{opacity:0,y:"100%"},children:[(0,s.jsxs)("div",{className:"flex w-full items-center space-x-2",children:[(0,s.jsx)("div",{className:"grid h-10 w-10 shrink-0 place-items-center rounded-sm border bg-muted",children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-foreground"})}),(0,s.jsx)("span",{className:"w-full truncate text-muted-foreground",children:a.name})]}),n?(0,s.jsx)("button",{className:"absolute -right-2 -top-2 flex h-4 w-4 items-center justify-center rounded-full border bg-background",type:"button",onClick:n,"aria-label":"Remove attachment",children:(0,s.jsx)(r.Z,{className:"h-2.5 w-2.5"})}):null]})});m.displayName="GenericFilePreview"}}]);