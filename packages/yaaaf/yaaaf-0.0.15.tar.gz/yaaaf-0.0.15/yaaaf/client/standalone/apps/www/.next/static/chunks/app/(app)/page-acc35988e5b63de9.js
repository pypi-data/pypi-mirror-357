(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7198,9951,8414,9104],{13207:(e,t,n)=>{Promise.resolve().then(n.bind(n,97877))},97877:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(57437),s=n(76817),a=n(37440),l=n(30597),o=n(79951),i=n(47611);function c(){let{messages:e,input:t,handleInputChange:n,handleSubmit:c,append:u,stop:d,isLoading:f,setMessages:m}=(0,s.RJ)({api:"/api/chat",body:{session_id:Math.random().toString(36).substring(2,15)}});return(0,r.jsx)("div",{className:"mx-auto grid h-[90vh] w-full max-w-4xl place-items-center bg-background",children:(0,r.jsx)("div",{className:(0,a.cn)("flex","flex-col","h-[80vh]","w-full","overflow-none"),children:(0,r.jsx)(o.Chat,{className:"grow",messages:e,handleSubmit:c,input:t,handleInputChange:n,isGenerating:f,stop:d,append:u,setMessages:m,transcribeAudio:l.K,suggestions:i.SZ.split(",")})})})}},89779:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});let r={name:"YAAF",url:"https://github.com/fractalego/yaaf",ogImage:"",description:"YAAF - Yet Another Agents Framework. A simple and extensible framework for building chatbots with LLMs.",links:{github:"https://github.com/fractalego/yaaf"}}},37440:(e,t,n)=>{"use strict";n.d(t,{cn:()=>a});var r=n(21738),s=n(93507);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m)((0,r.W)(t))}n(89779)},30597:(e,t,n)=>{"use strict";async function r(e){let t=new File([e],"recording.webm",{type:"audio/webm"}),n=new FormData;n.append("audio",t);let r=await fetch("/api/transcribe",{method:"POST",body:n});if(!r.ok)throw Error((await r.json()).error||"Failed to transcribe audio");return(await r.json()).text}n.d(t,{K:()=>r})},98414:(e,t,n)=>{"use strict";n.r(t),n.d(t,{useAutoScroll:()=>s});var r=n(2265);function s(e){let t=(0,r.useRef)(null),n=(0,r.useRef)(null),[s,a]=(0,r.useState)(!0),l=()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)};return(0,r.useEffect)(()=>{t.current&&(n.current=t.current.scrollTop)},[]),(0,r.useEffect)(()=>{s&&l()},e),{containerRef:t,scrollToBottom:l,handleScroll:()=>{if(t.current){let{scrollTop:e,scrollHeight:r,clientHeight:s}=t.current,l=!!n.current&&e<n.current,o=n.current?n.current-e:0;l&&o>10?a(!1):a(50>Math.abs(r-e-s)),n.current=e}},shouldAutoScroll:s,handleTouchStart:()=>{a(!1)}}}},79951:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Chat:()=>h,ChatContainer:()=>v,ChatForm:()=>x,ChatMessages:()=>g});var r=n(57437),s=n(2265),a=n(28556),l=n(36871),o=n(16343),i=n(37440),c=n(98414),u=n(82321),d=n(49232),f=n(34929),m=n(84343),p=n(89104);function h(e){let{messages:t,handleSubmit:n,input:o,handleInputChange:i,stop:c,isGenerating:h,append:b,suggestions:w,className:y,onRateResponse:j,setMessages:N,transcribeAudio:C}=e,k=t.at(-1),S=0===t.length,A=(null==k?void 0:k.role)==="user",R=(0,s.useRef)(t);R.current=t;let I=(0,s.useCallback)(()=>{if(null==c||c(),!N)return;let e=[...R.current],t=e.findLast(e=>"assistant"===e.role);if(!t)return;let n=!1,r={...t};if(t.toolInvocations){let e=t.toolInvocations.map(e=>"call"===e.state?(n=!0,{...e,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}):e);n&&(r={...r,toolInvocations:e})}if(t.parts&&t.parts.length>0){let e=t.parts.map(e=>"tool-invocation"===e.type&&e.toolInvocation&&"call"===e.toolInvocation.state?(n=!0,{...e,toolInvocation:{...e.toolInvocation,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}}):e);n&&(r={...r,parts:e})}if(n){let n=e.findIndex(e=>e.id===t.id);-1!==n&&(e[n]=r,N(e))}},[c,N,R]),T=(0,s.useCallback)(e=>({actions:j?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"border-r pr-1",children:(0,r.jsx)(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),(0,r.jsx)(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>j(e.id,"thumbs-up"),children:(0,r.jsx)(a.Z,{className:"h-4 w-4"})}),(0,r.jsx)(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>j(e.id,"thumbs-down"),children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})]}):(0,r.jsx)(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),[j]);return(0,r.jsxs)(v,{className:y,children:[t.length>0?(0,r.jsx)(g,{messages:t,children:(0,r.jsx)(m.MessageList,{messages:t,isTyping:A,messageOptions:T})}):null,(0,r.jsx)(x,{className:"mt-auto",isPending:h||A,handleSubmit:n,children:e=>{let{files:t,setFiles:n}=e;return(0,r.jsx)(f.MessageInput,{value:o,onChange:i,allowAttachments:!0,files:t,setFiles:n,stop:I,isGenerating:h,transcribeAudio:C})}}),S&&b&&w?(0,r.jsx)(p.PromptSuggestions,{label:"Example queries ...",append:b,suggestions:w}):null]})}function g(e){let{messages:t,children:n}=e,{containerRef:s,scrollToBottom:a,handleScroll:l,shouldAutoScroll:i,handleTouchStart:d}=(0,c.useAutoScroll)([t]);return(0,r.jsxs)("div",{className:"grid grid-cols-1 overflow-y-auto pb-4",ref:s,onScroll:l,onTouchStart:d,children:[(0,r.jsx)("div",{className:"max-w-full [grid-column:1/1] [grid-row:1/1]",children:n}),!i&&(0,r.jsx)("div",{className:"pointer-events-none flex flex-1 items-end justify-end [grid-column:1/1] [grid-row:1/1]",children:(0,r.jsx)("div",{className:"sticky bottom-0 left-0 flex w-full justify-end",children:(0,r.jsx)(u.z,{onClick:a,className:"pointer-events-auto h-8 w-8 rounded-full ease-in-out animate-in fade-in-0 slide-in-from-bottom-1",size:"icon",variant:"ghost",children:(0,r.jsx)(o.Z,{className:"h-4 w-4"})})})})]})}h.displayName="Chat";let v=(0,s.forwardRef)((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,i.cn)("grid max-h-full w-full grid-rows-[1fr_auto]",n),...s})});v.displayName="ChatContainer";let x=(0,s.forwardRef)((e,t)=>{let{children:n,handleSubmit:a,isPending:l,className:o}=e,[i,c]=(0,s.useState)(null);return(0,r.jsx)("form",{ref:t,onSubmit:e=>{if(!i){a(e);return}a(e,{experimental_attachments:function(e){let t=new DataTransfer;for(let n of Array.from(e))t.items.add(n);return t.files}(i)}),c(null)},className:o,children:n({files:i,setFiles:c})})});x.displayName="ChatForm"},84343:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MessageList:()=>l});var r=n(57437),s=n(48250),a=n(43303);function l(e){let{messages:t,showTimeStamps:n=!0,isTyping:l=!1,messageOptions:o}=e;return(0,r.jsxs)("div",{className:"space-y-4 overflow-visible",children:[t.map((e,t)=>{let a="function"==typeof o?o(e):o;return(0,r.jsx)(s.ChatMessage,{showTimeStamp:n,...e,...a},t)}),l&&(0,r.jsx)(a.TypingIndicator,{})]})}},89104:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PromptSuggestions:()=>s});var r=n(57437);function s(e){let{label:t,append:n,suggestions:s}=e;return(0,r.jsxs)("div",{className:"space-y-6 pt-20",children:[(0,r.jsx)("h2",{className:"text-center text-2xl font-bold",children:t}),(0,r.jsx)("div",{className:"flex gap-6 text-sm",children:s.map(e=>(0,r.jsx)("button",{onClick:()=>n({role:"user",content:e}),className:"h-max flex-1 rounded-xl border bg-background p-4 hover:bg-muted",children:(0,r.jsx)("p",{children:e})},e))})]})}},43303:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TypingIndicator:()=>a});var r=n(57437),s=n(47774);function a(){return(0,r.jsx)("div",{className:"justify-left flex space-x-1",children:(0,r.jsx)("div",{className:"rounded-lg bg-muted p-3",children:(0,r.jsxs)("div",{className:"flex -space-x-2.5",children:[(0,r.jsx)(s.Z,{className:"h-5 w-5 animate-typing-dot-bounce"}),(0,r.jsx)(s.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:90ms]"}),(0,r.jsx)(s.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:180ms]"})]})})})}},64719:(e,t,n)=>{"use strict";n.d(t,{Fw:()=>j,VY:()=>A,fC:()=>k,p_:()=>h,wy:()=>w,xz:()=>S});var r=n(2265),s=n(73558),a=n(98963),l=n(50436),o=n(79726),i=n(94985),c=n(49484),u=n(19286),d=n(16719),f=n(57437),m="Collapsible",[p,h]=(0,a.b)(m),[g,v]=p(m),x=r.forwardRef((e,t)=>{let{__scopeCollapsible:n,open:s,defaultOpen:a,disabled:o,onOpenChange:i,...u}=e,[p,h]=(0,l.T)({prop:s,defaultProp:null!=a&&a,onChange:i,caller:m});return(0,f.jsx)(g,{scope:n,disabled:o,contentId:(0,d.M)(),open:p,onOpenToggle:r.useCallback(()=>h(e=>!e),[h]),children:(0,f.jsx)(c.WV.div,{"data-state":C(p),"data-disabled":o?"":void 0,...u,ref:t})})});x.displayName=m;var b="CollapsibleTrigger",w=r.forwardRef((e,t)=>{let{__scopeCollapsible:n,...r}=e,a=v(b,n);return(0,f.jsx)(c.WV.button,{type:"button","aria-controls":a.contentId,"aria-expanded":a.open||!1,"data-state":C(a.open),"data-disabled":a.disabled?"":void 0,disabled:a.disabled,...r,ref:t,onClick:(0,s.M)(e.onClick,a.onOpenToggle)})});w.displayName=b;var y="CollapsibleContent",j=r.forwardRef((e,t)=>{let{forceMount:n,...r}=e,s=v(y,e.__scopeCollapsible);return(0,f.jsx)(u.z,{present:n||s.open,children:e=>{let{present:n}=e;return(0,f.jsx)(N,{...r,ref:t,present:n})}})});j.displayName=y;var N=r.forwardRef((e,t)=>{let{__scopeCollapsible:n,present:s,children:a,...l}=e,u=v(y,n),[d,m]=r.useState(s),p=r.useRef(null),h=(0,i.e)(t,p),g=r.useRef(0),x=g.current,b=r.useRef(0),w=b.current,j=u.open||d,N=r.useRef(j),k=r.useRef(void 0);return r.useEffect(()=>{let e=requestAnimationFrame(()=>N.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,o.b)(()=>{let e=p.current;if(e){k.current=k.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();g.current=t.height,b.current=t.width,N.current||(e.style.transitionDuration=k.current.transitionDuration,e.style.animationName=k.current.animationName),m(s)}},[u.open,s]),(0,f.jsx)(c.WV.div,{"data-state":C(u.open),"data-disabled":u.disabled?"":void 0,id:u.contentId,hidden:!j,...l,ref:h,style:{"--radix-collapsible-content-height":x?"".concat(x,"px"):void 0,"--radix-collapsible-content-width":w?"".concat(w,"px"):void 0,...e.style},children:j&&a})});function C(e){return e?"open":"closed"}var k=x,S=w,A=j},16719:(e,t,n)=>{"use strict";n.d(t,{M:()=>i});var r,s=n(2265),a=n(79726),l=(r||(r=n.t(s,2)))[" useId ".trim().toString()]||(()=>void 0),o=0;function i(e){let[t,n]=s.useState(l());return(0,a.b)(()=>{e||n(e=>e??String(o++))},[e]),e||(t?`radix-${t}`:"")}},50436:(e,t,n)=>{"use strict";n.d(t,{T:()=>o});var r,s=n(2265),a=n(79726),l=(r||(r=n.t(s,2)))[" useInsertionEffect ".trim().toString()]||a.b;function o({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){let[a,o,i]=function({defaultProp:e,onChange:t}){let[n,r]=s.useState(e),a=s.useRef(n),o=s.useRef(t);return l(()=>{o.current=t},[t]),s.useEffect(()=>{a.current!==n&&(o.current?.(n),a.current=n)},[n,a]),[n,r,o]}({defaultProp:t,onChange:n}),c=void 0!==e,u=c?e:a;{let t=s.useRef(void 0!==e);s.useEffect(()=>{let e=t.current;if(e!==c){let t=c?"controlled":"uncontrolled";console.warn(`${r} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}t.current=c},[c,r])}return[u,s.useCallback(t=>{if(c){let n="function"==typeof t?t(e):t;n!==e&&i.current?.(n)}else o(t)},[c,e,o,i])]}Symbol("RADIX:SYNC_STATE")},32222:(e,t,n)=>{"use strict";n.d(t,{j:()=>a});let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,s=function(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=function e(t){var n,r,s="";if("string"==typeof t||"number"==typeof t)s+=t;else if("object"==typeof t){if(Array.isArray(t)){var a=t.length;for(n=0;n<a;n++)t[n]&&(r=e(t[n]))&&(s&&(s+=" "),s+=r)}else for(r in t)t[r]&&(s&&(s+=" "),s+=r)}return s}(e))&&(r&&(r+=" "),r+=t);return r},a=(e,t)=>n=>{var a;if((null==t?void 0:t.variants)==null)return s(e,null==n?void 0:n.class,null==n?void 0:n.className);let{variants:l,defaultVariants:o}=t,i=Object.keys(l).map(e=>{let t=null==n?void 0:n[e],s=null==o?void 0:o[e];if(null===t)return null;let a=r(t)||r(s);return l[e][a]}),c=n&&Object.entries(n).reduce((e,t)=>{let[n,r]=t;return void 0===r||(e[n]=r),e},{});return s(e,i,null==t?void 0:null===(a=t.compoundVariants)||void 0===a?void 0:a.reduce((e,t)=>{let{class:n,className:r,...s}=t;return Object.entries(s).every(e=>{let[t,n]=e;return Array.isArray(n)?n.includes({...o,...c}[t]):({...o,...c})[t]===n})?[...e,n,r]:e},[]),null==n?void 0:n.class,null==n?void 0:n.className)}},85666:(e,t,n)=>{"use strict";n.d(t,{Z:()=>l});var r=n(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,t)=>{let n=(0,r.forwardRef)((n,l)=>{let{color:o="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:u,className:d="",children:f,...m}=n;return(0,r.createElement)("svg",{ref:l,...s,width:i,height:i,stroke:o,strokeWidth:u?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(a(e)),d].join(" "),...m},[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(f)?f:[f]])});return n.displayName="".concat(e),n}},95855:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});/**
 * @license lucide-react v0.359.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,n(85666).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])}},e=>{var t=t=>e(e.s=t);e.O(0,[8218,6496,6129,1197,4500,6916,6817,2088,8250,4929,2971,7023,1744],()=>t(13207)),_N_E=e.O()}]);