"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9951,8414,9104],{98414:(e,t,s)=>{s.r(t),s.d(t,{useAutoScroll:()=>a});var n=s(2265);function a(e){let t=(0,n.useRef)(null),s=(0,n.useRef)(null),[a,l]=(0,n.useState)(!0),r=()=>{t.current&&(t.current.scrollTop=t.current.scrollHeight)};return(0,n.useEffect)(()=>{t.current&&(s.current=t.current.scrollTop)},[]),(0,n.useEffect)(()=>{a&&r()},e),{containerRef:t,scrollToBottom:r,handleScroll:()=>{if(t.current){let{scrollTop:e,scrollHeight:n,clientHeight:a}=t.current,r=!!s.current&&e<s.current,o=s.current?s.current-e:0;r&&o>10?l(!1):l(50>Math.abs(n-e-a)),s.current=e}},shouldAutoScroll:a,handleTouchStart:()=>{l(!1)}}}},79951:(e,t,s)=>{s.r(t),s.d(t,{Chat:()=>p,ChatContainer:()=>g,ChatForm:()=>j,ChatMessages:()=>x});var n=s(57437),a=s(2265),l=s(28556),r=s(36871),o=s(16343),i=s(37440),c=s(98414),u=s(82321),d=s(49232),m=s(34929),f=s(84343),h=s(89104);function p(e){let{messages:t,handleSubmit:s,input:o,handleInputChange:i,stop:c,isGenerating:p,append:v,suggestions:N,className:b,onRateResponse:w,setMessages:y,transcribeAudio:C,onArtifactClick:k}=e,S=t.at(-1),I=0===t.length,T=(null==S?void 0:S.role)==="user",_=(0,a.useRef)(t);_.current=t;let M=(0,a.useCallback)(()=>{if(null==c||c(),!y)return;let e=[..._.current],t=e.findLast(e=>"assistant"===e.role);if(!t)return;let s=!1,n={...t};if(t.toolInvocations){let e=t.toolInvocations.map(e=>"call"===e.state?(s=!0,{...e,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}):e);s&&(n={...n,toolInvocations:e})}if(t.parts&&t.parts.length>0){let e=t.parts.map(e=>"tool-invocation"===e.type&&e.toolInvocation&&"call"===e.toolInvocation.state?(s=!0,{...e,toolInvocation:{...e.toolInvocation,state:"result",result:{content:"Tool execution was cancelled",__cancelled:!0}}}):e);s&&(n={...n,parts:e})}if(s){let s=e.findIndex(e=>e.id===t.id);-1!==s&&(e[s]=n,y(e))}},[c,y,_]),A=(0,a.useCallback)(e=>({actions:w?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"border-r pr-1",children:(0,n.jsx)(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),(0,n.jsx)(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>w(e.id,"thumbs-up"),children:(0,n.jsx)(l.Z,{className:"h-4 w-4"})}),(0,n.jsx)(u.z,{size:"icon",variant:"ghost",className:"h-6 w-6",onClick:()=>w(e.id,"thumbs-down"),children:(0,n.jsx)(r.Z,{className:"h-4 w-4"})})]}):(0,n.jsx)(d.CopyButton,{content:e.content,copyMessage:"Copied response to clipboard!"})}),[w]);return(0,n.jsxs)(g,{className:b,children:[t.length>0?(0,n.jsx)(x,{messages:t,children:(0,n.jsx)(f.MessageList,{messages:t,isTyping:T,messageOptions:A,onArtifactClick:k})}):null,(0,n.jsx)(j,{className:"mt-auto",isPending:p||T,handleSubmit:s,children:e=>{let{files:t,setFiles:s}=e;return(0,n.jsx)(m.MessageInput,{value:o,onChange:i,allowAttachments:!0,files:t,setFiles:s,stop:M,isGenerating:p,transcribeAudio:C})}}),I&&v&&N?(0,n.jsx)(h.PromptSuggestions,{label:"Example queries ...",append:v,suggestions:N}):null]})}function x(e){let{messages:t,children:s}=e,{containerRef:a,scrollToBottom:l,handleScroll:r,shouldAutoScroll:i,handleTouchStart:d}=(0,c.useAutoScroll)([t]);return(0,n.jsxs)("div",{className:"grid grid-cols-1 overflow-y-auto pb-4",ref:a,onScroll:r,onTouchStart:d,children:[(0,n.jsx)("div",{className:"max-w-full [grid-column:1/1] [grid-row:1/1]",children:s}),!i&&(0,n.jsx)("div",{className:"pointer-events-none flex flex-1 items-end justify-end [grid-column:1/1] [grid-row:1/1]",children:(0,n.jsx)("div",{className:"sticky bottom-0 left-0 flex w-full justify-end",children:(0,n.jsx)(u.z,{onClick:l,className:"pointer-events-auto h-8 w-8 rounded-full ease-in-out animate-in fade-in-0 slide-in-from-bottom-1",size:"icon",variant:"ghost",children:(0,n.jsx)(o.Z,{className:"h-4 w-4"})})})})]})}p.displayName="Chat";let g=(0,a.forwardRef)((e,t)=>{let{className:s,...a}=e;return(0,n.jsx)("div",{ref:t,className:(0,i.cn)("grid max-h-full w-full grid-rows-[1fr_auto]",s),...a})});g.displayName="ChatContainer";let j=(0,a.forwardRef)((e,t)=>{let{children:s,handleSubmit:l,isPending:r,className:o}=e,[i,c]=(0,a.useState)(null);return(0,n.jsx)("form",{ref:t,onSubmit:e=>{if(!i){l(e);return}l(e,{experimental_attachments:function(e){let t=new DataTransfer;for(let s of Array.from(e))t.items.add(s);return t.files}(i)}),c(null)},className:o,children:s({files:i,setFiles:c})})});j.displayName="ChatForm"},84343:(e,t,s)=>{s.r(t),s.d(t,{MessageList:()=>r});var n=s(57437),a=s(48250),l=s(43303);function r(e){let{messages:t,showTimeStamps:s=!0,isTyping:r=!1,messageOptions:o,onArtifactClick:i}=e;return(0,n.jsxs)("div",{className:"space-y-4 overflow-visible",children:[t.map((e,t)=>{let l="function"==typeof o?o(e):o;return(0,n.jsx)(a.ChatMessage,{showTimeStamp:s,...e,...l,onArtifactClick:i},t)}),r&&(0,n.jsx)(l.TypingIndicator,{})]})}},89104:(e,t,s)=>{s.r(t),s.d(t,{PromptSuggestions:()=>a});var n=s(57437);function a(e){let{label:t,append:s,suggestions:a}=e;return(0,n.jsxs)("div",{className:"space-y-6 pt-20",children:[(0,n.jsx)("h2",{className:"text-center text-2xl font-bold",children:t}),(0,n.jsx)("div",{className:"flex gap-6 text-sm",children:a.map(e=>(0,n.jsx)("button",{onClick:()=>s({role:"user",content:e}),className:"h-max flex-1 rounded-xl border bg-background p-4 hover:bg-muted",children:(0,n.jsx)("p",{children:e})},e))})]})}},43303:(e,t,s)=>{s.r(t),s.d(t,{TypingIndicator:()=>l});var n=s(57437),a=s(47774);function l(){return(0,n.jsx)("div",{className:"justify-left flex space-x-1",children:(0,n.jsx)("div",{className:"rounded-lg bg-muted p-3",children:(0,n.jsxs)("div",{className:"flex -space-x-2.5",children:[(0,n.jsx)(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce"}),(0,n.jsx)(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:90ms]"}),(0,n.jsx)(a.Z,{className:"h-5 w-5 animate-typing-dot-bounce [animation-delay:180ms]"})]})})})}}}]);